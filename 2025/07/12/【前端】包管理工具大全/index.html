<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    
    
    <title>åŒ…ç®¡ç†å·¥å…· | Yoyo&#39;s blog</title>
    
    <link rel="alternative" href="/atom.xml" title="Yoyo&#39;s blog" type="application/atom+xml">
    
    
<link rel="stylesheet" href="/css/style.css">

    
    <link rel="stylesheet" href="/libs/fancybox/jquery.fancybox.css" charset="utf-8">
    
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!-- hexo injector head_end start --><script src="./func.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
<body class="site">
    <!-- é®ç½©å±‚ -->
    <div id="mask-layer">
    </div>
    
    <header class="site-header">
        <h1 class="site-title"><a href="/">Yoyo&#39;s blog</a></h1>
        <nav class="site-nav">
            <ul class="nav">
                
                <li><a href="/">Home</a></li>
                
                <li><a href="/archives">Archives</a></li>
                
                
                <li><a href="/atom.xml" title="RSS Feed">rss</a></li>
                
                <li><a class="toggle-search" href="#search">search</a></li>
            </ul>
        </nav>
        <div class="site-search" id="search">
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://70v-yoyo.github.io"></form>
        </div>
        
            <div class="site-header-background" style="background-image:url('http://reumia.github.io/hexo-theme-zzoman2015/images/background-zzoman2015.jpg')"></div>
        
    </header>
    <div class="site-body">
        <div class="global-width">
    <article class="article" data-layout="post" data-slug="ã€å‰ç«¯ã€‘åŒ…ç®¡ç†å·¥å…·å¤§å…¨">
        <div class="article-content">
            
            
            <header class="article-header">
                <div class="article-meta">
                    <a href="/2025/07/12/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%A4%A7%E5%85%A8/" class="article-date">
  <time datetime="2025-07-12T05:01:09.000Z">2025-07-12</time>
</a>
                    
                    
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/frontend/" rel="tag">frontend</a></li></ul>

                </div>
                
    <h1 class="article-title" itemprop="name">
      <a href="/2025/07/12/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%A4%A7%E5%85%A8/">åŒ…ç®¡ç†å·¥å…·</a>
    </h1>

            </header>
            
            <div class="article-body">
                <meta name="referrer" content="no-referrer" />

<blockquote>
<p>ç‰ˆæœ¬ï¼š250712</p>
</blockquote>
<h1 id="ä¸»æµåŒ…ç®¡ç†å™¨ç®€ä»‹"><a href="#ä¸»æµåŒ…ç®¡ç†å™¨ç®€ä»‹" class="headerlink" title="ä¸»æµåŒ…ç®¡ç†å™¨ç®€ä»‹"></a>ä¸»æµåŒ…ç®¡ç†å™¨ç®€ä»‹</h1><p>ä¸»æµçš„åŒ…ç®¡ç†å™¨å…¶å®æœ‰ä¸å°‘ï¼Œä¸åŒè¯­è¨€å’Œå¹³å°éƒ½æœ‰å„è‡ªçš„ä¸€å¥—ç³»ç»Ÿã€‚</p>
<ol>
<li>å‰ç«¯ï¼ˆJavaScript&#x2F;TypeScriptï¼‰</li>
</ol>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ç®€ä»‹</th>
<th>å¼€å‘è€…</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>npm</td>
<td>Node.js é»˜è®¤åŒ…ç®¡ç†å™¨</td>
<td>Node.js å®˜æ–¹</td>
<td>æœ€ä¸»æµã€ç”Ÿæ€æœ€å¤§</td>
</tr>
<tr>
<td>Yarn</td>
<td>Facebook å‡ºå“</td>
<td>Facebook</td>
<td>æ›´å¿«ã€æ›´ç¨³å®šã€æ”¯æŒç¦»çº¿ç¼“å­˜</td>
</tr>
<tr>
<td>pnpm</td>
<td>æ–°ä¸€ä»£é«˜æ€§èƒ½ç®¡ç†å™¨</td>
<td>ç¤¾åŒº</td>
<td>å¿«ã€å ç©ºé—´å°ã€æ”¯æŒæ¨¡å—å»é‡</td>
</tr>
<tr>
<td>bun</td>
<td>è¶…å¿«çš„ JS è¿è¡Œæ—¶ &amp; åŒ…ç®¡ç†å™¨</td>
<td>ç¤¾åŒº</td>
<td>é›†æˆæ‰“åŒ…å™¨ã€æµ‹è¯•å·¥å…·ã€æå¿«</td>
</tr>
</tbody></table>
<p>bun æœ€è¿‘ç‰¹åˆ«ç«ï¼Œå› ä¸ºå®ƒé™¤äº†åŒ…ç®¡ç†ï¼Œè¿˜é›†æˆäº†è¿è¡Œæ—¶å’Œæ„å»ºå·¥å…·ã€‚</p>
<ol start="2">
<li>Python<br>pip	Python å®˜æ–¹çš„åŒ…ç®¡ç†å™¨ï¼ˆæœ€å¸¸ç”¨ï¼‰<br>conda	ç”¨äºç§‘å­¦è®¡ç®—ã€è™šæ‹Ÿç¯å¢ƒç®¡ç†ï¼ˆAnaconda ç”Ÿæ€ï¼‰</li>
<li>Java &#x2F; Kotlin<br>Maven	Java æœ€å¸¸ç”¨çš„åŒ…ç®¡ç†å’Œæ„å»ºå·¥å…·<br>Gradle	æ›´å¿«ã€è„šæœ¬åŒ–ç¨‹åº¦é«˜ï¼ˆAndroid å¸¸ç”¨ï¼‰</li>
<li>Rust<br>cargo	Rust å®˜æ–¹åŒ…ç®¡ç†å™¨ï¼ˆä¹Ÿæ˜¯æ„å»ºå·¥å…·ï¼‰</li>
<li>Go<br>go modules	Go å®˜æ–¹çš„æ¨¡å—ç³»ç»Ÿå’ŒåŒ…ç®¡ç†æ–¹æ¡ˆï¼ˆä» Go 1.11 å¼€å§‹ï¼‰</li>
</ol>
<h1 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h1><ul>
<li>npm v.s. yarn<br>Yarn å’Œ npm éƒ½æ˜¯ Node.js çš„åŒ…ç®¡ç†å™¨ï¼Œç”¨äºå®‰è£…ã€ç®¡ç†å’Œæ›´æ–°å‰ç«¯é¡¹ç›®ä¸­çš„ä¾èµ–ã€‚å®ƒä»¬ä½œç”¨å·®ä¸å¤šï¼Œä½†å„è‡ªæœ‰ä¸€äº›ä¸åŒç‚¹ã€‚<ul>
<li>npm å’Œ yarn éƒ½ä½¿ç”¨åŒä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼špackage.jsonã€‚<br>è¿™ä¸ªæ–‡ä»¶æ˜¯ Node.js é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº†é¡¹ç›®çš„å…ƒä¿¡æ¯ã€ä¾èµ–ã€è„šæœ¬å‘½ä»¤ç­‰å†…å®¹ã€‚æ— è®ºæ˜¯ç”¨ npm è¿˜æ˜¯ yarn æ¥ç®¡ç†ä¾èµ–ï¼Œéƒ½ä¼šè¯»å–å¹¶å†™å…¥è¿™ä¸ªæ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>npm</th>
<th>Yarn</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å¼€å‘è€…</strong></td>
<td>å®˜æ–¹å‡ºå“ï¼ˆNode.jsï¼‰</td>
<td>Facebook å‡ºå“</td>
</tr>
<tr>
<td><strong>é”æ–‡ä»¶</strong></td>
<td><code>package-lock.json</code></td>
<td><code>yarn.lock</code></td>
</tr>
<tr>
<td><strong>å®‰è£…é€Ÿåº¦</strong></td>
<td>è¾ƒæ…¢ï¼ˆä»¥å‰ï¼‰ ç°åœ¨å·²æ”¹è¿›ï¼ˆnpm v7+ï¼‰</td>
<td>æ›´å¿«ï¼ˆå¹¶è¡Œå®‰è£…ï¼‰</td>
</tr>
<tr>
<td><strong>ç¦»çº¿å®‰è£…</strong></td>
<td>é»˜è®¤ä¸æ”¯æŒ</td>
<td>æ”¯æŒç¼“å­˜ç¦»çº¿å®‰è£…</td>
</tr>
<tr>
<td><strong>å·¥ä½œåŒºæ”¯æŒï¼ˆMonorepoï¼‰</strong></td>
<td>npm v7+ æ”¯æŒ</td>
<td>æ”¯æŒï¼ˆæ›´æˆç†Ÿï¼‰</td>
</tr>
<tr>
<td><strong>é»˜è®¤åŒ…ç®¡ç†åè®®</strong></td>
<td>HTTPS</td>
<td>HTTPS</td>
</tr>
</tbody></table>
<p>å‘½ä»¤çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>npm</th>
<th>Yarn</th>
</tr>
</thead>
<tbody><tr>
<td>å®‰è£…ä¾èµ–</td>
<td><code>npm install</code></td>
<td><code>yarn install</code></td>
</tr>
<tr>
<td>æ·»åŠ åŒ…</td>
<td><code>npm install package-name</code></td>
<td><code>yarn add package-name</code></td>
</tr>
<tr>
<td>åˆ é™¤åŒ…</td>
<td><code>npm uninstall package-name</code></td>
<td><code>yarn remove package-name</code></td>
</tr>
<tr>
<td>å…¨å±€å®‰è£…</td>
<td><code>npm install -g</code></td>
<td><code>yarn global add</code></td>
</tr>
<tr>
<td>è¿è¡Œè„šæœ¬</td>
<td><code>npm run script</code></td>
<td><code>yarn script</code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>Yarn å‘½ä»¤</th>
<th>NPM å‘½ä»¤</th>
<th>ç­‰ä»·è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>å¼€å‘å¯åŠ¨</strong></td>
<td><code>yarn dev</code> æˆ– <code>yarn run dev</code></td>
<td><code>npm run dev</code></td>
<td>å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆå¸¸ç”± Viteã€webpack-dev-server é©±åŠ¨ï¼‰</td>
</tr>
<tr>
<td><strong>ç”Ÿäº§æ„å»º</strong></td>
<td><code>yarn build</code> æˆ– <code>yarn run build</code></td>
<td><code>npm run build</code></td>
<td>æ‰“åŒ…æ„å»ºç”Ÿäº§ç¯å¢ƒä»£ç ï¼ˆé€šå¸¸è¾“å‡ºåˆ° <code>dist/</code>ï¼‰</td>
</tr>
<tr>
<td><strong>è¿è¡Œè„šæœ¬å‘½ä»¤</strong></td>
<td><code>yarn run &lt;script&gt;</code></td>
<td><code>npm run &lt;script&gt;</code></td>
<td>è¿è¡Œ <code>package.json</code> ä¸­ <code>scripts</code> å®šä¹‰çš„å‘½ä»¤</td>
</tr>
<tr>
<td><strong>ç”Ÿäº§å®‰è£…ä¾èµ–å¹¶æ„å»º</strong></td>
<td><code>yarn install &amp;&amp; yarn build</code></td>
<td><code>npm install &amp;&amp; npm run build</code></td>
<td>å®‰è£…ä¾èµ–å¹¶æ‰§è¡Œæ„å»º</td>
</tr>
</tbody></table>
<p>yarn build ä¸ yarn run build æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼Œåªæ˜¯ yarn build æ˜¯æ›´ç®€æ´çš„å†™æ³•ï¼Œæ¨èä½¿ç”¨ã€‚ä½†npm ä¸è¡ŒâŒ å¿…é¡»å†™ npm run buildã€‚<br><strong>æ³¨æ„ï¼šç°åœ¨å¾ˆå¤šé¡¹ç›®éƒ½å¯ä»¥å…¼å®¹ä¸¤è€…ï¼Œä½†ä¸è¦æ··ç”¨ï¼</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g yarn</span><br><span class="line"><span class="comment">#ä¹‹åå°±å¯ä»¥åœ¨é¡¹ç›®é‡Œç”¨ yarn æ›¿ä»£ npmäº†</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é¡¹ç›®çš„yarn.lockåˆ é™¤å†å®‰è£…ä¼šé¿å…yarn installå„ç§ç‰ˆæœ¬&#x2F;æºå‡ºé”™çš„é—®é¢˜</li>
</ul>
<h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆå®‰è£…nodejs</span></span><br><span class="line">conda install nodejs</span><br><span class="line"></span><br><span class="line">npm -v </span><br><span class="line">npm i package_name</span><br><span class="line"><span class="comment">#é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿å®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„åŒ…ã€‚</span></span><br><span class="line"><span class="comment">#å¦‚æœéœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…ï¼Œå¯ä»¥åœ¨åŒ…åä¹‹åï¼Œé€šè¿‡ @ ç¬¦å·æŒ‡å®šå…·ä½“çš„ç‰ˆæœ¬</span></span><br><span class="line">npm i moment@2.22.2</span><br><span class="line">npm i <span class="comment">#ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…</span></span><br><span class="line">npm uninstall package_name</span><br><span class="line"></span><br><span class="line">npm list</span><br><span class="line">npm update xx</span><br><span class="line"></span><br><span class="line">npm init</span><br><span class="line"></span><br><span class="line">npm i package_name -D <span class="comment">#è®°å½•åˆ°devDependenciesèŠ‚ç‚¹ä¸­ å¼€å‘ç¯å¢ƒéä¸Šçº¿ç¯å¢ƒ</span></span><br><span class="line">npm install package_name --save-dev <span class="comment"># ç­‰ä»·äº-D</span></span><br><span class="line"></span><br><span class="line">npm run &lt;script_name&gt;</span><br><span class="line">npm cache clean --force</span><br><span class="line">npm audit fix <span class="comment">#ä¿®å¤ä¾èµ–é—®é¢˜ å¯é€‰æ˜¯å¦åˆ é™¤package-lock.json</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å›½å†…é•œåƒ</span></span><br><span class="line">npm config get registry <span class="comment">#æŸ¥çœ‹å½“å‰é•œåƒæº</span></span><br><span class="line">npm config <span class="built_in">set</span> registry=https://registry.npm.taobao.org/#æ·˜å®æº</span><br><span class="line">npm config get registry <span class="comment">#æ£€æŸ¥é•œåƒæºæ˜¯å¦ä¸‹è½½æˆåŠŸ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é•œåƒæœ‰å“ªäº› nrm</span></span><br><span class="line">npm i nrm -g <span class="comment">#å…¨å±€å®‰è£…</span></span><br><span class="line">nrm <span class="built_in">ls</span> <span class="comment">#æŸ¥çœ‹å¯ç”¨é•œåƒæº</span></span><br><span class="line">nrm use taobao <span class="comment">#åˆ‡æ¢ä¸ºtaobaoé•œåƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘å¸ƒåŒ…</span></span><br><span class="line">npm login#ç™»é™†npm</span><br><span class="line"><span class="comment">#é…ç½®keywords .npmignore .gitignore</span></span><br><span class="line">npm run <span class="comment">#è·‘é€šåŒæ­¥ä¸€ä¸‹ æ³¨æ„ç¡®å®šç‰ˆæœ¬å¥½æ›´æ–°</span></span><br><span class="line">npm publish#å‘å¸ƒåŒ…</span><br><span class="line">npm unpublish package --force <span class="comment">#åˆ é™¤å·²å‘å¸ƒçš„åŒ…</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ npm install å‘½ä»¤å®‰è£…åŒ…çš„æ—¶å€™ï¼Œnpm åŒ…ç®¡ç†å·¥å…·ä¼šè‡ªåŠ¨æŠŠåŒ…çš„åç§°å’Œç‰ˆæœ¬å·ï¼Œè®°å½•åˆ° package.json çš„dependenciesä¸­ã€‚<br>package-lock.json é…ç½®æ–‡ä»¶ç”¨æ¥è®°å½• node_modules ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªåŒ…çš„ä¸‹è½½ä¿¡æ¯ï¼Œä¾‹å¦‚åŒ…çš„åå­—ã€ç‰ˆæœ¬å·ã€ä¸‹è½½åœ°å€ç­‰ã€‚<br>æ³¨æ„ï¼šç¨‹åºå‘˜ä¸è¦æ‰‹åŠ¨ä¿®æ”¹ node_modules æˆ– package-lock.json æ–‡ä»¶ä¸­çš„ä»»ä½•ä»£ç ï¼Œnpm åŒ…ç®¡ç†å·¥å…·ä¼šè‡ªåŠ¨ç»´æŠ¤å®ƒä»¬ã€‚</p>
<ul>
<li>npmåŒ…å¯ä»¥åˆ†æˆé¡¹ç›®åŒ…ã€å…¨å±€åŒ…<br>é‚£äº›è¢«å®‰è£…åˆ°é¡¹ç›®çš„ node_modules ç›®å½•ä¸­çš„åŒ…ï¼Œéƒ½æ˜¯é¡¹ç›®åŒ…ã€‚<br>é¡¹ç›®åŒ…åˆåˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯ï¼šå¼€å‘ä¾èµ–åŒ…ï¼ˆè¢«è®°å½•åˆ° devDependencies èŠ‚ç‚¹ä¸­çš„åŒ…ï¼Œåªåœ¨å¼€å‘æœŸé—´ä¼šç”¨åˆ°ï¼‰ï¼Œæ ¸å¿ƒä¾èµ–åŒ…ï¼ˆè¢«è®°å½•åˆ° dependencies èŠ‚ç‚¹ä¸­çš„åŒ…ï¼Œåœ¨å¼€å‘æœŸé—´å’Œé¡¹ç›®ä¸Šçº¿ä¹‹åéƒ½ä¼šç”¨åˆ°ï¼‰<br>å‘½ä»¤-gåˆ™å®‰è£…ä¸ºå…¨å±€åŒ… å¸è½½ä¹Ÿéœ€è¦æ·»åŠ -gï¼Œåªæœ‰å·¥å…·æ€§è´¨çš„åŒ…ï¼Œæ‰æœ‰å…¨å±€å®‰è£…çš„å¿…è¦æ€§ã€‚npm å®‰è£…çš„å…¨å±€åŒ…é»˜è®¤å­˜æ”¾åœ¨ä¸€ä¸ªç³»ç»Ÿç›¸å…³çš„ç›®å½•ä¸­ã€‚</li>
<li>ä»Šååœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œä¸€å®šè¦æŠŠ node_modules æ–‡ä»¶å¤¹ï¼Œæ·»åŠ åˆ° .gitignore å¿½ç•¥æ–‡ä»¶ä¸­ã€‚</li>
<li>npm scripts<br>npm å…è®¸åœ¨package.jsonæ–‡ä»¶é‡Œé¢ï¼Œä½¿ç”¨scriptså­—æ®µå®šä¹‰è„šæœ¬å‘½ä»¤ã€‚</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node build.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  </span><br><span class="line">$ npm run build</span><br><span class="line"># ç­‰åŒäºæ‰§è¡Œ</span><br><span class="line">$ node build.js</span><br></pre></td></tr></table></figure>
<ul>
<li>npx ç”¨äºè¿è¡Œ npm åŒ…è€Œæ— éœ€å…¨å±€å®‰è£…<br>npx create-react-app my-app</li>
</ul>
<h1 id="package-jsonå¸¸è§é…ç½®"><a href="#package-jsonå¸¸è§é…ç½®" class="headerlink" title="package.jsonå¸¸è§é…ç½®"></a>package.jsonå¸¸è§é…ç½®</h1><p>package.json ä¸­å¿…é¡»åŒ…å« nameï¼Œversionï¼Œmain è¿™ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä»£è¡¨åŒ…çš„åå­—ã€ç‰ˆæœ¬å·ã€åŒ…çš„å…¥å£ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-project&quot;</span><span class="punctuation">,</span>           <span class="comment">// é¡¹ç›®åç§°</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span>             <span class="comment">// ç‰ˆæœ¬å·</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// è®¾ä¸ºç§æœ‰é¡¹ç›®ï¼Œé˜²æ­¢æ„å¤–å‘å¸ƒåˆ°npm</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>                    <span class="comment">// å¸¸ç”¨è„šæœ¬</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config webpack.config.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:themes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node public/themes/generate.js&quot;</span><span class="comment">//è‡ªå®šä¹‰</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>               <span class="comment">// ç”Ÿäº§ç¯å¢ƒä¾èµ–</span></span><br><span class="line">    <span class="attr">&quot;react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>            <span class="comment">// å¼€å‘ç¯å¢ƒä¾èµ–</span></span><br><span class="line">    <span class="attr">&quot;typescript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span>             <span class="comment">// å…¥å£æ–‡ä»¶</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Winter Wang&quot;</span><span class="punctuation">,</span>       <span class="comment">// ä½œè€…</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span>               <span class="comment">// è®¸å¯è¯</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>semver è§„åˆ™ï¼šç‰ˆæœ¬å·è§„åˆ™ Semantic Versioningï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼‰</li>
</ul>
<table>
<thead>
<tr>
<th>ç‰ˆæœ¬å·éƒ¨åˆ†</th>
<th>å«ä¹‰</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td>MAJOR</td>
<td><strong>ä¸»ç‰ˆæœ¬å·</strong>ï¼Œå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹æ—¶é€’å¢</td>
<td><code>1.0.0</code> â†’ <code>2.0.0</code></td>
</tr>
<tr>
<td>MINOR</td>
<td><strong>æ¬¡ç‰ˆæœ¬å·</strong>ï¼Œå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„æ–°åŠŸèƒ½æ—¶é€’å¢</td>
<td><code>1.1.0</code> â†’ <code>1.2.0</code></td>
</tr>
<tr>
<td>PATCH</td>
<td><strong>è¡¥ä¸å·</strong>ï¼Œå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£æ—¶é€’å¢</td>
<td><code>1.0.1</code> â†’ <code>1.0.2</code></td>
</tr>
</tbody></table>
<p>åŒ…çš„ç‰ˆæœ¬å·æ˜¯ä»¥â€œç‚¹åˆ†åè¿›åˆ¶â€å½¢å¼è¿›è¡Œå®šä¹‰çš„ï¼Œæ€»å…±æœ‰ä¸‰ä½æ•°å­—<br>ç‰ˆæœ¬å·æå‡è§„åˆ™ï¼šåªè¦å‰é¢ç‰ˆæœ¬å·å¢é•¿ï¼Œåˆ™åé¢ç‰ˆæœ¬å·å½’é›¶ã€‚</p>
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>å«ä¹‰</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td><code>^</code></td>
<td>å…¼å®¹å‡çº§ï¼šè‡ªåŠ¨æ›´æ–°åˆ°ä¸æ”¹å˜ä¸»ç‰ˆæœ¬å·çš„æœ€é«˜ç‰ˆæœ¬</td>
<td><code>^1.2.3</code> &#x3D; <code>&gt;=1.2.3 &lt;2.0.0</code></td>
</tr>
<tr>
<td><code>~</code></td>
<td>è¡¥ä¸å‡çº§ï¼šè‡ªåŠ¨æ›´æ–°è¡¥ä¸å·ï¼Œä¸å‡çº§æ¬¡ç‰ˆæœ¬å·</td>
<td><code>~1.2.3</code> &#x3D; <code>&gt;=1.2.3 &lt;1.3.0</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>ä»»æ„ç‰ˆæœ¬</td>
<td><code>*</code> &#x3D; <code>&gt;=0.0.0</code></td>
</tr>
<tr>
<td><code>1.2.x</code></td>
<td>è¡¥ä¸é€šé…ç¬¦ï¼ŒåŒ¹é…ä»»ä½•è¡¥ä¸ç‰ˆæœ¬</td>
<td><code>1.2.x</code> &#x3D; <code>&gt;=1.2.0 &lt;1.3.0</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>å¤§äºç­‰äºæŒ‡å®šç‰ˆæœ¬</td>
<td><code>&gt;=1.2.3</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>å°äºæŒ‡å®šç‰ˆæœ¬</td>
<td><code>&lt;2.0.0</code></td>
</tr>
</tbody></table>
<p>ç¬¦å·å«ä¹‰<br>^1.2.3: æ¥å— 1.x.x çš„ç‰ˆæœ¬ï¼Œä½†ä¸è¶…è¿‡ 2.0.0ã€‚<br>~1.2.3: æ¥å— 1.2.x çš„ç‰ˆæœ¬ï¼Œä½†ä¸è¶…è¿‡ 1.3.0ã€‚<br>1.2.3: å›ºå®šç‰ˆæœ¬</p>
<table>
<thead>
<tr>
<th>ç¬¦å·</th>
<th>å«ä¹‰</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody><tr>
<td><code>^</code></td>
<td>å…¼å®¹å‡çº§ï¼šè‡ªåŠ¨æ›´æ–°åˆ°ä¸æ”¹å˜ä¸»ç‰ˆæœ¬å·çš„æœ€é«˜ç‰ˆæœ¬</td>
<td><code>^1.2.3</code> &#x3D; <code>&gt;=1.2.3 &lt;2.0.0</code></td>
</tr>
<tr>
<td><code>~</code></td>
<td>è¡¥ä¸å‡çº§ï¼šè‡ªåŠ¨æ›´æ–°è¡¥ä¸å·ï¼Œä¸å‡çº§æ¬¡ç‰ˆæœ¬å·</td>
<td><code>~1.2.3</code> &#x3D; <code>&gt;=1.2.3 &lt;1.3.0</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>ä»»æ„ç‰ˆæœ¬</td>
<td><code>*</code> &#x3D; <code>&gt;=0.0.0</code></td>
</tr>
<tr>
<td><code>1.2.x</code></td>
<td>è¡¥ä¸é€šé…ç¬¦ï¼ŒåŒ¹é…ä»»ä½•è¡¥ä¸ç‰ˆæœ¬</td>
<td><code>1.2.x</code> &#x3D; <code>&gt;=1.2.0 &lt;1.3.0</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>å¤§äºç­‰äºæŒ‡å®šç‰ˆæœ¬</td>
<td><code>&gt;=1.2.3</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>å°äºæŒ‡å®šç‰ˆæœ¬</td>
<td><code>&lt;2.0.0</code></td>
</tr>
</tbody></table>
<h1 id="pnpm"><a href="#pnpm" class="headerlink" title="pnpm"></a>pnpm</h1><p>æ–°åŒ…ç®¡ç†å™¨ï¼Œç©ºé—´å ç”¨å°‘ã€é€Ÿåº¦æå¿«ã€åŸç”Ÿæ”¯æŒ Monorepo</p>
<ul>
<li><p>å…±åŒç‚¹<br>å®‰è£…ä¾èµ–</p>
<p>ç®¡ç† package.json</p>
<p>é”å®šä¾èµ–ç‰ˆæœ¬</p>
<p>è¿è¡Œè„šæœ¬ï¼ˆnpm run &#x2F; pnpm runï¼‰</p>
<p>å‘½ä»¤å†™æ³•åƒyarn</p>
</li>
<li><p>åŒºåˆ«</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>ç¡¬é“¾æ¥å…±äº«æœºåˆ¶</td>
<td>ç›¸åŒä¾èµ–åªä¸‹è½½ä¸€æ¬¡ï¼ˆèŠ‚çœç£ç›˜ç©ºé—´ï¼‰</td>
</tr>
<tr>
<td>æ›´å¿«çš„å®‰è£…é€Ÿåº¦</td>
<td>æ¯” npm å¿« 2~3 å€ï¼Œä¾èµ–è§£æå¿«</td>
</tr>
<tr>
<td>é»˜è®¤ä¸¥æ ¼æ¨¡å¼ï¼ˆéš”ç¦»ï¼‰</td>
<td>ç¦æ­¢è·¨åŒ…è®¿é—®æœªå£°æ˜çš„ä¾èµ–ï¼ˆé˜²æ­¢éšå¼ä¾èµ– bugï¼‰</td>
</tr>
<tr>
<td>åŸç”Ÿæ”¯æŒ Monorepo</td>
<td>ç±»ä¼¼ Turborepoï¼Œä½¿ç”¨ pnpm-workspace.yamlç®¡ç†å¤šåŒ…å·¥ç¨‹è¶…æ–¹ä¾¿</td>
</tr>
<tr>
<td>å…¼å®¹ npmã€yarn ç”Ÿæ€</td>
<td>ä¹Ÿç”¨ <code>package.json</code> å’Œ <code>node_modules</code>ï¼ˆä½†æ˜¯ç¡¬é“¾æ¥å®ç°ï¼‰</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>åŠŸèƒ½&#x2F;å·¥å…·</th>
<th>npm</th>
<th>yarn</th>
<th>pnpmï¼ˆæ¨èï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>å®‰è£…é€Ÿåº¦</td>
<td>ä¸€èˆ¬</td>
<td>å¿«</td>
<td>ğŸš€ æœ€å¿«</td>
</tr>
<tr>
<td>ç©ºé—´å ç”¨</td>
<td>é«˜ï¼ˆé‡å¤ä¾èµ–ï¼‰</td>
<td>ä¸­</td>
<td>ğŸš€ æœ€çœ</td>
</tr>
<tr>
<td>é”æ–‡ä»¶</td>
<td><code>package-lock.json</code></td>
<td><code>yarn.lock</code></td>
<td><code>pnpm-lock.yaml</code></td>
</tr>
<tr>
<td>node_modules ç»“æ„</td>
<td>æ‰å¹³ï¼ˆå®¹æ˜“æ±¡æŸ“ï¼‰</td>
<td>æ‰å¹³</td>
<td>ä¸¥æ ¼éš”ç¦»ï¼ˆæ¸…æ™°ï¼‰</td>
</tr>
<tr>
<td>Monorepo æ”¯æŒ</td>
<td>åŸºç¡€</td>
<td>ä¸­</td>
<td>ğŸš€ åŸç”Ÿå†…å»ºæ”¯æŒ</td>
</tr>
</tbody></table>
<ul>
<li>pnpmç‰¹ç‚¹<br>node_modules æ˜¯æ‰å¹³çš„ + ä½¿ç”¨é“¾æ¥æŒ‡å‘ç¼“å­˜<br>çœŸæ­£çš„ä¾èµ–å­˜æ”¾åœ¨ä¸€ä¸ªå…¨å±€ .pnpm-store ä¸­<br>æ¯ä¸ªé¡¹ç›®çš„ node_modules æ˜¯ä¸€å¥—ç¡¬é“¾æ¥çš„ç»“æ„ï¼Œç©ºé—´ä¸é‡å¤å ç”¨<br>é»˜è®¤å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼šç¦æ­¢è®¿é—®æœªå£°æ˜ä¾èµ–ï¼Œæ¯”å¦‚ç”¨äº† lodash å´æ²¡åŠ åˆ° package.jsonï¼Œç›´æ¥æŠ¥é”™</li>
<li>å®‰è£…</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">npm install -g pnpm</span><br><span class="line">pnpm -v</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå§‹åŒ– åˆ›å»º pnpm-workspace.yaml</span></span><br><span class="line">pnpm init </span><br><span class="line"></span><br><span class="line"><span class="comment">#å®‰è£…ä¾èµ– åŒyarn</span></span><br><span class="line">pnpm add axios          <span class="comment"># å®‰è£…åˆ° dependencies</span></span><br><span class="line">pnpm add -D eslint      <span class="comment"># å®‰è£…åˆ° devDependencies</span></span><br><span class="line">pnpm install            <span class="comment"># å®‰è£… package.json ä¸­çš„å…¨éƒ¨ä¾èµ–</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¸è½½</span></span><br><span class="line">pnpm remove axios</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿è¡Œè„šæœ¬</span></span><br><span class="line">pnpm run dev <span class="comment">#ç®€å†™ pnpm dev</span></span><br><span class="line">pnpm run build</span><br><span class="line">pnpm run lint</span><br><span class="line">pnpm -r run build <span class="comment">#åœ¨æ‰€æœ‰ workspace é¡¹ç›®ä¸­è¿è¡Œ build è„šæœ¬</span></span><br><span class="line">pnpm --filter app run dev <span class="comment"># åªåœ¨æŸä¸ªå­é¡¹ç›®ä¸‹è¿è¡Œè„šæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®é•œåƒ</span></span><br><span class="line">pnpm config <span class="built_in">set</span> registry https://registry.npmmirror.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸´æ—¶è¿è¡Œå‘½ä»¤ï¼ˆæ›¿ä»£ npxï¼‰ä¸ç”¨å…¨å±€å®‰è£…ï¼Œä¸´æ—¶ä¸‹è½½åè‡ªåŠ¨æ¸…ç†ã€‚</span></span><br><span class="line">pnpm dlx create-react-app my-app</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¾èµ–æ¥æº  æ˜¯å“ªä¸€ä¸ªåŒ…å¼•å…¥çš„ï¼Œåœ¨å“ªä¸€çº§ä¾èµ–è¢«ä½¿ç”¨ï¼Œéå¸¸é€‚åˆè°ƒè¯•ç‰ˆæœ¬å†²çª</span></span><br><span class="line">pnpm why axios</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>pnpm outdated</code></td>
<td>æŸ¥çœ‹æ‰€æœ‰è¿‡æœŸçš„ä¾èµ–</td>
</tr>
<tr>
<td><code>pnpm update</code></td>
<td>æ›´æ–°æ‰€æœ‰ä¾èµ–ï¼ˆæŒ‰ semver è§„åˆ™ï¼‰</td>
</tr>
<tr>
<td><code>pnpm update lodash</code></td>
<td>æ›´æ–°æŸä¸ªåŒ…</td>
</tr>
<tr>
<td><code>pnpm update --latest</code></td>
<td>å¼ºåˆ¶æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆå¿½ç•¥ semverï¼‰</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”â€”â€”â€”</td>
</tr>
<tr>
<td><code>pnpm store path</code></td>
<td>æŸ¥çœ‹æœ¬æœºçš„ <code>.pnpm-store</code> çœŸå®è·¯å¾„</td>
</tr>
<tr>
<td><code>pnpm store prune</code></td>
<td>æ¸…é™¤æ²¡æœ‰é¡¹ç›®ä½¿ç”¨çš„æ—§ç¼“å­˜ï¼ˆèŠ‚çœç©ºé—´ï¼‰</td>
</tr>
<tr>
<td><code>pnpm cache clean</code></td>
<td>æ¸…ç†ä¸‹è½½ç¼“å­˜ï¼ˆä¸æ¸… <code>.pnpm-store</code>ï¼‰</td>
</tr>
</tbody></table>
<h2 id="Monorepo-é¡¹ç›®ï¼špnpm-workspaces-å¤šåŒ…ç®¡ç†"><a href="#Monorepo-é¡¹ç›®ï¼špnpm-workspaces-å¤šåŒ…ç®¡ç†" class="headerlink" title="Monorepo é¡¹ç›®ï¼špnpm workspaces å¤šåŒ…ç®¡ç†"></a>Monorepo é¡¹ç›®ï¼špnpm workspaces å¤šåŒ…ç®¡ç†</h2><p>Monorepoï¼ˆMono Repositoryï¼‰ æ˜¯ä¸€ç§ä»£ç ç®¡ç†æ–¹å¼ï¼šæŠŠå¤šä¸ªç›¸å…³é¡¹ç›®ï¼ˆå­åŒ…ã€ç»„ä»¶åº“ã€å‰åç«¯ç­‰ï¼‰æ”¾åœ¨ä¸€ä¸ªç»Ÿä¸€ä»£ç ä»“åº“ä¸­ç®¡ç†ã€‚</p>
<ul>
<li>ä½œç”¨</li>
</ul>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>åŸç”Ÿæ”¯æŒ Workspaces</td>
<td>ä¸éœ€è¦é…ç½®é¢å¤–å·¥å…·ï¼ˆå¦‚ Lernaï¼‰</td>
</tr>
<tr>
<td>ä¾èµ–å…±äº« + ç‰ˆæœ¬éš”ç¦»</td>
<td>å¤šä¸ªå­åŒ…ä¾èµ–å…±ç”¨ç¼“å­˜ï¼Œæ•ˆç‡é«˜ä½†ä¾èµ–ä¸äº’ä¸²</td>
</tr>
<tr>
<td>å­åŒ…ä¹‹é—´æ”¯æŒäº’ç›¸ä¾èµ–</td>
<td>è‡ªåŠ¨é“¾æ¥ <code>link:</code> æ–¹å¼ï¼Œä¸ç”¨å‘ npm åŒ…</td>
</tr>
<tr>
<td>å¯ä»¥å¹¶è¡Œ&#x2F;ä¸²è¡Œæ‰§è¡Œè„šæœ¬</td>
<td>æ¯”å¦‚ä¸€æ¬¡æ€§æ„å»º&#x2F;æµ‹è¯•å¤šä¸ªåŒ…</td>
</tr>
</tbody></table>
<ul>
<li>ä½¿ç”¨</li>
</ul>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>pnpm install</code></td>
<td>å®‰è£…æ‰€æœ‰å­é¡¹ç›®ä¾èµ– + è‡ªåŠ¨é“¾æ¥å…³ç³»</td>
</tr>
<tr>
<td><code>pnpm -r run dev</code></td>
<td>åœ¨æ‰€æœ‰å­åŒ…æ‰§è¡Œ <code>dev</code> è„šæœ¬ï¼ˆrecursiveï¼‰</td>
</tr>
<tr>
<td><code>pnpm --filter app run build</code></td>
<td>åªåœ¨ <code>app</code> åŒ…ä¸­æ‰§è¡Œ build è„šæœ¬</td>
</tr>
<tr>
<td><code>pnpm exec eslint . --filter app</code></td>
<td>åœ¨ app ä¸­æ‰§è¡ŒæŸå‘½ä»¤</td>
</tr>
<tr>
<td><code>pnpm --filter &quot;...[ui-lib]&quot; run test</code></td>
<td>ã€Œæ‰€æœ‰ä¾èµ–äº† ui-lib çš„åŒ…ã€ï¼Œéƒ½æ‰§è¡Œ test</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># initåå½¢æˆMonorepo å·¥ä½œåŒº</span></span><br><span class="line">root/</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ pnpm-workspace.yaml</span><br><span class="line">â””â”€â”€ packages/</span><br><span class="line">    â”œâ”€â”€ app/</span><br><span class="line">    â””â”€â”€ ui-lib/</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»º pnpm-workspace.yaml æŒ‡å®šå­é¡¹ç›®</span></span><br><span class="line">packages:</span><br><span class="line">  - packages/*</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå­é¡¹ç›®</span></span><br><span class="line"><span class="built_in">mkdir</span> -p packages/app</span><br><span class="line"><span class="built_in">cd</span> packages/app</span><br><span class="line">pnpm init</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›¸äº’ä¾èµ–</span></span><br><span class="line"><span class="comment"># åœ¨ app ä¸­æ·»åŠ å¯¹ ui-lib çš„ä¾èµ–</span></span><br><span class="line">pnpm add ui-lib --filter app</span><br><span class="line"><span class="comment"># è¿™é‡Œ ui-lib ä¼šä»¥ link: çš„å½¢å¼è¢«è‡ªåŠ¨é“¾æ¥ï¼Œä¸éœ€è¦å‘å¸ƒåˆ° npmã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --filter åªå¯¹æŸä¸ªæˆ–æŸå‡ ä¸ªåŒ…æ‰§è¡Œå‘½ä»¤ï¼ˆè€Œä¸æ˜¯å…¨éƒ¨å­åŒ…ï¼‰ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘å¸ƒ</span></span><br><span class="line"><span class="built_in">cd</span> packages/ui-lib</span><br><span class="line">pnpm publish --access public</span><br><span class="line"><span class="comment">#--access publicï¼šè®¾ç½®è¿™ä¸ªåŒ…çš„â€œè®¿é—®æƒé™â€ä¸ºå…¬å¼€ï¼ˆä»»ä½•äººéƒ½èƒ½å®‰è£…ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§æœ‰å‘å¸ƒ .npmrc è®¾ç½®ç§åº“åœ°å€å’Œ tokenï¼š</span></span><br><span class="line">registry=https://npm.yourcompany.com</span><br><span class="line">//npm.yourcompany.com/:_authToken=xxxxx</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ç¼“å­˜ä¸CI-CDä¼˜åŒ–"><a href="#ç¼“å­˜ä¸CI-CDä¼˜åŒ–" class="headerlink" title="ç¼“å­˜ä¸CI&#x2F;CDä¼˜åŒ–"></a>ç¼“å­˜ä¸CI&#x2F;CDä¼˜åŒ–</h2><ul>
<li>åœ¨ CI ä¸­ç¼“å­˜.pnpm-storeå¯ä»¥æ˜¾è‘—æé€Ÿï¼špnpmä¾èµ–æ‰€å­˜å‚¨çš„ä½ç½®<code>pnpm store path </code><br>å®ä¾‹:ï¼šGitHub Actions</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®å¹¶å®‰è£… pnpm è¿™ä¸ªåŒ…ç®¡ç†å·¥å…·</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨å®˜æ–¹çš„ GitHub Action æ’ä»¶ pnpm/action-setup@v2</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨ pnpm@8 ç‰ˆæœ¬</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">pnpm</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">pnpm/action-setup@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="number">8</span></span><br><span class="line"><span class="comment">#ç¼“å­˜ pnpm çš„ä¾èµ–åŒ…æ•°æ®ï¼Œä»è€ŒåŠ é€Ÿåç»­ CI å®‰è£…ä¾èµ–</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨ GitHub å®˜æ–¹çš„ç¼“å­˜æ’ä»¶ actions/cache@v3</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Restore</span> <span class="string">pnpm</span> <span class="string">cache</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/cache@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">~/.pnpm-store</span></span><br><span class="line">    <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-pnpm-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/pnpm-lock.yaml&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="comment">#æ‰§è¡Œ pnpm installï¼Œå®‰è£… package.json ä¸­å£°æ˜çš„æ‰€æœ‰ä¾èµ–</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">pnpm</span> <span class="string">install</span></span><br></pre></td></tr></table></figure>
<h2 id="è€é¡¹ç›®è¿ç§»åˆ°-pnpm-Monorepo"><a href="#è€é¡¹ç›®è¿ç§»åˆ°-pnpm-Monorepo" class="headerlink" title="è€é¡¹ç›®è¿ç§»åˆ° pnpm Monorepo"></a>è€é¡¹ç›®è¿ç§»åˆ° pnpm Monorepo</h2><ol>
<li>æ£€æŸ¥ä¾èµ–æ˜¯å¦å…¼å®¹<br>å…ˆç¡®è®¤ä½ é¡¹ç›®æ˜¯å¦æœ‰ä»¥ä¸‹é—®é¢˜ï¼š<br>æœ‰æ²¡æœ‰ä½¿ç”¨æœªå£°æ˜çš„ä¾èµ–ï¼ˆéšå¼ä¾èµ–ï¼‰ï¼Ÿ<br>æœ‰æ²¡æœ‰ä¾èµ–ä¸åŒç‰ˆæœ¬ React&#x2F;Vue&#x2F;TS çš„å¤šä¸ªå­é¡¹ç›®ï¼Ÿ<br>æœ‰æ²¡æœ‰æ—§ä»£ç ç”¨æ‰å¹³ node_modules æŸ¥æ¨¡å—çš„è¡Œä¸ºï¼Ÿ<br>ã€å¦‚æœæœ‰ã€‘å¯ä»¥ä¸´æ—¶è€ƒè™‘ä½¿ç”¨ shamefully-hoistã€‚</li>
<li>åˆ‡æ¢åŒ…ç®¡ç†å™¨ä¸º pnpm</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install -g pnpm   <span class="comment"># å…¨å±€å®‰è£… pnpm</span></span><br><span class="line">pnpm install          <span class="comment"># æ›¿ä»£ npm install</span></span><br><span class="line"><span class="comment"># pnpm ä¼šè‡ªåŠ¨ï¼š</span></span><br><span class="line"><span class="comment">#è¯†åˆ«å¹¶ä½¿ç”¨åŸæ¥çš„ package.json</span></span><br><span class="line"><span class="comment">#åˆ›å»º pnpm-lock.yamlï¼ˆä¸å†ä½¿ç”¨ package-lock.jsonï¼‰</span></span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line"><span class="built_in">rm</span> package-lock.json  <span class="comment"># æˆ– yarn.lock</span></span><br><span class="line"><span class="built_in">rm</span> -rf node_modules</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>åˆ›å»º Monorepo ç›®å½•ç»“æ„</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root/</span><br><span class="line">â”œâ”€â”€ packages/</span><br><span class="line">â”‚   â”œâ”€â”€ app/</span><br><span class="line">â”‚   â”œâ”€â”€ ui-lib/</span><br><span class="line">â”‚   â””â”€â”€ utils/</span><br><span class="line">â”œâ”€â”€ pnpm-workspace.yaml</span><br><span class="line">â””â”€â”€ package.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»º pnpm-workspace.yaml</span></span><br><span class="line">packages:</span><br><span class="line">  - packages/*</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>é¡¹ç›®æ ¹ç›®å½•</th>
<th>å»ºè®®åšæ³•</th>
</tr>
</thead>
<tbody><tr>
<td><code>pnpm-workspace.yaml</code></td>
<td>å®šä¹‰å­åŒ…è·¯å¾„</td>
</tr>
<tr>
<td><code>.npmrc</code></td>
<td>é…ç½® hoistã€registry</td>
</tr>
<tr>
<td><code>tsconfig.json</code></td>
<td>å¯ç”¨ <code>paths</code> åˆ«åæ”¯æŒå­åŒ…äº’ç›¸ import</td>
</tr>
<tr>
<td><code>.eslintrc.js</code></td>
<td>é…ç½® monorepo é¡¹ç›®çš„æ ¹ lint</td>
</tr>
<tr>
<td><code>vite.config.ts</code></td>
<td>å¤šé¡¹ç›®æ”¯æŒå­åŒ…è”è°ƒ &#x2F; æ‰“åŒ…</td>
</tr>
<tr>
<td>pnpm-lock.yaml</td>
<td>é”æ–‡ä»¶</td>
</tr>
<tr>
<td>.pnpm-store</td>
<td>storeç›®å½•</td>
</tr>
</tbody></table>
<ol start="4">
<li>å®‰è£…ä¾èµ–å¹¶è¿ç§»<br>è¿›å…¥æ ¹ç›®å½•è¿è¡Œï¼š<code>pnpm install</code><br>pnpm è‡ªåŠ¨æ‰«æ <code>packages/*</code>ï¼Œä¸ºæ¯ä¸ªå­åŒ…å®‰è£…ä¾èµ–ï¼Œå¹¶è‡ªåŠ¨ link å­åŒ…ä¹‹é—´çš„å¼•ç”¨ï¼ˆå¦‚æœåç§°ä¸€è‡´ï¼‰ã€‚<br>å¦‚æœå¤šä¸ªå­åŒ…ä¾èµ–ç›¸åŒçš„ç¬¬ä¸‰æ–¹åº“ï¼Œpnpm ä¼šç”¨ç¡¬é“¾æ¥èŠ‚çœç©ºé—´ï¼Œä¸ä¼šé‡å¤ä¸‹è½½ï¼</li>
<li>ä¿®å¤éšå¼ä¾èµ– &#x2F; å…¼å®¹æ—§ä»£ç <br>å¦‚æœä½ ç”¨çš„æ˜¯æœªå£°æ˜ä¾èµ–ï¼Œpnpm é»˜è®¤ä¼šæŠ¥é”™ï¼šå› ä¸ºæ²¡åœ¨ package.json é‡Œå†™ vueï¼Œå´ç›´æ¥ import<br>æœ€å¥½ï¼šåœ¨æ¯ä¸ªå­åŒ…é‡Œæ‰‹åŠ¨è¡¥ä¸Šä¾èµ–<br>ä¸´æ—¶æ–¹æ¡ˆï¼šå¼€å¯ hoist æ¨¡å¼å…¼å®¹æ—§ä»£ç </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install --shamefully-hoist</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>ä¼˜åŒ–è„šæœ¬ä¸æ„å»ºé€»è¾‘<br>åœ¨æ ¹ç›®å½•çš„ package.json ä¸­æ·»åŠ ç»Ÿä¸€ç®¡ç†å‘½ä»¤ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pnpm -r run dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pnpm -r run build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pnpm -r run lint&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">//å­åŒ…</span></span><br><span class="line"><span class="comment">// packages/ui-lib/package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ui-lib&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite dev&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

            </div>
        </div>
    </article>

    
    
<nav class="article-nav">
  
    <a href="/2025/07/20/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91ES6%E5%A4%A7%E5%85%A8/" id="article-nav-newer" class="article-nav-link-wrap prev">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ES6ä¸€æœ¬é€š
        
      </div>
    </a>
  
  
    <a href="/2025/07/09/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91htmlcss%E5%A4%A7%E5%85%A8/" id="article-nav-older" class="article-nav-link-wrap next">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">HTML_CSS_Bootstrap_Emmet</div>
    </a>
  
</nav>

    

    
</div>
    </div>
    <footer class="site-footer">
        <div class="global-width">
            <ul class="site-widget">
                
                <li class="widget widget-tag">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/basics/" rel="tag">basics</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frontend/" rel="tag">frontend</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/projects/" rel="tag">projects</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tags/" rel="tag">tags</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/" rel="tag">test</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-category">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/daily-report/">daily_report</a><span class="category-list-count">52</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-recent_posts">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-body">
      <ul>
        
          <li>
            <a href="/2025/07/28/Bootsrap/">ã€å‰ç«¯ã€‘Bootsrap</a>
          </li>
        
          <li>
            <a href="/2025/07/20/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91JS%E5%A4%A7%E5%85%A8/">JSä¸€æœ¬é€š</a>
          </li>
        
          <li>
            <a href="/2025/07/20/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91ES6%E5%A4%A7%E5%85%A8/">ES6ä¸€æœ¬é€š</a>
          </li>
        
          <li>
            <a href="/2025/07/12/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%A4%A7%E5%85%A8/">åŒ…ç®¡ç†å·¥å…·</a>
          </li>
        
          <li>
            <a href="/2025/07/09/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91htmlcss%E5%A4%A7%E5%85%A8/">HTML_CSS_Bootstrap_Emmet</a>
          </li>
        
      </ul>
    </div>
  </div>

                </li>
                
            </ul>
        </div>
        <div class="site-info">
            <address>
                &copy; 2014 <a href="https://70v-yoyo.github.io">Yoyo&#39;s blog</a> All Right Reserved. <br/>
                Powered by <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a>. Theme by <a target="_blank" rel="noopener" href="http://zzoman.com">ZZOMAN</a>
                <p><a target="_blank" href="https://github.com/70v-Yoyo">My github</a></p>
            </address>
        </div>
    </footer> 
    
    
    <script src="/libs/jquery-1.11.3.min.js" type="text/javascript"></script>
    
    <script src="/libs/fancybox/jquery.fancybox.js" type="text/javascript"></script>
    
    <script src="/js/site_init.js" type="text/javascript"></script>
     
    <noscript>
        <style>
            article {
                position: absolute;
                width: 0;
                height: 0;
                overflow: hidden;
                opacity: 0;
            }

        </style>
        <h1>JSå·²è¢«ç¦ç”¨</h1>
    </noscript>
<!-- hexo injector body_end start -->
    <script>
      (function() {
        function moveElementIfSmallScreen() {
          const toc = document.getElementById('fixed-toc-container');
          const article = document.querySelector("article");
          const toggleBtn = document.getElementById('toggle_btn');
          if (!toc || !article) return;
          if (window.innerWidth < 1024 && article.firstElementChild !== toc) {
            console.log('small screen!!')
            
            article.insertBefore(toc, article.firstChild);//ç§»åŠ¨èŠ‚ç‚¹ï¼Œè€Œéå¤åˆ¶
            
            toggleBtn.style.display='none';
            // æ›¿æ¢æ ·å¼ï¼šå–æ¶ˆ fixedï¼Œè®¾ç½®é€‚åˆæ­£æ–‡çš„æ ·å¼
            toc.style.position = 'relative';
            toc.style.top = '';
            toc.style.left = '';
            toc.style.width = '100%';
            toc.style.maxHeight = 'none';
            toc.style.overflowY = 'visible';
            toc.style.overflowX = 'visible';
            toc.style.padding = '1em';
            toc.style.borderLeft = 'none';
            toc.style.borderBottom = '1px solid #ddd';
            toc.style.background = '#f9f9f9';
            toc.style.opacity = '1';
            toc.style.zIndex = '9999';
            toc.style.boxShadow = 'none';
            toc.style.margin = '1rem';
            toc.style.paddingTop= '2rem';
          }
        }
        window.addEventListener("DOMContentLoaded", moveElementIfSmallScreen);
        window.addEventListener("resize", moveElementIfSmallScreen);
      })();
    </script>
  <!-- hexo injector body_end end -->
    <div id="fixed-toc-container" style="
      position: fixed;
      top: 0vh;
      left: 0px;
      width: 15rem;
      max-height: 80vh;
      overflow-y: auto;
      overflow-x: auto;
      padding: 10px;
      border-left: 2px solid #ccc;
      font-size: 14px;
      line-height: 1.5;
      background: #fff;
      opacity:0.8;
      z-index: 9999;
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.05),  /* ç¬¬ä¸€å±‚ï¼šè¿‘å¤„æŸ”å’Œ */
        0 8px 16px rgba(0, 0, 0, 0.08); /* ç¬¬äºŒå±‚ï¼šè¿œå¤„æ‰©æ•£ */
    ">
      <strong>Contents</strong>
      <div id="toggle_btn" style="
      position:absolute;
      right:1rem;
      display:inline-block;
      width:2rem;
      text-align:center;
      border:1px solid #ccc;
      "><</div>
      <ul id="fixed-toc-list" style="list-style: none; padding-left: 10px;"></ul>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const nav = document.querySelector('nav');
        if (nav) {
          const navBottom = nav.getBoundingClientRect().bottom;//æµè§ˆå™¨JS API
          console.log('nav bottom:', navBottom);
          // è®¾ç½®tocå…ƒç´  top = nav bottom
          const toc = document.querySelector('#fixed-toc-container');
          if (toc) {
            toc.style.top = navBottom + 'px';
            toc.style.maxHeight=window.innerHeight - navBottom.getBoundingClientRect().bottom;
          }
        }
      });

      const myDiv = document.getElementById('toggle_btn');
      var tocList=document.getElementById("fixed-toc-list");
      var tocContainer=document.getElementById("fixed-toc-container");
      function handleClickBtn() {
        console.log('Div è¢«ç‚¹å‡»äº†ï¼');
        if(myDiv.textContent==='<'){
          myDiv.textContent ='>'
          tocList.style.display='none'
          tocContainer.style.width='11rem'
        }else{
          myDiv.textContent ='<'
          tocList.style.display='block'
          tocContainer.style.width='15rem'
        }
          
      }


      myDiv.addEventListener('click', handleClickBtn);// ç»‘å®šç‚¹å‡»äº‹ä»¶


      (function() {
      const Patternstr = "/*\\d{4}/\\d{2}/\\d{2}/.*"; //æœ¬èº«æ˜¯å­—ç¬¦ä¸²æ’å…¥ï¼Œæ‰€ä»¥å¯¹ç¬¦å·è¦è½¬ä¹‰
      //"^//*"->"/"
      //"/.*"->".*"
      //JSå¼•æ“ä¸­""è½¬ä¹‰
      //æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ä¹Ÿæ˜¯""è½¬ä¹‰
      const dataPattern = new RegExp(Patternstr);
      const path = window.location.pathname;
      console.log(dataPattern.toString(),path,dataPattern.test(path));//æ§åˆ¶å°åœ¨æ¸²æŸ“æ—¶çœç•¥äº†åæ–œæ çš„å¯è§†è¡¨ç¤ºã€‚
      if (!dataPattern.test(path)&&(path==='/'||path==='index.html')) {
        console.log('no toc')
        let toc = document.getElementById('fixed-toc-container');
        if (toc) toc.style.display = 'none';
        return;
      }
        var content = document.querySelector('body');
        console.log('content',content)
        //var tocList = document.getElementById('fixed-toc-list');
        if (!content || !tocList) {
          document.getElementById('fixed-toc-container').style.display = 'none';
          return;
        }
        var headings = content.querySelectorAll('h1, h2, h3, h4');
        console.log('headings',headings)
        if(headings){
          const h1Element=headings[0];
          const rect = h1Element.getBoundingClientRect();
          if(rect.left<150){
           tocContainer.style.right='0px';
           tocContainer.style.left = 'auto'; // ç§»é™¤å†…è”çš„ left æ ·å¼
            //ä¸æ˜¯è®¾ç½®right:0 å°±æ›¿æ¢left:0 éœ€è¦ç§»é™¤
            console.log('to right')
          }
          console.log(rect.left,'150')
        }
        
        if (headings.length === 0) {
          document.getElementById('fixed-toc-container').style.display = 'none';
          return;
        }
        headings.forEach(function(heading, i) {
          if (!heading.id) {
            heading.id = 'heading-' + i;
          }
        });
        headings.forEach(function(heading) {
          var level = parseInt(heading.tagName.substring(1));
          var li = document.createElement('li');
          li.style.marginLeft = (level - 1) * 15 + 'px';
          var a = document.createElement('a');
          a.href = '#' + heading.id;
          a.textContent = heading.textContent;
          a.style.color = '#555';
          a.style.textDecoration = 'none';
          a.onmouseover = function() { a.style.textDecoration = 'underline'; };
          a.onmouseout = function() { a.style.textDecoration = 'none'; };
          li.appendChild(a);
          tocList.appendChild(li);
        });
      })();
    </script>
  </body>
</html>
