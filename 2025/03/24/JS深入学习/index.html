<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    
    
    <title>JS深入学习 | Yoyo&#39;s blog</title>
    
    <link rel="alternative" href="/atom.xml" title="Yoyo&#39;s blog" type="application/atom+xml">
    
    
<link rel="stylesheet" href="/css/style.css">

    
    <link rel="stylesheet" href="/libs/fancybox/jquery.fancybox.css" charset="utf-8">
    
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!-- hexo injector head_end start --><script src="./func.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
<body class="site">
    <!-- 遮罩层 -->
    <div id="mask-layer">
    </div>
    
    <header class="site-header">
        <h1 class="site-title"><a href="/">Yoyo&#39;s blog</a></h1>
        <nav class="site-nav">
            <ul class="nav">
                
                <li><a href="/">Home</a></li>
                
                <li><a href="/archives">Archives</a></li>
                
                
                <li><a href="/atom.xml" title="RSS Feed">rss</a></li>
                
                <li><a class="toggle-search" href="#search">search</a></li>
            </ul>
        </nav>
        <div class="site-search" id="search">
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://70v-yoyo.github.io"></form>
        </div>
        
            <div class="site-header-background" style="background-image:url('http://reumia.github.io/hexo-theme-zzoman2015/images/background-zzoman2015.jpg')"></div>
        
    </header>
    <div class="site-body">
        <div class="global-width">
    <article class="article" data-layout="post" data-slug="JS深入学习">
        <div class="article-content">
            
            
            <header class="article-header">
                <div class="article-meta">
                    <a href="/2025/03/24/JS%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2025-03-24T11:13:25.000Z">2025-03-24</time>
</a>
                    
                    
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/frontend/" rel="tag">frontend</a></li></ul>

                </div>
                
    <h1 class="article-title" itemprop="name">
      <a href="/2025/03/24/JS%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0/">JS深入学习</a>
    </h1>

            </header>
            
            <div class="article-body">
                <meta name="referrer" content="no-referrer" />

<blockquote>
<p>版本：250324</p>
</blockquote>
<ul>
<li>多个应用场景<br><img src="https://i-blog.csdnimg.cn/direct/d6353291da504e328a6f50db464fc1d2.png" alt="在这里插入图片描述"></li>
</ul>
<h1 id="主流浏览器"><a href="#主流浏览器" class="headerlink" title="主流浏览器"></a>主流浏览器</h1><p>Chrome：Google出品的基于<strong>Webkit</strong>内核浏览器，内置了非常强悍的<strong>JavaScript引擎——V8</strong>。由于Chrome一经安装就<strong>时刻保持自升级</strong>，所以不用管它的版本，最新版早就支持ES6了；<br>Safari：Apple的Mac系统自带的基于<strong>Webkit</strong>内核的浏览器，从OS X 10.7 Lion自带的6.1版本开始支持ES6，目前最新的OS X 10.11 El Capitan自带的Safari版本是9.x，早已支持ES6；<br>Firefox：Mozilla自己研制的<strong>Gecko内核和JavaScript引擎OdinMonkey</strong>。早期的Firefox按版本发布，后来终于聪明地学习Chrome的做法进行<strong>自升级</strong>，时刻保持最新；<br>移动设备上目前iOS和Android两大阵营分别主要使用Apple的Safari和Google的Chrome，由于两者都是Webkit核心，结果HTML5首先在手机上全面普及），对JavaScript的标准支持也很好，最新版本均支持ES6。</p>
<h1 id="浏览器执行-JS原理"><a href="#浏览器执行-JS原理" class="headerlink" title="浏览器执行 JS原理"></a>浏览器执行 JS原理</h1><p>浏览器分成两部分：渲染引擎和 JS 引擎<br>渲染引擎：用来解析HTML与CSS，俗称内核，比如 chrome 浏览器的 blink ，老版本的 webkit<br>JS 引擎：也称为 JS 解释器。 用来读取网页中的JavaScript代码，对其处理后运行，比如 chrome 浏览器的 V8<br>浏览器本身并不会执行JS代码，而是通过内置 JavaScript 引擎(解释器) 来执行 JS 代码 。JS 引擎执行代码时逐行解释<br>每一句源码（转换为机器语言），然后由计算机去执行，所以 JavaScript 语言归为脚本语言，会逐行解释执行。</p>
<ul>
<li>js中的await 与 python中的await<br>await 是 JavaScript 中用于处理异步操作的一部分，它只能在 async 函数中使用，用来等待一个 Promise 完成并返回其结果。它的主要作用是让代码看起来像同步操作，但实际上仍然是异步执行。<br>简化了一堆.then()的链式调用<br>await 只会暂停当前的异步函数，而不会阻塞整个程序。<br>如果 await 后的 Promise 被拒绝（rejected），会抛出错误，需要用 try-catch 捕获。</li>
<li><ul>
<li>扩展：python<br>python中逻辑同理，await 允许你等待这些操作完成，而不会阻塞事件循环，使得程序可以处理其他任务。异步操作通常涉及 I&#x2F;O 密集型任务，比如：<br>网络请求（HTTP API 调用）<br>文件操作<br>数据库查询<br>计时器</li>
</ul>
</li>
<li>页面加载时执行JavaScript函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js文件中写</span></span><br><span class="line"><span class="comment">//方法1</span></span><br><span class="line"> <span class="keyword">function</span>  <span class="title function_">myfun</span>(<span class="params"></span>) 　　</span><br><span class="line">&#123; 　　 <span class="title function_">alert</span>( <span class="string">&quot;this window.onload&quot;</span> ); 　　</span><br><span class="line">&#125; 　　</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = myfun;  <span class="comment">/*用window.onload调用myfun()*/</span> 　　</span><br><span class="line"><span class="comment">//不要括号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//方法2</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>= <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line"><span class="title function_">func1</span>();</span><br><span class="line"><span class="title function_">func2</span>();</span><br><span class="line"><span class="title function_">func3</span>(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p> javaScript<br> ECMAScript是一种语言标准 即ES6<br><img src="https://i-blog.csdnimg.cn/direct/37b1542f351c4a7eb2be1358057eb9e8.png" alt="在这里插入图片描述"><br>BOM对象就是浏览器上面的对象。包含window，location，screen，history，</p>
<ul>
<li>window<br>alert()<br>confirm()<br>prompt()<br>setInterval()<br>setTimeout()</li>
<li>location<br>href<br>hash<br>url<br>reload()</li>
<li>history<br>go()</li>
</ul>
<p>&#x3D;&#x3D;引入&#x3D;&#x3D;<br>1、内部<br>放入<code>&lt;head&gt;</code><br><code>&lt;script type=&quot;text/javascript&quot;&gt;js code&lt;/script&gt;</code><br>2、外部：js文件引入 (更方便维护）<br><code>&lt;script type=&quot;text/javascript&quot; src=&quot;...&quot;&gt;&lt;/script&gt; </code></p>
<p>&#x3D;&#x3D;运行条件&#x3D;&#x3D;<br>要让浏览器运行JavaScript，必须先有一个HTML页面，在HTML页面中引入JavaScript，然后，让浏览器加载该HTML页面，就可以执行JavaScript代码。</p>
<p>&#x3D;&#x3D;注释&#x3D;&#x3D;<br>&#x2F;&#x2F;<br>&#x2F;* *&#x2F;</p>
<h1 id="读入数据"><a href="#读入数据" class="headerlink" title="读入数据"></a>读入数据</h1><ul>
<li>json</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;data.json&quot;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;加载数据失败&quot;</span>, error));</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;请求失败&quot;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fetchData</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6 import</span></span><br><span class="line"><span class="keyword">import</span> userData <span class="keyword">from</span> <span class="string">&quot;./data.json&quot;</span> assert &#123; <span class="attr">type</span>: <span class="string">&quot;json&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(userData);</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; user, getUser &#125; <span class="keyword">from</span> <span class="string">&quot;./data.js&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getUser</span>());</span><br><span class="line"><span class="comment">//data.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>读取本地存储 (localStorage &#x2F; sessionStorage)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 存储数据</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;user&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;));</span><br><span class="line"><span class="comment">//JSON.stringify converts a JavaScript value to a JSON string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取数据</span></span><br><span class="line"><span class="keyword">const</span> userData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;user&quot;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(userData);</span><br></pre></td></tr></table></figure>
<ul>
<li>txt,csv<br>浏览器的 File 对象（即 event.target.files[0]）不能直接访问内容，必须通过 FileReader 读取。<br>FileReader 是浏览器提供的 API，用于异步读取文件内容，它支持以下格式：<br>readAsText(file) —— 读取文本（如 .txt, .csv, .json）。<br>readAsDataURL(file) —— 读取图片并返回 Base64 编码。<br>readAsArrayBuffer(file) —— 读取二进制数据。<br>readAsBinaryString(file) —— 读取二进制字符串（已废弃）。<br>为什么必须写 onload？<br>readAsText(file) 是异步操作，读取文件需要时间，所以不能直接在下一行获取 result。必须等 onload 事件触发，文件数据才会被正确读取。</li>
</ul>
<p>1️⃣ dragover 事件<br>当文件被拖动到 dropArea 上方时触发。<br>默认情况下，浏览器不允许放置文件，e.preventDefault(); 使其成为可拖拽区域。<br>2️⃣ drop 事件<br>当文件被放下时触发。<br>默认行为是打开文件，但我们希望自己控制读取文件，因此 e.preventDefault(); 阻止这个默认行为。</p>
<p>可以将读取到的文本转换成json</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;./data.txt&quot;</span>) <span class="comment">// 读取 txt 文件</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">text</span>()) <span class="comment">// 读取文本内容</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">text</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> jsonData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(text); <span class="comment">// 将文本转换为 JSON</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(jsonData); <span class="comment">// 输出 JSON 数据</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;JSON 解析失败:&quot;</span>, error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;读取文件失败:&quot;</span>, err));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1 --&gt;</span></span><br><span class="line">不适用于：直接打开 HTML 文件时（因浏览器安全限制）。</span><br><span class="line">fetch(&quot;example.txt&quot;)</span><br><span class="line">    .then(response =&gt; response.text())</span><br><span class="line">    .then(data =&gt; console.log(data))</span><br><span class="line">    .catch(error =&gt; console.error(&quot;读取文件失败&quot;, error));</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fileInput&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fileInput&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;change&quot;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> file = event.<span class="property">target</span>.<span class="property">files</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span></span><br><span class="line"><span class="language-javascript">    reader.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">result</span>); <span class="comment">// 读取的文件内容</span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    reader.<span class="title function_">readAsText</span>(file);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 3 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dropArea&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 300px; height: 150px; border: 2px dashed gray; text-align: center; line-height: 150px;&quot;</span>&gt;</span></span><br><span class="line">    拖拽 TXT 文件到此处</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">id</span>=<span class="string">&quot;fileContent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line">pre是一个 HTML 标签，常用于显示文本内容，尤其是保留换行和空格格式的文本。</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> dropArea = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;dropArea&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">dropArea.<span class="title function_">addEventListener</span>(<span class="string">&quot;dragover&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    e.<span class="title function_">preventDefault</span>(); <span class="comment">// 允许拖拽</span></span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">dropArea.<span class="title function_">addEventListener</span>(<span class="string">&quot;drop&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> file = e.<span class="property">dataTransfer</span>.<span class="property">files</span>[<span class="number">0</span>]; <span class="comment">// 获取拖拽的文件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (!file || file.<span class="property">type</span> !== <span class="string">&quot;text/plain&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;请选择一个 TXT 文件！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span></span><br><span class="line"><span class="language-javascript">    reader.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fileContent&quot;</span>).<span class="property">textContent</span> = event.<span class="property">target</span>.<span class="property">result</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    reader.<span class="title function_">readAsText</span>(file);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>读取数据库</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;https://example.com/api/users&quot;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data));</span><br></pre></td></tr></table></figure>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>JavaScript严格区分大小写<br>JavaScript 是一种弱类型或者说动态语言。这意味着不用提前声明变量的类型，在程序运行过程中，类型会被自动确定。</p>
<ul>
<li>变量类型</li>
<li><ul>
<li>基本数据类型<br>Number  String  Boolean Undefined Null</li>
</ul>
</li>
<li><ul>
<li>引用数据类型<br>Object Array  Function</li>
</ul>
</li>
<li><ul>
<li>或者另外一种分类，数据类型分为两类：<br><strong>简单类型</strong>（<strong>基本数据类型</strong>、<strong>值类型</strong>）：在存储时变量中存储的是值本身，包括string ，number，boolean，undefined，null<br><strong>复杂数据类型（引用类型）</strong>：在存储时变量中存储的仅仅是地址（引用），通过 new 关键字创建的对象（系统对象、自定义对象），如 Object、Array、Date等；</li>
</ul>
</li>
<li>NAN<br>NaN（Not a Number，非数）是计算机科学中数值数据类型的一类值，表示未定义或不可表示的值。常在浮点数运算中使用。<code>Number(&quot;123nb&quot;)</code>会报错。它是一个全局属性，属于 Number 类型，数学运算错误\类型转换失败会得到。<br><strong>NaN这个特殊的Number与所有其他值都不相等，包括它自己：</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">NaN</span> === <span class="title class_">NaN</span>; <span class="comment">// false</span></span><br><span class="line"><span class="comment">//唯一能判断NaN的方法是通过isNaN()函数： true</span></span><br><span class="line"><span class="title class_">Number</span>.<span class="built_in">isNaN</span>(<span class="title class_">NaN</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//isNaN()用来判断一个变量是否为非数字的类型，不是数字返回true，是数字返回false</span></span><br><span class="line">bool_num=<span class="built_in">isNaN</span>(num)</span><br></pre></td></tr></table></figure>
<ul>
<li>null v.s. undefined<br>null表示一个“空”的值，它和0以及空字符串’’不同，0是一个数值，’’表示长度为0的字符串，而null表示“空”。<br>undefined，它是只声明但未赋值的变量的默认值。<br>未声明过的值调用会报错，ReferenceError: myVar is not defined</li>
<li>不声明的全局变量 以及 strict模式<br>如果一个变量没有通过var申明就被使用，那么该变量就自动被申明为全局变量。<br>ECMA在后续规范中推出了strict模式，在strict模式下运行的JavaScript代码，<strong>强制通过var申明变量，未使用var申明变量就使用的，将导致运行错误</strong>。<br>启用strict模式的方法是在JavaScript代码的第一行写上：’use strict’;<br>这是一个字符串，不支持strict模式的浏览器会把它当做一个字符串语句执行，支持strict模式的浏览器将开启strict模式运行JavaScript。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x=<span class="number">30</span>;</span><br><span class="line"><span class="keyword">var</span> name=<span class="string">&quot;myy&quot;</span>;</span><br><span class="line"><span class="title function_">alert</span>(<span class="keyword">typeof</span> name);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">value=<span class="title function_">prompt</span>(text,defaultText)<span class="comment">//用于显示可提示用户进行输入的对话框。</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(x)<span class="comment">//写在页面上</span></span><br><span class="line"><span class="keyword">var</span> htmlStr=<span class="string">&#x27;&lt;h1&gt;&#x27;</span>+x+<span class="string">&#x27;&lt;/h1&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//undefine null NAN</span></span><br><span class="line">		<span class="keyword">var</span> str;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">        <span class="keyword">var</span> variable = <span class="literal">undefined</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(variable + <span class="string">&#x27;pink&#x27;</span>); <span class="comment">// undefinedpink</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(variable + <span class="number">1</span>); <span class="comment">// NaN  undefined 和数字相加 最后的结果是 NaN</span></span><br><span class="line">        <span class="comment">// null 空值</span></span><br><span class="line">        <span class="keyword">var</span> space = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(space + <span class="string">&#x27;pink&#x27;</span>); <span class="comment">// nullpink</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(space + <span class="number">1</span>); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//几进制</span></span><br><span class="line">num=<span class="number">0b1</span>;</span><br><span class="line">num=<span class="number">0o5</span>;</span><br><span class="line">num=<span class="number">0xa</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显式变量转换</span></span><br><span class="line"><span class="keyword">var</span> a=<span class="title class_">Number</span>(<span class="string">&quot;23&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> age = <span class="built_in">parseInt</span>(<span class="title function_">prompt</span>(<span class="string">&#x27;请输入年龄:&#x27;</span>));</span><br><span class="line"><span class="keyword">var</span> height = <span class="built_in">parseFloat</span>(<span class="title function_">prompt</span>(<span class="string">&#x27;请输入身高(m):&#x27;</span>));</span><br><span class="line"><span class="keyword">var</span> str=num.<span class="title function_">toString</span>();<span class="comment">//或String(num)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//支持隐式转换</span></span><br><span class="line"><span class="keyword">var</span> num=num+<span class="string">&quot;string&quot;</span>;<span class="comment">//数字自动转换为字符串</span></span><br><span class="line">num=<span class="string">&#x27;12&#x27;</span>-<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>内部函数可以访问外部函数定义的变量，反过来则不行</p>
<p>JavaScript的函数定义有个特点，它会先扫描整个函数体的语句，把所有申明的变量“提升”到函数顶部</p>
<p>变量最后如果在全局作用域中也没有找到，则报ReferenceError错误</p>
<p>JavaScript默认有一个全局对象window，全局作用域的变量实际上被绑定到window的一个属性。<br>不同的JavaScript文件如果使用了相同的全局变量，或者定义了相同名字的顶层函数，都会造成命名冲突，并且很难被发现。减少冲突的一个方法是把自己的所有变量和函数全部绑定到一个全局变量中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把自己的代码全部放入唯一的名字空间MYAPP中，会大大减少全局变量冲突的可能</span></span><br><span class="line"><span class="comment">// 唯一的全局变量MYAPP:</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">MYAPP</span> = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他变量:</span></span><br><span class="line"><span class="variable constant_">MYAPP</span>.<span class="property">name</span> = <span class="string">&#x27;myapp&#x27;</span>;</span><br><span class="line"><span class="variable constant_">MYAPP</span>.<span class="property">version</span> = <span class="number">1.0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他函数:</span></span><br><span class="line"><span class="variable constant_">MYAPP</span>.<span class="property">foo</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;foo&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;<span class="comment">//定义的函数实际上也是一个全局变量</span></span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// 直接调用foo()</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">foo</span>(); <span class="comment">// 通过window.foo()调用。 效果一样。</span></span><br><span class="line"><span class="comment">//我们每次直接调用的alert()函数其实也是window的一个变量。</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">alert</span>(<span class="string">&#x27;调用window.alert()&#x27;</span>);</span><br><span class="line"><span class="comment">// 把alert保存到另一个变量:</span></span><br><span class="line"><span class="keyword">var</span> old_alert = <span class="variable language_">window</span>.<span class="property">alert</span>;</span><br><span class="line"><span class="comment">// 给alert赋一个新函数:</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">alert</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">alert</span>(<span class="title class_">Number</span>.<span class="property">MAX_VALUE</span>); <span class="comment">// 1.7976931348623157e+308</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="title class_">Number</span>.<span class="property">MIN_VALUE</span>); <span class="comment">// 5e-324</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Infinity</span> ，代表无穷大，大于任何数值</span><br><span class="line">-<span class="title class_">Infinity</span> ，代表无穷小，小于任何数值</span><br><span class="line"><span class="title class_">NaN</span> ，<span class="title class_">Not</span> a number，代表一个非数值</span><br></pre></td></tr></table></figure>
<ul>
<li>var v.s. let v.s. const<br>不声明直接赋值的也属于全局变量<br> 全局变量：在任何一个地方都可以使用，只有在浏览器关闭时才会被销毁，因此比较占内存<br> 局部变量：只在函数内部使用，当其所在的代码块被执行时，会被初始化；当代码块运行结束后，就会被销毁，因此更节省内存空间</li>
</ul>
<ol>
<li>作用域问题（块级作用域）<br>var 声明的变量具有函数作用域（function scope），而 let 具有块级作用（block scope）。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123; <span class="keyword">var</span> a = <span class="number">10</span>; &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 10（`var` 变量泄露到 if 语句块外）</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123; <span class="keyword">let</span> b = <span class="number">20</span>; &#125; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); </span><br><span class="line"><span class="comment">// ReferenceError: b is not defined (`let` 仅在 if 语句块内可用)</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>变量提升（Hoisting）但不初始化<br>var 变量会提升（hoist）到作用域顶部，并自动初始化为 undefined，但 let 也会提升但不会初始化，在访问前使用会报错。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// undefined </span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">5</span>; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y);</span><br><span class="line"> <span class="comment">// ReferenceError: Cannot access &#x27;y&#x27; before initialization </span></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">10</span>; </span><br></pre></td></tr></table></figure>
<ol start="3">
<li>避免全局污染<br>当 var 在全局作用域中声明时，它会成为 window 对象的属性，而 let 不会。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> globalVar = <span class="string">&quot;hello&quot;</span>; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">globalVar</span>); <span class="comment">// &quot;hello&quot;</span></span><br><span class="line"><span class="keyword">let</span> globalLet = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">globalLet</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>避免重复声明<br>var 允许在同一作用域内多次声明同一个变量，而 let 会报错。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>; </span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>; <span class="comment">// 允许</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">1</span>; </span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>; </span><br><span class="line"><span class="comment">// SyntaxError: Identifier &#x27;b&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>
<h2 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h2><p>只要是代码至少有一个作用域，写在函数内部的局部作用域，未写在任何函数内部即在全局作用域中；<br>如果函数中还有函数，那么在这个作用域中就又可以诞生一个作用域；<br>根据在**[内部函数可以访问外部函数变量]**的这种机制，用链式查找决定哪些数据能被内部函数访问，就称为作用域链。【就近原则】</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>( num );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">f2</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">456</span>;</span><br><span class="line"><span class="title function_">f1</span>();</span><br></pre></td></tr></table></figure>
<p><img src="https://i-blog.csdnimg.cn/direct/90cd966fb1314e36ba1e4133a4b1f688.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="string">&#x27;22&#x27;</span>;</span><br><span class="line">    <span class="title function_">fn2</span>();</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="number">3</span>;</span><br><span class="line">        <span class="title function_">fn3</span>();</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">fn3</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> a = <span class="number">4</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">//a的值 ?</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">//b的值 ?</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn1</span>();</span><br></pre></td></tr></table></figure>
<p><img src="https://i-blog.csdnimg.cn/direct/b3d9b9ed072e41cb8dd8b631fdbd187c.png" alt="在这里插入图片描述"></p>
<h2 id="堆栈"><a href="#堆栈" class="headerlink" title="堆栈"></a>堆栈</h2><ul>
<li>堆栈空间分配区别：<br>　　1、栈（操作系统）：由操作系统自动分配释放存放函数的参数值、局部变量的值等。其操作方式类似于数据结构中的栈；简单数据类型存放到栈里面<br>　　　　　　2、堆（操作系统）：存储复杂类型(对象)，一般由程序员分配释放，若程序员不释放，由垃圾回收机制回收。</li>
<li>简单数据类型的存储方式<br>    值类型变量的数据直接存放在变量（栈空间）中<br>  <img src="https://i-blog.csdnimg.cn/direct/10bba105428847618ad26b8337dd8a24.png" alt="在这里插入图片描述"></li>
<li>复杂数据类型的存储方式<br>    引用类型变量（栈空间）里存放的是地址，真正的对象实例存放在堆空间中<br>  <img src="https://i-blog.csdnimg.cn/direct/c94a0174d4cd4daeb24f52959ecb3a23.png" alt="在这里插入图片描述"></li>
<li>简单类型传参<br>  函数的形参也可以看做是一个变量，当我们把一个值类型变量作为参数传给函数的形参时，其实是把变量在栈空间里的值复制了一份给形参，那么在方法内部对形参做任何修改，都不会影响到的外部变量。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a</span>) &#123;</span><br><span class="line">    a++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="title function_">fn</span>(x);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x)；</span><br><span class="line"><span class="comment">//	运行结果如下：</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure>
<ul>
<li>复杂数据类型传参<br>  函数的形参也可以看做是一个变量，当我们把引用类型变量传给形参时，其实是把变量在栈空间里保存的堆地址复制给了形参，形参和实参其实保存的是同一个堆地址，所以操作的是同一个对象。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">x</span>) &#123; <span class="comment">// x = p</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">name</span>); <span class="comment">// 2. 这个输出什么 ?    </span></span><br><span class="line">    x.<span class="property">name</span> = <span class="string">&quot;张学友&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">name</span>); <span class="comment">// 3. 这个输出什么 ?    </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;刘德华&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>);    <span class="comment">// 1. 这个输出什么 ?   </span></span><br><span class="line"><span class="title function_">f1</span>(p);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>);    <span class="comment">// 4. 这个输出什么 ?  </span></span><br></pre></td></tr></table></figure>
<h1 id="预解析"><a href="#预解析" class="headerlink" title="预解析"></a>预解析</h1><p>JavaScript 代码是由浏览器中的 JavaScript 解析器来执行的。JavaScript 解析器在运行 JavaScript 代码的时候分为两步：预解析和代码执行。</p>
<ul>
<li>预解析：在当前作用域下, JS 代码执行之前，浏览器会默认把带有 var 和 function 声明的变量在内存中进行提前声明或者定义。</li>
<li>代码执行： 从上到下执行JS语句。<br><strong>预解析会把变量和函数的声明在代码执行之前执行完成。</strong></li>
<li>变量预解析<br>  预解析也叫做变量、函数提升。<br>  变量提升（变量预解析）： 变量的声明会被提升到当前作用域的最上面，变量的赋值不会提升。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);  <span class="comment">// 结果是多少？</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;      </span><br><span class="line"><span class="comment">//结果：undefined,变量提升只提升声明，不提升赋值</span></span><br></pre></td></tr></table></figure>
<ul>
<li>函数预解析<br>  函数提升： 函数的声明会被提升到当前作用域的最上面，但是不会调用函数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fn</span>();</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;打印&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：控制台打印字符串 — ”打印“<br>注意：函数声明代表函数整体，所以函数提升后，函数名代表整个函数，但是函数并没有被调用！	</p>
<ul>
<li>函数表达式声明函数问题<br>函数表达式创建函数，会执行变量提升，此时接收函数的变量名无法正确的调用：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fn</span>();</span><br><span class="line"><span class="keyword">var</span>  fn = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;想不到吧&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：报错提示 ”fn is not a function”<br>解释：该段代码执行之前，会做变量声明提升，fn在提升之后的值是undefined；而fn调用是在fn被赋值为函数体之前，此时fn的值是undefined，所以无法正确调用</p>
<h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(xx)&#123;</span><br><span class="line">...</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(xx)&#123;</span><br><span class="line">...</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//三元运算符</span></span><br><span class="line">condition?<span class="attr">ok_then</span>:no_then</span><br></pre></td></tr></table></figure>
<p>JavaScript把null、undefined、0、NaN和空字符串’’视为false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>()&#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="attr">label1</span>:</span><br><span class="line">		xxx</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="attr">label2</span>:</span><br><span class="line">		xxx</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="attr">default</span>:</span><br><span class="line">		xxx</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><ol>
<li>算数运算符<br>次方<code>**</code> </li>
<li>逻辑运算符<br>常用<code>&amp;&amp; ||  !</code></li>
<li>三目运算符<br>三元运算符<br><code>条件?真run：假run</code></li>
<li>比较运算符</li>
</ol>
<ul>
<li><code>===</code>对应<code>!==</code>，<br><strong>&#x3D;&#x3D;&#x3D;不会自动转换数据类型</strong>，如果数据类型不一致，返回false，如果一致，再比较。<br>undefined 和 null 与其自身严格相等</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res1 = (<span class="literal">null</span> === <span class="literal">null</span>)  <span class="comment">//true</span></span><br><span class="line"><span class="keyword">let</span> res2 = (<span class="literal">undefined</span> === <span class="literal">undefined</span>)  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>尽量不要使用&#x3D; &#x3D;比较，<strong>始终坚持使用&#x3D; &#x3D; &#x3D;比较</strong>。<br><code>==</code>做类型转换，再进行值的比较</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res1 = (<span class="literal">null</span> == <span class="literal">undefined</span> ); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">let</span> res2 = (<span class="literal">null</span>  === <span class="literal">undefined</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code> !=</code> 和 <code>!==</code>和<code>!===</code><br><code>!= </code>是非严格不等于，允许类型转换。<br><code>!== </code>是严格不等于，不允许类型转换。<br><code>!=== </code>是无效的运算符，不能使用。</li>
</ul>
<ol start="5">
<li>赋值运算符</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c+=<span class="number">5</span>;</span><br><span class="line">c++;</span><br></pre></td></tr></table></figure>
<p>1、11 + “12”+ 13 的结果是什么？ “111213”<br>2、true + false + 1 + “”的结果是什么？2<br>上述两个都会强行转换成数字类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="string">&quot;123.321test&quot;</span>));  <span class="comment">// 结果：123</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="string">&quot;123.321test&quot;</span>)); <span class="comment">// 结果：123.321</span></span><br><span class="line"><span class="comment">//parseInt 从字符串开头开始解析整数部分，遇到 .（小数点）后会停止解析。</span></span><br><span class="line"><span class="comment">//parseFloat 解析浮点数，包括小数部分，直到遇到非数值字符。</span></span><br></pre></td></tr></table></figure>
<h1 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h1><ul>
<li>for,while,do…while,</li>
<li>for…in 循环<br>for…in 循环用于遍历对象的可枚举属性，或者数组的索引。注意，for…in 遍历的是属性名（而非数组元素本身）。</li>
<li>for…of 循环<br>for…of 循环用于遍历可迭代对象（如数组、字符串、Set、Map等）的值。它遍历的是对象的值而非索引。</li>
<li>forEach() 方法+箭头函数<br>虽然不是传统的循环结构，forEach() 方法也可以用来遍历数组。它是数组对象的方法，适用于执行某个函数于每个数组元素上。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">100</span>;i++)&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> s=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;s.<span class="property">length</span>;j++)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(xx)&#123;&#125;</span><br><span class="line"><span class="keyword">do</span> &#123; ... &#125; <span class="keyword">while</span>()<span class="comment">//先执行一次 再判断</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>for…in 循环在对数组进行迭代时，确实会返回 数组的索引，这些索引是以 字符串 的形式存在的，而不是 数字。这其实是因为 JavaScript 中的 数组 是一种特殊的对象，数组的索引实际上是字符串类型的 属性名，而不是数字类型的下标。除非用Object.keys() , Object.values()采用for …of</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index);  <span class="comment">// 输出 &quot;0&quot;, &quot;1&quot;, &quot;2&quot;，这些索引是字符串</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">如果你只关心数组的 值，而不需要索引，使用 for...of 是更好的选择。for...of 返回的是数组中的 值，而不是索引。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);  <span class="comment">// 输出 10, 20, 30</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">如果你需要索引和值，使用 forEach() 也是一个不错的选择。它提供了一个函数，并且传递了数组的 索引 和 值。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>];</span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index, value);  <span class="comment">// 输出 &quot;0 10&quot;, &quot;1 20&quot;, &quot;2 30&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>forEach<br>它接收一个函数，每次迭代就自动回调该函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>];</span><br><span class="line">a.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">element, index, array</span>) &#123;</span><br><span class="line">    <span class="comment">// element: 指向当前元素的值</span></span><br><span class="line">    <span class="comment">// index: 指向当前索引</span></span><br><span class="line">    <span class="comment">// array: 指向Array对象本身</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(element + <span class="string">&#x27;, index = &#x27;</span> + index);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//Set与Array类似，但Set没有索引，因此回调函数的前两个参数都是元素本身</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Map的回调函数参数依次为value、key和map本身</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="number">1</span>, <span class="string">&#x27;x&#x27;</span>], [<span class="number">2</span>, <span class="string">&#x27;y&#x27;</span>], [<span class="number">3</span>, <span class="string">&#x27;z&#x27;</span>]]);</span><br><span class="line">m.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">value, key, map</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//JavaScript的函数调用不要求参数必须一致，因此可以忽略一些,只需要获得其中的某一个</span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>];</span><br><span class="line">a.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">element</span>) &#123;<span class="comment">//只获取element</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(element);<span class="comment">//输出 &quot;A&quot;, &quot;B&quot;, &quot;C&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line">a.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">element, index, array</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Element:&#x27;</span>, element);  <span class="comment">// 输出当前元素</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Index:&#x27;</span>, index);      <span class="comment">// 输出当前元素的索引</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Array:&#x27;</span>, array);      <span class="comment">// 输出整个数组</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>for…of 并不是专门用于对象的。它是用来遍历 可迭代对象（iterable objects）的，比如数组、字符串、Map、Set 等。除非Object.keys() , Object.values()</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 输出 1, 2, 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>object对象的遍历</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&#x27;Beijing&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// &#x27;name&#x27;, &#x27;age&#x27;, &#x27;city&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (o.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// &#x27;name&#x27;, &#x27;age&#x27;, &#x27;city&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;  <span class="comment">// 确保属性是对象自身的，而不是继承的</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key, obj[key]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line">keys.<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key, obj[key]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key, obj[key]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> values = <span class="title class_">Object</span>.<span class="title function_">values</span>(obj);</span><br><span class="line">values.<span class="title function_">forEach</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">values</span>(obj)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> entries = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj);</span><br><span class="line">entries.<span class="title function_">forEach</span>(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key, value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key, value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h1><p>直接对多个变量同时赋值。解构赋值还可以忽略某些元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>  [x, y, z] = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;JavaScript&#x27;</span>, <span class="string">&#x27;ES6&#x27;</span>];</span><br><span class="line"><span class="comment">/*如果数组本身还有嵌套，也可进行解构赋值，注意嵌套层次和位置要保持一致。*/</span></span><br><span class="line"><span class="keyword">let</span> [, , z] = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;JavaScript&#x27;</span>, <span class="string">&#x27;ES6&#x27;</span>]; <span class="comment">// 忽略前两个元素，只对z赋值第三个元素</span></span><br><span class="line">z; <span class="comment">// &#x27;ES6&#x27;</span></span><br></pre></td></tr></table></figure>
<p>如果需要从一个对象中取出若干属性，也可以使用解构赋值，便于快速获取对象的指定属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    <span class="attr">passport</span>: <span class="string">&#x27;G-12345678&#x27;</span>,</span><br><span class="line">    <span class="attr">school</span>: <span class="string">&#x27;No.4 middle school&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;name, age, passport&#125; = person;</span><br></pre></td></tr></table></figure>

<p>对一个对象进行解构赋值时，同时可直接对嵌套的对象属性进行赋值，只要保证对应的层次是一致的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    <span class="attr">passport</span>: <span class="string">&#x27;G-12345678&#x27;</span>,</span><br><span class="line">    <span class="attr">school</span>: <span class="string">&#x27;No.4 middle school&#x27;</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">        <span class="attr">city</span>: <span class="string">&#x27;Beijing&#x27;</span>,</span><br><span class="line">        <span class="attr">street</span>: <span class="string">&#x27;No.1 Road&#x27;</span>,</span><br><span class="line">        <span class="attr">zipcode</span>: <span class="string">&#x27;100001&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;name, <span class="attr">address</span>: &#123;city, zip&#125;&#125; = person;</span><br><span class="line">name; <span class="comment">// &#x27;小明&#x27;</span></span><br><span class="line">city; <span class="comment">// &#x27;Beijing&#x27;</span></span><br><span class="line">zip; <span class="comment">// undefined, 因为属性名是zipcode而不是zip</span></span><br><span class="line"><span class="comment">// 注意: address不是变量，而是为了让city和zip获得嵌套的address对象的属性:</span></span><br><span class="line">address; <span class="comment">// Uncaught ReferenceError: address is not defined</span></span><br></pre></td></tr></table></figure>
<p>使用解构赋值对对象属性进行赋值时，如果对应的属性不存在，变量将被赋值为undefined，这和引用一个不存在的属性获得undefined是一致的。</p>
<p>如果要使用的变量名和属性名不一致，可以用下面的语法获取</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    <span class="attr">passport</span>: <span class="string">&#x27;G-12345678&#x27;</span>,</span><br><span class="line">    <span class="attr">school</span>: <span class="string">&#x27;No.4 middle school&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把passport属性赋值给变量id:</span></span><br><span class="line"><span class="keyword">let</span> &#123;name, <span class="attr">passport</span>:id&#125; = person;</span><br><span class="line">name; <span class="comment">// &#x27;小明&#x27;</span></span><br><span class="line">id; <span class="comment">// &#x27;G-12345678&#x27;</span></span><br><span class="line"><span class="comment">// 注意: passport不是变量，而是为了让变量id获得passport属性:</span></span><br><span class="line">passport; <span class="comment">// Uncaught ReferenceError: passport is not defined</span></span><br></pre></td></tr></table></figure>
<p>解构赋值还可以使用默认值，这样就避免了不存在的属性返回undefined的问题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    <span class="attr">passport</span>: <span class="string">&#x27;G-12345678&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 如果person对象没有single属性，默认赋值为true:</span></span><br><span class="line"><span class="keyword">var</span> &#123;name, single=<span class="literal">true</span>&#125; = person;</span><br><span class="line">name; <span class="comment">// &#x27;小明&#x27;</span></span><br><span class="line">single; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>有些时候，如果变量已经被声明了，再次赋值的时候，正确的写法也会报语法错误</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明变量:</span></span><br><span class="line"><span class="keyword">var</span> x, y;</span><br><span class="line"><span class="comment">// 解构赋值:</span></span><br><span class="line">&#123;x, y&#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>, <span class="attr">x</span>: <span class="number">100</span>, <span class="attr">y</span>: <span class="number">200</span>&#125;;</span><br><span class="line"><span class="comment">// 语法错误: Uncaught SyntaxError: Unexpected token =</span></span><br></pre></td></tr></table></figure>
<p>这是因为JavaScript引擎把{开头的语句当作了块处理，于是&#x3D;不再合法。解决方法是用小括号括起来：<br>({x, y} &#x3D; { name: ‘小明’, x: 100, y: 200});</p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><p>函数作用域：全局作用域、局部作用域；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">func</span>(<span class="params">parameter</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> parameter;</span><br><span class="line"><span class="comment">//return 只能返回一个值，如果有多个则返回最后一个</span></span><br><span class="line"><span class="comment">//无返回时是undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> func=<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;<span class="keyword">return</span> a+b;&#125;</span><br><span class="line"><span class="keyword">var</span> r=<span class="title function_">func</span>(<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数形参实参个数匹配</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">getSum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(num1 + num2);</span><br><span class="line"><span class="comment">// 1. 如果实参的个数和形参的个数一致 则正常输出结果</span></span><br><span class="line">        <span class="title function_">getSum</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// 2. 如果实参的个数多于形参的个数  会取到形参的个数 </span></span><br><span class="line">        <span class="title function_">getSum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// 3. 如果实参的个数小于形参的个数  多于的形参定义为undefined  最终的结果就是 NaN</span></span><br><span class="line"><span class="comment">// 形参可以看做是不用声明的变量  num2 是一个变量但是没有接受值  结果就是undefined </span></span><br><span class="line">        <span class="title function_">getSum</span>(<span class="number">1</span>); <span class="comment">// NaN</span></span><br><span class="line"><span class="comment">// 建议 我们尽量让实参的个数和形参相匹配</span></span><br></pre></td></tr></table></figure>
<ul>
<li>全局污染<br>引入的js文件中存在名字相同的情况，只会选择其一，后覆盖前。<br><code>window.a=a; //全局挂载</code></li>
</ul>
<h1 id="对象object"><a href="#对象object" class="headerlink" title="对象object"></a>对象object</h1><p>只要是类似集合的数据类型，都可以用for、map 、foreach、for…in来遍历。</p>
<ul>
<li>JavaScript的对象是一组由键-值组成的无序集合，键都是字符串类型，值可以是任意数据类型。</li>
<li>在 JavaScript 中，原型（prototype）是一个对象，它是另一个对象的继承来源。每个 JavaScript 对象都有一个内部属性 [[Prototype]]（通常可以通过 <code>__proto__ </code>或 <code>Object.getPrototypeOf(obj)</code> 来访问）。这个属性指向了该对象的原型。Object.prototype 是所有对象的原型链的终点，也就是说，所有对象最终都会继承自 Object.prototype，并且可以访问它上面定义的属性和方法。Object.prototype 是所有对象的原型，几乎所有的 JavaScript 对象都可以访问到 Object.prototype 上的方法。例如，toString()、hasOwnProperty()、valueOf() 等方法都定义在 Object.prototype 上。</li>
<li>原型链（Prototype Chain）<br>JavaScript 对象的原型链是由多个对象组成的链式结构。当你访问一个对象的属性时，JavaScript 会首先查找该对象自身是否具有这个属性。如果没有找到，它会继续查找该对象的原型，直到查找到 Object.prototype 为止。如果在 Object.prototype 也没有找到，那么会返回 undefined。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;<span class="comment">//注意只能用var申明一次</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;web&#x27;</span>, <span class="string">&#x27;mobile&#x27;</span>],</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&#x27;Beijing&#x27;</span>,</span><br><span class="line">    <span class="attr">hasCar</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">zipcode</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">habit</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">alert</span>(<span class="string">&#x27;habit&#x27;</span>) <span class="keyword">return</span><span class="string">&#x27;ok&#x27;</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 利用构造函数创建对象</span></span><br><span class="line">        <span class="comment">// 我们需要创建四大天王的对象  相同的属性： 名字 年龄 性别  相同的方法： 唱歌</span></span><br><span class="line">        <span class="comment">// 构造函数的语法格式</span></span><br><span class="line">        <span class="comment">// function 构造函数名() &#123;</span></span><br><span class="line">        <span class="comment">//     this.属性 = 值;</span></span><br><span class="line">        <span class="comment">//     this.方法 = function() &#123;&#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// new 构造函数名();</span></span><br><span class="line">        </span><br><span class="line"> <span class="comment">// 1. 构造函数名字首字母要大写</span></span><br><span class="line"><span class="comment">// 2. 我们构造函数不需要return 就可以返回结果</span></span><br><span class="line"><span class="comment">// 3. 我们调用构造函数 必须使用 new</span></span><br><span class="line"> <span class="comment">// 4. 我们只要new Star() 调用函数就创建一个对象</span></span><br><span class="line"><span class="comment">// 5. 我们的属性和方法前面必须添加 this</span></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params">uname, age, sex</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">name</span> = uname;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">sing</span> = <span class="keyword">function</span>(<span class="params">sang</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(sang);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> ldh = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;刘德华&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;男&#x27;</span>); <span class="comment">// 调用函数返回的是一个对象</span></span><br><span class="line">        <span class="comment">// console.log(typeof ldh);</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh.<span class="property">name</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(ldh[<span class="string">&#x27;sex&#x27;</span>]);</span><br><span class="line">        ldh.<span class="title function_">sing</span>(<span class="string">&#x27;冰雨&#x27;</span>);</span><br><span class="line">        <span class="keyword">var</span> zxy = <span class="keyword">new</span> <span class="title class_">Star</span>(<span class="string">&#x27;张学友&#x27;</span>, <span class="number">19</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(zxy.<span class="property">name</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(zxy.<span class="property">age</span>);</span><br><span class="line">        zxy.<span class="title function_">sing</span>(<span class="string">&#x27;李香兰&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>最后一个键值对不需要在末尾加逗号，如果加了，有的浏览器（如低版本的IE）将报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//object+类数组</span></span><br><span class="line"><span class="keyword">delete</span> object.<span class="property">p</span> <span class="comment">//删除对象属性或数组元素，不能删除变量、函数、常量，但不会更新length</span></span><br><span class="line"><span class="comment">//删除数组元素会留下一个“空洞”，即该位置的值为 undefined。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> xiaoming.<span class="property">age</span>; <span class="comment">// 删除age属性</span></span><br><span class="line"><span class="keyword">delete</span> xiaoming.<span class="property">school</span>; <span class="comment">// 删除一个不存在的school属性也不会报错</span></span><br><span class="line"><span class="comment">//要检测xiaoming是否拥有某属性，可以用in操作符</span></span><br><span class="line"><span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> xiaoming; <span class="comment">// true</span></span><br><span class="line"><span class="string">&#x27;grade&#x27;</span> <span class="keyword">in</span> xiaoming; <span class="comment">// false</span></span><br><span class="line"><span class="comment">//如果in判断一个属性存在，这个属性不一定是xiaoming的，它可能是xiaoming继承得到的</span></span><br><span class="line"><span class="comment">//要判断一个属性是否是xiaoming自身拥有的，而不是继承得到的，可以用hasOwnProperty()方法</span></span><br><span class="line">xiaoming.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// true</span></span><br><span class="line">xiaoming.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;toString&#x27;</span>); <span class="comment">// false</span></span><br><span class="line">xiaoming.<span class="title function_">isPrototypeOf</span>(obj)<span class="comment">//检查当前对象是否是另一个对象的原型。</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span><span class="comment">//是所有对象都继承的原型对象，是所有对象的最顶层原型。</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = value </span><br><span class="line"><span class="comment">//这种写法是将一个新的属性 name 添加到 所有对象 的原型链上，意味着所有的 JavaScript 对象都将能够访问到这个属性。</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">所有通过字面量（如 let obj=&#123;&#125;）或者构造函数（如 new Object()）创建的对象，</span></span><br><span class="line"><span class="comment">都会继承 Object.prototype 上的方法和属性。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)<span class="comment">//返回对象的所有属性名（键）组成的数组。</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">values</span>(obj)<span class="comment">//返回对象的所有属性值组成的数组。</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)<span class="comment">//返回对象的所有属性键值对组成的二维数组。</span></span><br><span class="line"><span class="comment">//返回一个包含对象自身所有可枚举属性 [key, value] 对的二维数组。将对象转换为能通过数组迭代的格式，方便遍历。</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, source)<span class="comment">//将 source对象的所有可枚举属性复制到 target 对象。</span></span><br><span class="line"><span class="comment">//复制一个对象、合并参数，原则：后覆盖前 是浅拷贝</span></span><br><span class="line"><span class="keyword">let</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> source1 = &#123; <span class="attr">b</span>: <span class="number">3</span>, <span class="attr">c</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> source2 = &#123; <span class="attr">d</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> 新的对象 = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, target, source1, source2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(新的对象); <span class="comment">// &#123; a: 1, b: 3, c: 4, d: 5 &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(target); <span class="comment">// &#123; a: 1, b: 2 &#125; -- 原目标对象没有被改变</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(obj)<span class="comment">//冻结对象，防止后续修改对象的属性。</span></span><br><span class="line">object.<span class="title function_">push</span>()</span><br><span class="line">object.<span class="title function_">pop</span>()</span><br><span class="line">object.<span class="title function_">appendChild</span>()</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;a&#x27;</span>)<span class="comment">//用来比较两个值是否相等</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;keys, values, entries&#125; = <span class="title class_">Object</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> <span class="title function_">keys</span>(json))&#123; <span class="comment">//</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> value <span class="keyword">of</span> <span class="title function_">values</span>(json))&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> <span class="title function_">entries</span>(json))&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key, val] <span class="keyword">of</span> <span class="title function_">entries</span>(json))&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(key, val);</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(k); <span class="comment">// k 变量 输出  得到的是 属性名</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(obj[k]); <span class="comment">// obj[k] 得到是 属性值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6特性</span></span><br><span class="line"><span class="keyword">let</span> json =&#123;<span class="comment">//简化</span></span><br><span class="line">            name,   <span class="comment">//name:name,</span></span><br><span class="line">            age ,    <span class="comment">//age:age</span></span><br><span class="line">          </span><br><span class="line">          <span class="comment">/* showA:function()&#123;</span></span><br><span class="line"><span class="comment">                return this.name;</span></span><br><span class="line"><span class="comment">            &#125; */</span></span><br><span class="line">            <span class="title function_">showA</span>(<span class="params"></span>)&#123;<span class="comment">//不要用箭头函数</span></span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&#x27;121yyy32.9079478&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(str)); <span class="comment">//12132</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(str));<span class="comment">//type:number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Number</span>(str));<span class="comment">//NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(str));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">toString</span>());</span><br><span class="line"><span class="title class_">String</span>(str)</span><br><span class="line"></span><br><span class="line"><span class="comment">//隐式转换</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;&quot;</span>+num);<span class="comment">//==&quot;&quot;.concat(num);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//保留小数位数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="title function_">toFixed</span>(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uri=<span class="string">&quot;http://.....html?name=zhangsan&quot;</span>;</span><br><span class="line"><span class="comment">//uri编码</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">encodeURI</span>(uri))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">encodeURIComponent</span>(uri))<span class="comment">//完全解析 ? =都解析出来</span></span><br><span class="line"><span class="comment">//uri解码</span></span><br><span class="line"><span class="built_in">decodeURI</span>()</span><br><span class="line"><span class="built_in">decodeURIComponent</span>()</span><br></pre></td></tr></table></figure>

<h1 id="iterable"><a href="#iterable" class="headerlink" title="iterable"></a>iterable</h1><p>Array、Map和Set都属于iterable类型<br>具有iterable类型的集合可以通过新的for … of，for … in循环，它遍历的实际上是对象的属性名称。一个Array数组实际上也是一个对象，它的每个元素的索引被视为一个属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>...<span class="keyword">in</span>... 与 <span class="keyword">for</span>...<span class="keyword">of</span>...的区别：</span><br><span class="line"><span class="keyword">for</span> ... <span class="keyword">in</span>循环 将把name包括在内，但<span class="title class_">Array</span>的length属性却不包括在内</span><br><span class="line"><span class="keyword">for</span> ... <span class="keyword">of</span>循环 则完全修复了这些问题，它只循环集合本身的元素</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>];</span><br><span class="line">a.<span class="property">name</span> = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> a) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Map：一组键值对，极快的查找速度</span></span><br><span class="line"><span class="comment">//一个key只能对应一个value，所以多次对一个key放入value，后面的值会把前面的值冲掉</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// 空Map</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="string">&#x27;Michael&#x27;</span>, <span class="number">95</span>], [<span class="string">&#x27;Bob&#x27;</span>, <span class="number">75</span>], [<span class="string">&#x27;Tracy&#x27;</span>, <span class="number">85</span>]]);</span><br><span class="line">m.<span class="title function_">get</span>(<span class="string">&#x27;Michael&#x27;</span>); <span class="comment">// 95</span></span><br><span class="line">m.<span class="title function_">get</span>(<span class="string">&#x27;Adam&#x27;</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&#x27;Adam&#x27;</span>, <span class="number">67</span>); <span class="comment">// 添加新的key-value</span></span><br><span class="line">m.<span class="title function_">set</span>(<span class="string">&#x27;Bob&#x27;</span>, <span class="number">59</span>);</span><br><span class="line"></span><br><span class="line">m.<span class="title function_">has</span>(<span class="string">&#x27;Adam&#x27;</span>); <span class="comment">// 是否存在key &#x27;Adam&#x27;: true</span></span><br><span class="line">m.<span class="title function_">delete</span>(<span class="string">&#x27;Adam&#x27;</span>); <span class="comment">// 删除key &#x27;Adam&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//set集合</span></span><br><span class="line"><span class="comment">//Set也是一组key的集合，但不存储value。</span></span><br><span class="line"><span class="comment">//由于key不能重复，所以在Set中，没有重复的key，重复元素在Set中自动被过滤</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> <span class="title class_">Set</span>(); <span class="comment">// 空Set</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 含1, 2, 3</span></span><br><span class="line">s.<span class="title function_">add</span>(key);</span><br><span class="line">s.<span class="title function_">delete</span>(key);</span><br></pre></td></tr></table></figure>



<h1 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h1><blockquote>
<p>throw语句用来抛出一个用户自定义的异常。当前函数的执行将被停止（throw之后的语句将不会执行），并且控制将被传递到调用堆栈中的第一个catch块。如果调用者函数中没有catch块，程序将会终止。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getRectArea</span>(<span class="params">width, height</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">isNaN</span>(width) || <span class="built_in">isNaN</span>(height)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;Parameter is not a number!&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="title function_">getRectArea</span>(<span class="number">3</span>, <span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">  <span class="comment">// expected output: &quot;Parameter is not a number!&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>try {<br>tryCode - 尝试执行代码块<br>}<br>catch(err) {<br>catchCode - 捕获错误的代码块<br>}<br>finally {<br>finallyCode - 无论 try &#x2F; catch 结果如何都会执行的代码块<br>}</p>
</blockquote>
<h1 id="内置方法"><a href="#内置方法" class="headerlink" title="内置方法"></a>内置方法</h1><ul>
<li>查找文档：学习一个内置对象的使用，只要学会其常用成员的使用即可，我们可以通过查文档学习，可以通过MDN&#x2F;W3C来查询。<br>Mozilla 开发者网络（MDN）提供了有关开放网络技术（Open Web）的信息，包括 HTML、CSS 和万维网及 HTML5 应用的 API。<br>MDN:<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></li>
<li><pre><code>js 会把基本数据类型包装为复杂数据类型，其执行过程如下 ：
</code></pre>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 生成临时变量，把简单类型包装为复杂数据类型</span></span><br><span class="line"><span class="keyword">var</span> temp = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;andy&#x27;</span>);</span><br><span class="line"><span class="comment">// 2. 赋值给我们声明的字符变量</span></span><br><span class="line">str = temp;</span><br><span class="line"><span class="comment">// 3. 销毁临时变量</span></span><br><span class="line">temp = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<h2 id="数学对象Math"><a href="#数学对象Math" class="headerlink" title="数学对象Math"></a>数学对象Math</h2><table>
<thead>
<tr>
<th>属性、方法名</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>Math.PI</td>
<td>圆周率</td>
</tr>
<tr>
<td>Math.floor()</td>
<td>向下取整</td>
</tr>
<tr>
<td>Math.ceil()</td>
<td>向上取整</td>
</tr>
<tr>
<td>Math.round()</td>
<td>四舍五入版 就近取整   注意 -3.5   结果是  -3</td>
</tr>
<tr>
<td>Math.abs()</td>
<td>绝对值</td>
</tr>
<tr>
<td>Math.max()&#x2F;Math.min()</td>
<td>求最大和最小值</td>
</tr>
<tr>
<td>Math.random()</td>
<td>获取范围在[0,1)内的随机值</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取指定范围内的随机整数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getRandom</span>(<span class="params">min, max</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min + <span class="number">1</span>)) + min; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">E</span> <span class="comment">//e</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">LN10</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">LN2</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">LOG2E</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">PI</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">SQRT2</span> <span class="comment">//根号2</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">SQRT1_2</span> <span class="comment">//0.5的平方根</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>()</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">min</span>()</span><br><span class="line"><span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="literal">null</span>,arr);</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">ceil</span>(num)</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">floor</span>(num)</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">round</span>(num)</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">random</span>() <span class="comment">//0&lt;=random&lt;1</span></span><br><span class="line"><span class="title function_">random</span>(<span class="number">0</span>,<span class="number">36</span>)<span class="comment">//0~36随机</span></span><br></pre></td></tr></table></figure>
<h2 id="日期对象date"><a href="#日期对象date" class="headerlink" title="日期对象date"></a>日期对象date</h2><p>Date 对象和 Math 对象不一样，Date是一个构造函数，所以使用时需要实例化后才能使用其中具体方法和属性。<br>注意：如果创建实例时并未传入参数，则得到的日期对象是当前时间对应的日期对象<br><img src="https://i-blog.csdnimg.cn/direct/a845dd86e16c4afb844d9d234e53806d.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();<span class="comment">//获取系统当前时间；</span></span><br><span class="line"><span class="keyword">let</span> date=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;1949-10-01&#x27;</span>)<span class="comment">//指定时间</span></span><br><span class="line"><span class="keyword">var</span> oneday = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;December 25,1995 13:30:00&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> oneday2=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1995</span>,<span class="number">11</span>,<span class="number">25</span>);</span><br><span class="line"><span class="keyword">var</span> oneday3=<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1995</span>,<span class="number">11</span>,<span class="number">25</span>,<span class="number">14</span>,<span class="number">30</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> future = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2019/5/1&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getDate</span>());<span class="comment">//获取月份的第几天1～31</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getMonth</span>());<span class="comment">//获取月份0～11</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getFullYear</span>());<span class="comment">//获取年份</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getDay</span>());<span class="comment">//获取一星期中第几天0～6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getHours</span>());<span class="comment">//获取小时0～23</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getMinutes</span>());<span class="comment">//获取分钟0～59</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getSeconds</span>());<span class="comment">//获取秒数0～59</span></span><br><span class="line">now.<span class="title function_">getMilliseconds</span>(); <span class="comment">// 毫秒数</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Date</span>.<span class="title function_">parse</span>()<span class="comment">//传入的字符串使用实际月份01~12，转换为Date对象后getMonth()获取的月份值为0~11</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">toDateString</span>());<span class="comment">//星期几 月 日 年</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">toTimeString</span>());<span class="comment">//时 分 秒 时区</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//常用</span></span><br><span class="line">now.<span class="title function_">toLocaleDateString</span>()</span><br><span class="line">now.<span class="title function_">toLocaleTimeString</span>()</span><br><span class="line">now.<span class="title function_">toLocaleString</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//时间戳 1970年头到现在的毫秒数</span></span><br><span class="line"><span class="comment">//获取总毫秒数 3种方法</span></span><br><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();<span class="comment">//获取系统当前时间；</span></span><br><span class="line"></span><br><span class="line">now.<span class="title function_">getTime</span>(); <span class="comment">// [1] 1435146562875, 以number形式表示的时间戳</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="keyword">new</span> <span class="title class_">Date</span>())<span class="comment">//[2]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();<span class="comment">//[3] HTML5中提供的方法，有兼容性问题</span></span><br><span class="line"><span class="comment">//无需实例化 但是只能得到当前的时间戳， 而前面两种可以返回指定时间的时间戳</span></span><br><span class="line"></span><br><span class="line">date.<span class="title function_">valueOf</span>() <span class="comment">//[4]</span></span><br></pre></td></tr></table></figure>
<h2 id="数组对象array"><a href="#数组对象array" class="headerlink" title="数组对象array"></a>数组对象array</h2><p>array属于对象object.JavaScript的数组类似于python中的list。也是可以嵌套的。可包括任意数据类型。</p>
<ul>
<li>检测是否为数组<br>instanceof 运算符：instanceof 可以判断一个对象是否是某个构造函数的实例</li>
</ul>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">23</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr <span class="keyword">instanceof</span> <span class="title class_">Array</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj <span class="keyword">instanceof</span> <span class="title class_">Array</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>Array.isArray()用于判断一个对象是否为数组，isArray() 是 HTML5 中提供的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">23</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr));   <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj));   <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i-blog.csdnimg.cn/direct/52d8146f1c58485287bb45f30d012e1a.png" alt="在这里插入图片描述"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=[]</span><br><span class="line"></span><br><span class="line">a.<span class="property">length</span></span><br><span class="line"><span class="comment">//直接给Array的length赋一个新的值会导致Array大小的变化(索引超过范围也可)。</span></span><br><span class="line">arr.<span class="property">length</span> = <span class="number">6</span>;</span><br><span class="line">arr; <span class="comment">// arr变为[1, 2, 3, undefined, undefined, undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">isArray</span>(list) </span><br><span class="line"></span><br><span class="line">a.<span class="title function_">toString</span>()<span class="comment">//元素连成一串，逗号分隔</span></span><br><span class="line"><span class="comment">//join()把当前Array的每个元素都用指定的字符串连接起来并返回</span></span><br><span class="line"><span class="comment">//join默认分隔符拼接用&#x27;,&#x27;</span></span><br><span class="line"><span class="comment">//如果Array的元素不是字符串，将自动转换为字符串后再连接</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>); <span class="comment">// &#x27;A-B-C-1-2-3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//栈 push pop</span></span><br><span class="line">a.<span class="title function_">push</span>(<span class="string">&#x27;a&#x27;</span>)<span class="comment">//向Array的末尾添加若干元素</span></span><br><span class="line">a.<span class="title function_">pop</span>()<span class="comment">//把Array的最后一个元素删除掉</span></span><br><span class="line"><span class="comment">//队列 shift unshift</span></span><br><span class="line">a.<span class="title function_">unshift</span>(<span class="string">&#x27;a&#x27;</span>)<span class="comment">//往Array的头部添加若干元素</span></span><br><span class="line">a.<span class="title function_">shift</span>(<span class="string">&#x27;a&#x27;</span>)<span class="comment">//把Array的第一个元素删掉.</span></span><br><span class="line"></span><br><span class="line">a.<span class="title function_">reverse</span>();<span class="comment">//把整个Array的元素给反转</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">compare</span>(<span class="params">a,b</span>)&#123;<span class="comment">//反着写可以实现降序 等价于return b-a;</span></span><br><span class="line">	<span class="keyword">if</span>(a&lt;b)<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (a&gt;b)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="comment">//等价于 return a-b</span></span><br><span class="line">&#125;</span><br><span class="line">a.<span class="title function_">sort</span>(compare);<span class="comment">//把所有元素先转换为String再排序，返回结果直接修改a</span></span><br><span class="line"><span class="comment">//字符串根据ASCII码进行排序，而小写字母a的ASCII码在大写字母之后.</span></span><br><span class="line"></span><br><span class="line">a.<span class="title function_">indexOf</span>(<span class="string">&#x27;c&#x27;</span>)<span class="comment">//搜索一个指定的元素的位置。没找到返回-1</span></span><br><span class="line"><span class="comment">//lastIndexOf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//当前的Array和另一个Array连接起来，并返回一个新的Array</span></span><br><span class="line"><span class="comment">//并没有修改当前Array，而是返回了一个新的Array</span></span><br><span class="line"><span class="comment">//可以接收任意个元素的Array，并且自动把Array包含的括号拆掉，然后全部添加到新的Array里</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>];</span><br><span class="line">arr.<span class="title function_">concat</span>(<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, 1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">let</span> result = [...arr1, ...arr2];  <span class="comment">// 使用扩展运算符追加数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);  <span class="comment">// 输出: [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//slice()就是对应String的substring()版本 前闭后开</span></span><br><span class="line"><span class="comment">//它截取Array的部分元素，然后返回一个新的Array。</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;G&#x27;</span>];</span><br><span class="line">arr.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">3</span>); <span class="comment">// 从索引0开始，到索引3结束，但不包括索引3: [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]</span></span><br><span class="line">arr.<span class="title function_">slice</span>(<span class="number">3</span>); <span class="comment">// 从索引3开始到结束: [&#x27;D&#x27;, &#x27;E&#x27;, &#x27;F&#x27;, &#x27;G&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//splice万能方法:删除、插入、替换</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">index 必需。整数，规定添加/删除项目的位置，使用负数可从数组结尾处规定位置（从1开始）。</span></span><br><span class="line"><span class="comment">howmany必需。要删除的项目数量。如果设置为 0，则不会删除项目。</span></span><br><span class="line"><span class="comment">item1, …, itemX —— 可选。向数组添加的新项目。</span></span><br><span class="line"><span class="comment">1.当不添加只删除时，没有可选参数，则（删除开始索引，删除个数）</span></span><br><span class="line"><span class="comment">2.当不删除只添加时，（添加开始索引，删除个数=0，items...）</span></span><br><span class="line"><span class="comment">3.删除且添加，（删除且添加的开始索引，删除个数，items...）</span></span><br><span class="line"><span class="comment">4.当删除个数等于添加个数时 实现替换功能</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;Microsoft&#x27;</span>, <span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Yahoo&#x27;</span>, <span class="string">&#x27;AOL&#x27;</span>, <span class="string">&#x27;Excite&#x27;</span>, <span class="string">&#x27;Oracle&#x27;</span>];</span><br><span class="line"><span class="comment">// 从索引2开始删除3个元素,然后再添加两个元素:</span></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Facebook&#x27;</span>); <span class="comment">// 返回删除的元素 [&#x27;Yahoo&#x27;, &#x27;AOL&#x27;, &#x27;Excite&#x27;]</span></span><br><span class="line">arr; <span class="comment">// [&#x27;Microsoft&#x27;, &#x27;Apple&#x27;, &#x27;Google&#x27;, &#x27;Facebook&#x27;, &#x27;Oracle&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只删除,不添加:</span></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// [&#x27;Google&#x27;, &#x27;Facebook&#x27;]</span></span><br><span class="line">arr; <span class="comment">// [&#x27;Microsoft&#x27;, &#x27;Apple&#x27;, &#x27;Oracle&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 只添加,不删除:</span></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Facebook&#x27;</span>); <span class="comment">// 返回[],因为没有删除任何元素</span></span><br><span class="line">arr; <span class="comment">// [&#x27;Microsoft&#x27;, &#x27;Apple&#x27;, &#x27;Google&#x27;, &#x27;Facebook&#x27;, &#x27;Oracle&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//替换</span></span><br><span class="line">arr.<span class="title function_">splice</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//查找 如果查不到返回-1</span></span><br><span class="line">arr.<span class="title function_">indexOf</span>(<span class="string">&#x27;a&#x27;</span>,<span class="number">2</span>)<span class="comment">//从下标2开始会搜索指定字符串出现的位置：</span></span><br><span class="line">arr.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;a&#x27;</span>,<span class="number">2</span>)<span class="comment">//从下标2开始从后往前查找出现的位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//过滤 filter</span></span><br><span class="line"><span class="keyword">var</span> r = arr.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">element, index, self</span>) &#123;...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result=arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">item,index,array</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> item&gt;<span class="number">10</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;  &#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> r = arr.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> s &amp;&amp; s.<span class="title function_">trim</span>(); <span class="comment">// 注意：IE9以下的版本没有trim()方法</span></span><br><span class="line">    <span class="comment">//trim()去除字符串两边的空白</span></span><br><span class="line">&#125;);</span><br><span class="line">r; <span class="comment">// [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]</span></span><br><span class="line"></span><br><span class="line">mapresult.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item,index</span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//arr.map()在JavaScript的Array中,得到新的Array作为结果,把Array的所有数字转为字符串</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line">arr.<span class="title function_">map</span>(<span class="title class_">String</span>); <span class="comment">// [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;, &#x27;5&#x27;, &#x27;6&#x27;, &#x27;7&#x27;, &#x27;8&#x27;, &#x27;9&#x27;]</span></span><br><span class="line">r=[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>].<span class="title function_">map</span>(<span class="function"><span class="params">str</span> =&gt;</span> <span class="built_in">parseInt</span>(str));</span><br><span class="line"><span class="keyword">var</span> mapresult=arr.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">item,index,array</span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> item*<span class="number">2</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">arr.reduce(function(prev,cur,index,arr)&#123;</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">&#125;, init);</span></span><br><span class="line"><span class="comment">arr ：原数组；</span></span><br><span class="line"><span class="comment">prev ：上一次调用回调时的返回值，或者初始值 init;</span></span><br><span class="line"><span class="comment">cur ： 当前正在处理的数组元素；</span></span><br><span class="line"><span class="comment">index ：当前正在处理的数组元素的索引，若提供 init 值，则索引为0，否则索引为1；</span></span><br><span class="line"><span class="comment">init ：初始值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//reduce()从左到右累加数据，直到最后为一个值（也就是最终的结果）</span></span><br><span class="line">[x1, x2, x3, x4].<span class="title function_">reduce</span>(f) = <span class="title function_">f</span>(<span class="title function_">f</span>(<span class="title function_">f</span>(x1, x2), x3), x4)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>return s &amp;&amp; s.trim()意思是<br>if (s) return s.trim();<br>else return s;</p>
</blockquote>
<p>&#x3D;&#x3D;多维数组&#x3D;&#x3D;<br>如果数组的某个元素又是一个Array，则可以形成多维数组<br>var arr &#x3D; [[1, 2, 3], [400, 500, 600], ‘-‘];</p>
<table>
<thead>
<tr>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody><tr>
<td>400</td>
<td>500</td>
<td>600</td>
</tr>
<tr>
<td>-</td>
<td>undefined</td>
<td>undefined</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//array</span></span><br><span class="line">arrayObject.<span class="title function_">splice</span>(index,howmany,item1,.....,itemX)</span><br><span class="line"><span class="comment">//数组中添加或删除项目，然后返回被删除的项目。该方法会改变原始数组。</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">可删除从 index 处开始的零个或多个元素，并且用参数列表中声明的一个或多个值来替换那些被删除的元素。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">参数	描述</span></span><br><span class="line"><span class="comment">index	必需。整数，规定添加/删除项目的位置，使用负数可从数组结尾处规定位置。</span></span><br><span class="line"><span class="comment">howmany	必需。要删除的项目数量。如果设置为 0，则不会删除项目。</span></span><br><span class="line"><span class="comment">item1, ..., itemX	可选。向数组添加的新项目。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">返回值 被删除的项目，如果没有删除元素，就返回一个空数组。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property">from</span>: 把类数组(获取一组元素、<span class="variable language_">arguments</span>...) 对象转成数组，具备length就可以转换</span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>(): 把一组值，转成数组</span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="string">&#x27;apple&#x27;</span>,<span class="string">&#x27;banana&#x27;</span>,<span class="string">&#x27;orange&#x27;</span>);</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">sort</span>();</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">entries</span>() <span class="comment">//返回的是一个包含数组元素索引和对应值的迭代器（Iterator）。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//arr.map() 是数组专有的循环 非常有用，做数据交互映射，配合return，返回一个新数组</span></span><br><span class="line"><span class="comment">//没有return时==foreach</span></span><br><span class="line"><span class="keyword">let</span> newArr = arr.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index, arr</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> json=&#123;&#125;;</span><br><span class="line">    json.<span class="property">t</span> = <span class="string">`^_^<span class="subst">$&#123;item.title&#125;</span>-----`</span>;<span class="comment">//将title内容增加了符号</span></span><br><span class="line">    json.<span class="property">r</span> = item.<span class="property">read</span>+<span class="number">200</span>;<span class="comment">//变更了read人数</span></span><br><span class="line">    json.<span class="property">hot</span> = item.<span class="property">hot</span> == <span class="literal">true</span> &amp;&amp; <span class="string">&#x27;真棒!!!&#x27;</span>;<span class="comment">//将true显示为其他内容</span></span><br><span class="line">    <span class="keyword">return</span> json;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//arr.filter() 过滤不合格 返回true 留下来</span></span><br><span class="line"><span class="keyword">let</span> newArr = arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">item, index, arr</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item.<span class="property">hot</span>==<span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//arr.some() 类似查找  数组里有某元素符合条件返回true</span></span><br><span class="line"><span class="comment">//arr.every() 数组里所有元素满足条件返回true</span></span><br><span class="line"><span class="keyword">let</span> b = arr.<span class="title function_">some</span>(<span class="function">(<span class="params">val, index, arr</span>) =&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> val==<span class="string">&#x27;banana2&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> b = arr.<span class="title function_">every</span>(<span class="function">(<span class="params">val, index, arr</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> val%<span class="number">2</span>==<span class="number">1</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">reduce</span>()  <span class="comment">//用来对数组中的所有元素进行累积计算，最终得到一个单一的结果(值/数组/类数组)。</span></span><br><span class="line">arr.<span class="title function_">reduceRight</span>()</span><br><span class="line"><span class="comment">//比如：求数组的和、阶乘</span></span><br><span class="line"><span class="keyword">const</span> sum = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> accumulator + currentValue;</span><br><span class="line">&#125;, <span class="number">0</span>); <span class="comment">// 初始值是 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//找最大值</span></span><br><span class="line"><span class="keyword">const</span> max = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> accumulator &gt; currentValue ? accumulator : currentValue;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">arr.reduce(callback(accumulator, currentValue[, index, array]), initialValue);</span></span><br><span class="line"><span class="comment">accumulator：保存结果的容器累积器，保存上次函数调用的返回值，或者是初始化的 initialValue。</span></span><br><span class="line"><span class="comment">currentValue：当前正在处理的数组元素。</span></span><br><span class="line"><span class="comment">index（可选）：当前元素的索引。</span></span><br><span class="line"><span class="comment">array（可选）：原数组。</span></span><br><span class="line"><span class="comment">initialValue（可选）：累积器的初始值。</span></span><br><span class="line"><span class="comment">如果没有提供，则数组的第一个元素会被用作初始值，第二个元素会作为 currentValue 开始迭代。</span></span><br><span class="line"><span class="comment">如果数组为空，且没有提供 initialValue，reduce() 会抛出错误。如果提供了 initialValue，则直接返回它。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">find</span>()<span class="comment">//查找，找出第一个符合条件的数组成员，如果没有找到，返回undefined</span></span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">find</span>(<span class="function">(<span class="params">val, index, arr</span>) =&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> val&gt;<span class="number">1000</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">findIndex</span>()<span class="comment">// 找的是位置， 没找到返回-1</span></span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">fill</span>(填充的东西, 开始位置, 结束位置);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="字符串对象"><a href="#字符串对象" class="headerlink" title="字符串对象"></a>字符串对象</h2><ul>
<li>字符串的不可变<br>指的是里面的值不可变，虽然看上去可以改变内容，但其实是地址变了，内存中新开辟了一个内存空间。<br>当重新给字符串变量赋值的时候，变量之前保存的字符串不会被修改，依然在内存中重新给字符串赋值，会重新在内存中开辟空间，这个特点就是字符串的不可变。<br>由于字符串的不可变，在<strong>大量拼接字符串</strong>的时候会有效率问题<br>字符串是不可变的，如果对字符串的某个索引赋值，不会有任何错误，但是也没有任何效果。<blockquote>
<p>到底可变不可变？重新赋值整个字符串-&gt;可变，单独修改其中字符-&gt;不可变</p>
</blockquote>
</li>
</ul>
<p>JavaScript为字符串提供了一些常用方法，注意，调用这些方法本身不会改变原有字符串的内容，而是<strong>返回一个新字符串</strong>。</p>
<ul>
<li>转义字符</li>
</ul>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\<span class="keyword">b</span> 空格blank</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正则表达式</span></span><br><span class="line"><span class="string">&#x27;a b   c&#x27;</span>.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;c&#x27;] </span></span><br><span class="line"><span class="comment">//一个空格隔开的字符串</span></span><br><span class="line"></span><br><span class="line">a b   c<span class="string">&#x27;.split(/\s+/); // [&#x27;</span>a<span class="string">&#x27;, &#x27;</span>b<span class="string">&#x27;, &#x27;</span>c<span class="string">&#x27;] //</span></span><br><span class="line"><span class="string">//至少一个空格隔开的</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;</span>a,b, c  d<span class="string">&#x27;.split(/[\s\,]+/); // [&#x27;</span>a<span class="string">&#x27;, &#x27;</span>b<span class="string">&#x27;, &#x27;</span>c<span class="string">&#x27;, &#x27;</span>d<span class="string">&#x27;]</span></span><br><span class="line"><span class="string">//至少一个空格或逗号隔开的</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;</span>a,b;; c  d<span class="string">&#x27;.split(/[\s\,\;]+/); // [&#x27;</span>a<span class="string">&#x27;, &#x27;</span>b<span class="string">&#x27;, &#x27;</span>c<span class="string">&#x27;, &#x27;</span>d<span class="string">&#x27;]</span></span><br><span class="line"><span class="string">//至少一个空格或逗号或分号隔开的</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var str=&#x27;</span>ok<span class="string">&quot;fine&quot;</span>?<span class="string">&#x27;</span></span><br><span class="line"><span class="string">var a=&#x27;</span>nihao<span class="string">&#x27;+521;//支持隐式转换</span></span><br><span class="line"><span class="string">//如果&#x27;</span>本身也是一个字符，那就可以用<span class="string">&quot;&quot;</span>括起来</span><br><span class="line"><span class="comment">//转义字符\</span></span><br><span class="line"></span><br><span class="line">由于多行字符串用\n写起来比较费事，<span class="title class_">ES6</span>标准新增了一种多行字符串的表示方法，用反引号表示</span><br></pre></td></tr></table></figure>
<p>要把多个字符串连接起来，可以用+号连接：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//array+str</span></span><br><span class="line">string.<span class="title function_">indexOf</span>(char,start_pos) <span class="comment">//返回在其中首次出现的位置 -1不存在 lastIndexOf</span></span><br><span class="line">string.<span class="title function_">includes</span>()<span class="comment">//是否包含某个特定的元素，返回 true 或 false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//str</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;小明&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> message = <span class="string">&#x27;你好, &#x27;</span> + name + <span class="string">&#x27;, 你今年&#x27;</span> + age + <span class="string">&#x27;岁了!&#x27;</span>;</span><br><span class="line"><span class="title function_">alert</span>(message);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ES6新增了一种模板字符串，它会自动替换字符串中的变量：</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;小明&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> message = <span class="string">`你好, <span class="subst">$&#123;name&#125;</span>, 你今年<span class="subst">$&#123;age&#125;</span>岁了!`</span>;</span><br><span class="line"><span class="title function_">alert</span>(message);</span><br><span class="line"></span><br><span class="line"><span class="built_in">parseFloat</span>(str) 函数可解析一个字符串，并返回一个浮点数。</span><br><span class="line"></span><br><span class="line">str.<span class="property">length</span></span><br><span class="line"></span><br><span class="line">str.<span class="title function_">charCodeAt</span>(<span class="number">1</span>)<span class="comment">//获取指定位置的字符对应编码ASCII</span></span><br><span class="line">str.<span class="title function_">concat</span>(str1,str2,..)<span class="comment">//一般用+运算代替str.concat</span></span><br><span class="line">str.<span class="title function_">trim</span>()<span class="comment">//去除字符串两端的空格（空白字符）并返回处理后的字符串。返回的是一个新的字符串。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//切片</span></span><br><span class="line">str.<span class="title function_">slice</span>(<span class="number">2</span>)<span class="comment">//从2到末尾截取==substring返回指定索引区间的子串</span></span><br><span class="line">str.<span class="title function_">slice</span>(<span class="number">2</span>,<span class="number">4</span>)<span class="comment">//前闭后开</span></span><br><span class="line">str.<span class="title function_">slice</span>(-<span class="number">3</span>)<span class="comment">//跟python一样 从后往前数 返回-3~-1下标</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">&#x27;hello, world&#x27;</span></span><br><span class="line">s.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">5</span>); <span class="comment">// 从索引0开始到5（不包括5），返回&#x27;hello&#x27;</span></span><br><span class="line">s.<span class="title function_">substring</span>(<span class="number">7</span>); <span class="comment">// 从索引7开始到结束，返回&#x27;world&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">substr</span>(start,cnt)<span class="comment">//不同点：第二个参数是返回字符数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">&#x27;Hello&#x27;</span>;</span><br><span class="line">s.<span class="title function_">toUpperCase</span>(); <span class="comment">// 返回&#x27;HELLO&#x27;</span></span><br><span class="line"><span class="keyword">var</span> lower = s.<span class="title function_">toLowerCase</span>(); <span class="comment">// 返回&#x27;hello&#x27;并赋值给变量lower</span></span><br><span class="line">lower; <span class="comment">// &#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">toLocaleLowerCase</span>()<span class="comment">//根据所在地区 不同大小写的规则</span></span><br><span class="line"><span class="title function_">toLocaleUpperCase</span>()</span><br><span class="line"></span><br><span class="line"><span class="title function_">indexOf</span>(char,position)<span class="comment">//从前往后搜索指定字符串出现的位置 如果有参数position 就找position及之后的</span></span><br><span class="line"><span class="title function_">lastIndexOf</span>()<span class="comment">//从后往前查找出现的位置</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">&#x27;hello, world&#x27;</span>;</span><br><span class="line">s.<span class="title function_">indexOf</span>(<span class="string">&#x27;world&#x27;</span>); <span class="comment">// 返回7</span></span><br><span class="line">s.<span class="title function_">indexOf</span>(<span class="string">&#x27;World&#x27;</span>); <span class="comment">// 没有找到指定的子串，返回-1</span></span><br><span class="line"></span><br><span class="line">str.<span class="title function_">startsWith</span>()</span><br><span class="line">str.<span class="title function_">endsWith</span>()</span><br><span class="line">str.<span class="title function_">repeat</span>(count)</span><br><span class="line">str.<span class="title function_">split</span>(separator, limit);</span><br><span class="line"><span class="comment">//separator（可选）：指定分隔符，可以是一个字符串或正则表达式。用于确定在哪里切分字符串。如果不传递该参数，整个字符串将作为一个单独的元素放入返回的数组。</span></span><br><span class="line"><span class="comment">//limit（可选）：限制返回的数组的最大长度。如果指定了 limit，split() 将最多返回 limit 个元素。</span></span><br><span class="line"></span><br><span class="line">str.<span class="title function_">replace</span>(old,<span class="keyword">new</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h1><ul>
<li>类数组对象（Array-like Object）<br>arguments属于类数组对象（Array-like Object），虽然它像数组，但不能直接使用数组的方法（如 push 或 pop 、map、forEach等）。</li>
<li>常见的类数组对象<br>arguments 对象（在函数内部）<br>DOM 查询结果（如 document.querySelectorAll() 返回的 NodeList）<br>NodeList 和 HTMLCollection（例如 getElementsByTagName() 和 getElementsByClassName() 返回的集合）</li>
<li>arguments，它只在函数内部起作用，并且永远指向当前函数的调用者传入的所有参数。这个存在的意义是访问函数的所有参数，特别是在函数的参数数量不确定时（例如，变参函数）。它包含了传递给函数的所有参数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;x = &#x27;</span> + x); <span class="comment">// 10</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="variable language_">arguments</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;arg &#x27;</span> + i + <span class="string">&#x27; = &#x27;</span> + <span class="variable language_">arguments</span>[i]); <span class="comment">// 10, 20, 30</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure>
<p>利用arguments，你可以获得调用者传入的所有参数。也就是说，即使函数不定义任何参数，还是可以拿到参数的值<br>arguments.length 判断个数长度</p>
<h1 id="return大坑"><a href="#return大坑" class="headerlink" title="return大坑"></a>return大坑</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>要小心了，由于JavaScript引擎在行末自动添加分号的机制，上面的代码实际上变成了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>; <span class="comment">// 自动添加了分号，相当于return undefined;</span></span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span> &#125;; <span class="comment">// 这行语句已经没法执行到了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所以正确写法为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="comment">// 这里不会自动加分号，因为&#123;表示语句尚未结束</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h1><p>JavaScript 的 装饰器（decorators） 是一种用于修改类和类方法行为的语法。装饰器本质上是一个函数，它可以用来增强、修改或替换类或类方法的功能。装饰器是 ES2022（即 ECMAScript 2022）的一部分，虽然目前很多浏览器还不完全支持，但你可以通过 Babel 等工具启用它。</p>
<p>装饰器的使用场景：<br>日志记录：自动记录方法调用的日志。<br>权限控制：在类方法前加上装饰器，进行权限验证。<br>缓存：给方法加上装饰器进行缓存，避免重复计算。<br>观察者模式：通过装饰器观察对象状态的变化。</p>
<p>需要注意的事项：<br>装饰器需要在 class 或方法定义前使用 @ 符号进行标记。<br>装饰器语法并不是 JavaScript 标准的一部分，虽然已经被提案并在 ECMAScript 2022 中正式接受，但在实际使用时仍需依赖工具（如 Babel）进行转译。<br>装饰器的行为修改是浅拷贝的，无法对类本身的实例进行深度操作。</p>
<p>JavaScript的所有对象都是动态的，即使内置的函数，我们也可以重新指向新的函数。</p>
<ol>
<li>类装饰器<br>类装饰器用于修改类的构造函数或类本身。它是一个函数，接收类的构造函数作为参数，并返回一个修改后的构造函数。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myDecorator</span>(<span class="params">target</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target); <span class="comment">// 输出类的构造函数</span></span><br><span class="line">  target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">decorated</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@myDecorator</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance.<span class="property">decorated</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>方法装饰器<br>方法装饰器用于修改类方法的行为。它接收三个参数：<br>类的原型（如果是实例方法）或构造函数（如果是静态方法）<br>方法名<br>方法描述符（descriptor）</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">log 装饰器拦截了 add 方法的调用，打印了传入的参数和返回的结果。</span></span><br><span class="line"><span class="comment">方法装饰器通过 descriptor 对象修改方法的行为。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">log</span>(<span class="params">target, key, descriptor</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> originalMethod = descriptor.<span class="property">value</span>;</span><br><span class="line">  descriptor.<span class="property">value</span> = <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Calling <span class="subst">$&#123;key&#125;</span> with arguments: <span class="subst">$&#123;args&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">const</span> result = originalMethod.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span> returned: <span class="subst">$&#123;result&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  @log</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">instance.<span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// 输出:</span></span><br><span class="line"><span class="comment">// Calling add with arguments: [1, 2]</span></span><br><span class="line"><span class="comment">// add returned: 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> oldParseInt = <span class="built_in">parseInt</span>; <span class="comment">// 保存原函数</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">parseInt</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    count += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> oldParseInt.<span class="title function_">apply</span>(<span class="literal">null</span>, <span class="variable language_">arguments</span>); <span class="comment">// 调用原函数</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>属性装饰器<br>属性装饰器用于修改类实例的属性。它只能作用于类的属性声明，但不能直接修改属性的值。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">readonly 装饰器使得 name 属性变为只读。</span></span><br><span class="line"><span class="comment">在尝试修改 name 时会抛出错误。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">readonly 装饰器通过修改对象属性的 属性描述符（descriptor）来实现只读功能</span></span><br><span class="line"><span class="comment">属性描述符（Descriptor）</span></span><br><span class="line"><span class="comment">在 JavaScript 中，每个对象的属性都可以有一个 属性描述符（descriptor），这个描述符包含了该属性的一些特性，例如：</span></span><br><span class="line"><span class="comment">writable：决定属性是否可以被修改。</span></span><br><span class="line"><span class="comment">configurable：决定属性是否可以被删除或修改。</span></span><br><span class="line"><span class="comment">enumerable：决定属性是否可以出现在 for...in 循环和 Object.keys() 中。</span></span><br><span class="line"><span class="comment">get 和 set：用于定义 getter 和 setter 方法。</span></span><br><span class="line"><span class="comment">Object.defineProperty() 和 属性描述符</span></span><br><span class="line"><span class="comment">Object.defineProperty() 是 JavaScript 提供的一个方法，用于精确地控制对象的属性定义，它可以定义或修改对象的属性，同时也能设置这些属性的描述符。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;name&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">false</span>,  <span class="comment">// 设置为只读</span></span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readonly</span>(<span class="params">target, key, descriptor</span>) &#123;</span><br><span class="line">  <span class="comment">// 修改属性描述符</span></span><br><span class="line">  descriptor.<span class="property">writable</span> = <span class="literal">false</span>;  <span class="comment">// 设置属性为只读</span></span><br><span class="line">  <span class="keyword">return</span> descriptor;  <span class="comment">// 返回修改后的描述符</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">target：指的是目标对象（类的原型，或者实例）。</span></span><br><span class="line"><span class="comment">key：指的是属性名或方法名。</span></span><br><span class="line"><span class="comment">descriptor：指的是属性或方法的描述符，其中包含了属性的各种设置（例如 writable、configurable、enumerable 等）。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readonly</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> descriptor = &#123;</span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">false</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  @readonly</span><br><span class="line">  name = <span class="string">&quot;John Doe&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance.<span class="property">name</span>); <span class="comment">// &quot;John Doe&quot;</span></span><br><span class="line">instance.<span class="property">name</span> = <span class="string">&quot;Jane Doe&quot;</span>; <span class="comment">// TypeError: Cannot assign to read only property &#x27;name&#x27;</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>访问器装饰器（getter&#x2F;setter）<br>访问器装饰器可以应用于类的 getter 或 setter 方法，允许你对这些访问器进行修饰。<br>类的 getter 和 setter 方法是 JavaScript 中的一种特殊方法，用于访问和设置对象的属性。它们提供了对对象属性的封装，允许你在获取或修改属性时执行额外的逻辑。通过 getter 和 setter，你可以控制如何读取和修改对象的属性。<blockquote>
<p>Getter（访问器）<br>getter 是一个方法，它允许你定义对象属性的读取行为。它会在访问该属性时自动调用。<br>Setter（设置器）<br>setter 是一个方法，它允许你定义对象属性的设置行为。它会在给该属性赋值时自动调用。<br>使用 getter 和 setter 的场景<br>数据验证：可以在设置属性值之前进行验证，确保其有效性。<br>懒加载：如果属性值比较复杂，可以在 getter 中做懒加载（延迟计算），避免每次访问都进行计算。<br>属性代理：你可以通过 getter 和 setter 来创建虚拟属性，这些属性并不直接存储在对象中，而是计算得出的。</p>
</blockquote>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">firstName, lastName</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">firstName</span> = firstName;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lastName</span> = lastName;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Getter：懒加载 fullName</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">fullName</span>() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Calculating full name...&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="variable language_">this</span>.lastName&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Doe&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">fullName</span>); <span class="comment">// &quot;Calculating full name...&quot; 和 &quot;John Doe&quot; 会输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">有时，我们希望类的某些属性不能直接访问，可以通过添加前缀 _ 来表示它们是私有的，但实际还是通过 getter 和 setter 来访问它们。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_value</span> = value;  <span class="comment">// 私有属性，通常以 _ 开头</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Getter 方法</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Getting value&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_value</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Setter 方法</span></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Setting value to &quot;</span> + newValue);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_value</span> = newValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">log</span>(<span class="params">target, key, descriptor</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> getter = descriptor.<span class="property">get</span>;</span><br><span class="line">  descriptor.<span class="property">get</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Getting <span class="subst">$&#123;key&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> getter.<span class="title function_">apply</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_age</span> = <span class="number">30</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  @log</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">age</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_age</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance.<span class="property">age</span>); <span class="comment">// &quot;Getting age&quot; 然后 &quot;30&quot;</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>静态方法装饰器<br>静态方法装饰器与实例方法装饰器类似，但它应用于静态方法。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">staticDecorator</span>(<span class="params">target, key, descriptor</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Static method <span class="subst">$&#123;key&#125;</span> is being decorated`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">  @staticDecorator</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">staticMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Static method&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">MyClass</span>.<span class="title function_">staticMethod</span>(); <span class="comment">// Static method staticMethod is being decorated</span></span><br></pre></td></tr></table></figure>
<h1 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h1><p>高阶函数的定义：接受函数作为参数or把函数作为结果值返回。如：函数表达式，回调函数。<br>普通函数的声明与调用无顺序限制，推荐做法先声明再调用。** 函数表达式必须要先声明再调用**</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1 函数表达式：把函数当值赋值给变量</span></span><br><span class="line"><span class="keyword">let</span> counter=<span class="keyword">function</span>(<span class="params">x,y</span>)&#123;<span class="keyword">return</span> x+y&#125;</span><br><span class="line"><span class="comment">//2 回调函数：把函数作为参数传递给另外一个函数 </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">x, y</span>) &#123;<span class="comment">//reduce降维</span></span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sum</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>
<p>如果不需要立刻求和，而是在后面的代码中，根据需要再计算怎么办？可以不返回求和的结果，而是返回求和的函数.<br>当我们调用lazy_sum()时，返回的并不是求和结果，而是求和函数.调用函数f时，才真正计算求和的结果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数表达式：把函数当值赋值给变量</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="title function_">lazy_sum</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// function sum()</span></span><br><span class="line"><span class="title function_">f</span>(); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>
<p>我们在函数lazy_sum中又定义了函数sum，并且，内部函数sum可以引用外部函数lazy_sum的参数和局部变量，当lazy_sum返回函数sum时，相关参数和变量都保存在返回的函数中，这种称为“闭包（Closure）”<br>注意一点，当我们调用lazy_sum()时，每次调用都会返回一个新的函数，即使传入相同的参数</p>
<h1 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h1><p>闭包指的是被包的函数。<br>返回闭包时牢记的一点就是：返回函数不要引用任何循环变量，或者后续会发生变化的变量。因为 JavaScript 中的闭包会引用外部环境的变量，而这些变量的值在循环结束后可能已经发生了变化。假设我们在循环中创建闭包，并将循环变量作为闭包函数的引用，最终所有闭包都会共享同一个变量的引用，并且这个变量在每次迭代时都会更新，从而导致闭包内部的值不是我们期望的。<br>如果一定要引用循环变量怎么办？方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该循环变量后续如何更改，已绑定到函数参数的值不变。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误实例</span></span><br><span class="line"><span class="keyword">const</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  funcs.<span class="title function_">push</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);  <span class="comment">// 打印 i 的值</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 由于 `i` 是 `var`，它在整个函数作用域内是共享的，循环结束时 i = 3</span></span><br><span class="line">funcs[<span class="number">0</span>]();  <span class="comment">// 输出 3</span></span><br><span class="line">funcs[<span class="number">1</span>]();  <span class="comment">// 输出 3</span></span><br><span class="line">funcs[<span class="number">2</span>]();  <span class="comment">// 输出 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决方法</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">使用 let 来替代 var（块级作用域）</span></span><br><span class="line"><span class="comment">let 会为每个循环迭代创建一个新的作用域，因此每次循环时，闭包捕获的 i 值是当前的值，不会和后续的值产生冲突。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> funcs = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  funcs.<span class="title function_">push</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);  <span class="comment">// 每个闭包捕获到的 `i` 是不同的</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">funcs[<span class="number">0</span>]();  <span class="comment">// 输出 0</span></span><br><span class="line">funcs[<span class="number">1</span>]();  <span class="comment">// 输出 1</span></span><br><span class="line">funcs[<span class="number">2</span>]();  <span class="comment">// 输出 2</span></span><br></pre></td></tr></table></figure>
<p>在没有class机制，只有函数的语言里，借助闭包，同样可以封装一个私有变量<br>闭包就是携带状态的函数，并且它的状态可以完全对外隐藏起来<br>工厂函数，因为它像工厂一样 生产对象。每次调用工厂函数时，都会返回一个新的对象，而这个对象可以包含不同的属性和方法。工厂函数通常用于实现对象的创建和封装，尤其是在没有 class 机制的情况下，工厂函数可以帮助你模仿类的行为。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//闭包也可以模拟class</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;  <span class="comment">// `count` 是私有变量</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      count++;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      count--;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getCount</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">createCounter</span>();</span><br><span class="line">counter.<span class="title function_">increment</span>();  <span class="comment">// 输出 1</span></span><br><span class="line">counter.<span class="title function_">increment</span>();  <span class="comment">// 输出 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="title function_">getCount</span>());  <span class="comment">// 输出 2</span></span><br><span class="line">counter.<span class="title function_">decrement</span>();  <span class="comment">// 输出 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接访问 `count` 会出错，因为它是私有的</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="property">count</span>);  <span class="comment">// undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="生成器generator"><a href="#生成器generator" class="headerlink" title="生成器generator"></a>生成器generator</h1><p>generator和函数不同的是，generator由function<em>定义（注意多出的</em>号），除了return语句，还可以用yield返回多次</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">fib</span>(<span class="params">max</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> t,</span><br><span class="line">        a = <span class="number">0</span>,</span><br><span class="line">        b = <span class="number">1</span>,</span><br><span class="line">        n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &lt; max) &#123;</span><br><span class="line">        <span class="keyword">yield</span> a;</span><br><span class="line">        [a, b] = [b, a + b];</span><br><span class="line">        n ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fib</span>(<span class="number">5</span>); </span><br><span class="line"><span class="comment">//直接调用一个generator和调用函数不一样，fib(5)仅仅是创建了一个generator对象，还没有去执行它。</span></span><br><span class="line"><span class="comment">//调用generator对象有两个方法，一是不断地调用generator对象的next()方法：</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="title function_">fib</span>(<span class="number">5</span>);</span><br><span class="line">f.<span class="title function_">next</span>(); <span class="comment">// &#123;value: 0, done: false&#125;</span></span><br><span class="line">f.<span class="title function_">next</span>(); <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line">f.<span class="title function_">next</span>(); <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line">f.<span class="title function_">next</span>(); <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line">f.<span class="title function_">next</span>(); <span class="comment">// &#123;value: 3, done: false&#125;</span></span><br><span class="line">f.<span class="title function_">next</span>(); <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">next()方法会执行generator的代码，</span></span><br><span class="line"><span class="comment">每次遇到yield x;就返回一个对象&#123;value: x, done: true/false&#125;，然后“暂停”。</span></span><br><span class="line"><span class="comment">返回的value就是yield的返回值，</span></span><br><span class="line"><span class="comment">done表示这个generator是否已经执行结束了。</span></span><br><span class="line"><span class="comment">如果done为true，则value就是return的返回值。</span></span><br><span class="line"><span class="comment">当执行到done为true时，这个generator对象就已经全部执行完毕，不要再继续调用next()了。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二个方法是直接用for ... of循环迭代generator对象，这种方式不需要我们自己判断done</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> <span class="title function_">fib</span>(<span class="number">10</span>)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 依次输出0, 1, 1, 2, 3, ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    r1 = <span class="keyword">yield</span> <span class="title function_">ajax</span>(<span class="string">&#x27;http://url-1&#x27;</span>, data1);</span><br><span class="line">    r2 = <span class="keyword">yield</span> <span class="title function_">ajax</span>(<span class="string">&#x27;http://url-2&#x27;</span>, data2);</span><br><span class="line">    r3 = <span class="keyword">yield</span> <span class="title function_">ajax</span>(<span class="string">&#x27;http://url-3&#x27;</span>, data3);</span><br><span class="line">    <span class="title function_">success</span>(r3);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="title function_">handle</span>(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>generator还有另一个巨大的好处，就是把异步回调代码变成“同步”代码。这个好处类似于AJAX。<br>看上去是同步的代码，实际执行是异步的。</p>
<h1 id="正则表达式-RegExp"><a href="#正则表达式-RegExp" class="headerlink" title="正则表达式(RegExp)"></a>正则表达式(RegExp)</h1><p>作用：表单验证、过滤敏感词、提取想要部分字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> rname=<span class="regexp">/expression/</span></span><br><span class="line"><span class="comment">// /表达式/就表示是正则表达式</span></span><br><span class="line">regObj.<span class="title function_">test</span>(被检测字符串)<span class="comment">//检测是否与正则表达式匹配 返回true/false</span></span><br><span class="line">regObj.<span class="title function_">exec</span>(被检测字符串)<span class="comment">//在一个指定字符串中执行一个搜索匹配</span></span><br><span class="line"><span class="comment">//如果匹配成功，exec() 方法返回一个数组，否则返回null</span></span><br><span class="line"><span class="comment">/*全局匹配可以多次执行exec()方法来搜索一个匹配的字符串。</span></span><br><span class="line"><span class="comment">当我们指定g标志后，每次运行exec()，正则表达式本身会更新lastIndex属性，</span></span><br><span class="line"><span class="comment">表示上次匹配到的最后索引：*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//元字符 指表示特殊含义的符号，能够匹配一类 如[a-z]</span></span><br><span class="line"><span class="comment">//边界符：位置开头结尾</span></span><br><span class="line">^开头</span><br><span class="line">$结尾</span><br><span class="line"></span><br><span class="line"><span class="comment">//量词：重复次数</span></span><br><span class="line">* <span class="comment">//重复任意次 包括0次</span></span><br><span class="line">+ <span class="comment">//重复一次或更多次</span></span><br><span class="line">? <span class="comment">//重复0次或一次</span></span><br><span class="line">&#123;n&#125; </span><br><span class="line">&#123;n,&#125;</span><br><span class="line">&#123;n,m&#125; <span class="comment">//逗号两侧不要出现空格</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符类</span></span><br><span class="line">[匹配字符集合] 如[abc]</span><br><span class="line">[a-z]</span><br><span class="line">[a-zA-Z]</span><br><span class="line">[<span class="number">0</span>-<span class="number">9</span>]</span><br><span class="line">[a-zA-<span class="variable constant_">Z0</span>-<span class="number">9</span>-_]</span><br><span class="line">[^abc] <span class="comment">//取反符号 不能是abc</span></span><br><span class="line">. <span class="comment">//匹配除换行符之外任何单个字符</span></span><br><span class="line">\d [<span class="number">0</span>-<span class="number">9</span>]</span><br><span class="line">\D [^<span class="number">0</span>-<span class="number">9</span>]</span><br><span class="line">\w [a-zA-<span class="variable constant_">Z0</span>-<span class="number">9</span>-_]</span><br><span class="line">\W 除\w之外</span><br><span class="line">\s 匹配空格包括换行符、制表符、空格符等 [\t\r\n\v\f]</span><br><span class="line">\S 匹配除\s之外</span><br><span class="line"></span><br><span class="line"><span class="comment">//例子</span></span><br><span class="line">^\d&#123;<span class="number">4</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;\ <span class="comment">//日期</span></span><br><span class="line">/^[a-zA-<span class="variable constant_">Z0</span>-<span class="number">9</span>-_]&#123;<span class="number">6</span>,<span class="number">10</span>&#125;$/ <span class="comment">//用户名</span></span><br><span class="line"><span class="regexp">/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d&#123;8&#125;$/</span> <span class="comment">//手机号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修饰符</span></span><br><span class="line"><span class="regexp">/表达式/</span>修饰符</span><br><span class="line">i <span class="comment">//ignore 不区分大小写</span></span><br><span class="line">g <span class="comment">//global 匹配所有满足正则表达式的结果</span></span><br><span class="line">m<span class="comment">//表示执行多行匹配</span></span><br><span class="line">string.<span class="title function_">replace</span>(<span class="regexp">/exp/</span>,<span class="string">&#x27;new_word&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>‘00\d’可以匹配’007’<br>\s可以匹配一个空格（也包括Tab等空白符），所以\s+表示至少有一个空格</p>
<p><strong>由于’-‘是特殊字符，在正则表达式中，要用’&#39;转义</strong></p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[0-9a-zA-Z\_]可以匹配一个数字、字母或者下划线；</span><br><span class="line">[0-9a-zA-Z\_]+可以匹配至少由一个数字、字母或者下划线组成的字符串</span><br><span class="line">[a-zA-Z\_\$][0-9a-zA-Z\_\$]*可以匹配由字母或下划线、$开头，后接任意个由一个数字、字母或者下划线、$组成的字符串</span><br><span class="line">[a-zA-Z\_\$][0-9a-zA-Z\_\$]&#123;0, 19&#125;更精确地限制了变量的长度是1-20个字符（前面1个字符+后面最多19个字符）</span><br></pre></td></tr></table></figure>
<p><strong>A|B可以匹配A或B，所以(J|j)ava(S|s)cript可以匹配’JavaScript’、’Javascript’、’javaScript’或者’javascript’</strong></p>
<ul>
<li>分组<br>用()表示的就是要提取的分组<br>如果正则表达式中定义了组，就可以在RegExp对象上用exec()方法提取出子串来。<br>exec()方法在匹配成功后，会返回一个Array，第一个元素是正则表达式匹配到的整个字符串，后面的字符串表示匹配成功的子串<br>exec()方法在匹配失败时返回null</li>
<li>贪婪匹配 or 非贪婪匹配<br>正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符。<br><code>.*</code> v.s.<code>.*?</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^(\d+)(0*)$/</span>;</span><br><span class="line">re.<span class="title function_">exec</span>(<span class="string">&#x27;102300&#x27;</span>); <span class="comment">// [&#x27;102300&#x27;, &#x27;102300&#x27;, &#x27;&#x27;]</span></span><br><span class="line">\d+采用贪婪匹配，直接把后面的<span class="number">0</span>全部匹配了，结果<span class="number">0</span>*只能匹配空字符串了</span><br><span class="line"></span><br><span class="line">必须让\d+采用非贪婪匹配（也就是尽可能少匹配），才能把后面的<span class="number">0</span>匹配出来，加个?就可以让\d+采用非贪婪匹配</span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^(\d+?)(0*)$/</span>;</span><br><span class="line">re.<span class="title function_">exec</span>(<span class="string">&#x27;102300&#x27;</span>); <span class="comment">// [&#x27;102300&#x27;, &#x27;1023&#x27;, &#x27;00&#x27;]</span></span><br></pre></td></tr></table></figure>
<h1 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h1><p>JavaScript的所有数据都可以看成对象</p>
<p>对象的两个基本概念：<br>1、类：类是对象的类型模板，例如，定义Student类来表示学生，类本身是一种类型，Student表示学生类型，但不表示任何具体的某个学生；<br>2、实例：实例是根据类创建的对象，例如，根据Student类可以创建出xiaoming、xiaohong、xiaojun等多个实例，每个实例表示一个具体的学生，他们全都属于Student类型。</p>
<p>JavaScript通过原型（prototype）来实现面向对象编程。</p>
<p>所以，类和实例是大多数面向对象编程语言的基本概念。</p>
<p>不过，在JavaScript中，这个概念需要改一改。JavaScript不区分类和实例的概念，而是通过原型（prototype）来实现面向对象编程。<br>原型是指当我们想要创建xiaoming这个具体的学生时，我们并没有一个Student类型可用。那怎么办？恰好有这么一个现成的对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Student</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Robot&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">1.2</span>,</span><br><span class="line">    <span class="attr">run</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27; is running...&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line">xiaoming.<span class="property">__proto__</span> = <span class="title class_">Student</span>;</span><br></pre></td></tr></table></figure>
<p>xiaoming有自己的name属性，但并没有定义run()方法。不过，由于小明是从Student继承而来，只要Student有run()方法，xiaoming也可以调用</p>
<p>JavaScript的原型链和Java的Class区别就在，它没有“Class”的概念，所有对象都是实例，所谓继承关系不过是把一个对象的原型指向另一个对象而已。</p>
<p>在JavaScrip代码运行时期，你可以把xiaoming从Student变成Bird，或者变成任何对象。</p>
<p>在编写JavaScript代码时，不要直接用<code>obj.__proto__</code>去改变一个对象的原型，并且，低版本的IE也无法使用<code>__proto__</code>。Object.create()方法可以传入一个原型对象，并创建一个基于该原型的新对象，但是新对象什么属性都没有。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原型对象:</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Student</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Robot&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">1.2</span>,</span><br><span class="line">    <span class="attr">run</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27; is running...&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createStudent</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="comment">// 基于Student原型创建一个新对象:</span></span><br><span class="line">    <span class="keyword">var</span> s = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Student</span>);</span><br><span class="line">    <span class="comment">// 初始化新对象:</span></span><br><span class="line">    s.<span class="property">name</span> = name;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="title function_">createStudent</span>(<span class="string">&#x27;小明&#x27;</span>);</span><br><span class="line">xiaoming.<span class="title function_">run</span>(); <span class="comment">// 小明 is running...</span></span><br><span class="line">xiaoming.<span class="property">__proto__</span> === <span class="title class_">Student</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>方法<br>在一个对象中绑定函数，称为这个对象的方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">birth</span>: <span class="number">1990</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>();</span><br><span class="line">        <span class="keyword">return</span> y - <span class="variable language_">this</span>.<span class="property">birth</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xiaoming.<span class="property">age</span>; <span class="comment">// function xiaoming.age()</span></span><br><span class="line">xiaoming.<span class="title function_">age</span>(); <span class="comment">// 今年调用是25,明年调用就变成26了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//拆开写也可以</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>();</span><br><span class="line">    <span class="keyword">return</span> y - <span class="variable language_">this</span>.<span class="property">birth</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">birth</span>: <span class="number">1990</span>,</span><br><span class="line">    <span class="attr">age</span>: getAge</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xiaoming.<span class="title function_">age</span>(); <span class="comment">// 25, 正常结果</span></span><br><span class="line"><span class="title function_">getAge</span>(); <span class="comment">// NaN</span></span><br><span class="line">getAge.<span class="title function_">apply</span>(xiaoming, []); <span class="comment">// 25, this指向xiaoming, 参数为空</span></span><br></pre></td></tr></table></figure>
<p>如果单独调用函数，比如getAge()，此时，该函数的this指向全局对象，也就是window。<br>strict模式下指向undefined<br>要指定函数的this指向哪个对象，可以用函数本身的apply方法，它接收两个参数，第一个参数就是需要绑定的this变量，第二个参数是Array，表示函数本身的参数。<br>对普通函数调用，我们通常把this绑定为null<br>另一个与apply()类似的方法是call()，唯一区别是：<br>apply()把参数打包成Array再传入；<br>call()把参数按顺序传入。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>)，分别用<span class="title function_">apply</span>()和<span class="title function_">call</span>()实现</span><br><span class="line"><span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, [<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>]); <span class="comment">// 5</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">call</span>(<span class="literal">null</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h1 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h1><p>当我们用obj.xxx访问一个对象的属性时，JavaScript引擎先在当前对象上查找该属性，如果没有找到，就到其原型对象上找，如果还没有找到，就一直上溯到Object.prototype对象，最后，如果还没有找到，就只能返回undefined。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr ----&gt; <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="literal">null</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>定义了<span class="title function_">indexOf</span>()、<span class="title function_">shift</span>()等方法，因此你可以在所有的<span class="title class_">Array</span>对象上直接调用这些方法。</span><br><span class="line"></span><br><span class="line">函数也是一个对象，它的原型链是：</span><br><span class="line">foo ----&gt; <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="literal">null</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>定义了<span class="title function_">apply</span>()等方法，因此，所有函数都可以调用<span class="title function_">apply</span>()方法</span><br><span class="line"></span><br><span class="line">如果原型链很长，那么访问一个对象的属性就会因为花更多的时间查找而变得更慢，因此要注意不要把原型链搞得太长。</span><br></pre></td></tr></table></figure>
<p>现在，我们要基于Student扩展出PrimaryStudent，可以先定义出PrimaryStudent：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">PrimaryStudent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="comment">// 调用Student构造函数，绑定this变量:</span></span><br><span class="line">    <span class="title class_">Student</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">grade</span> = props.<span class="property">grade</span> || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">但是，调用了<span class="title class_">Student</span>构造函数不等于继承了<span class="title class_">Student</span></span><br><span class="line"><span class="title class_">PrimaryStudent</span>创建的对象的原型是：</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">PrimaryStudent</span>() ----&gt; <span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="literal">null</span></span><br><span class="line">必须想办法把原型链修改为：</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">PrimaryStudent</span>() ----&gt; <span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span> ----&gt; <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">如果按照简单粗暴的方法 即</span><br><span class="line"><span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">那定义这个<span class="title class_">PrimaryStudent</span>没有意义了</span><br><span class="line">必须借助一个中间对象来实现正确的原型链，</span><br><span class="line">这个中间对象的原型要指向<span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span></span><br><span class="line">中间对象可以用一个空函数F来实现</span><br><span class="line"></span><br><span class="line"><span class="comment">// PrimaryStudent构造函数:</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PrimaryStudent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="title class_">Student</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">grade</span> = props.<span class="property">grade</span> || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空函数F:</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把F的原型指向Student.prototype:</span></span><br><span class="line">F.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把PrimaryStudent的原型指向一个新的F对象，F对象的原型正好指向Student.prototype:</span></span><br><span class="line"><span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把PrimaryStudent原型的构造函数修复为PrimaryStudent:</span></span><br><span class="line"><span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">PrimaryStudent</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继续在PrimaryStudent原型（就是new F()对象）上定义方法：</span></span><br><span class="line"><span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getGrade</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">grade</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建xiaoming:</span></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> <span class="title class_">PrimaryStudent</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;小明&#x27;</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="number">2</span></span><br><span class="line">&#125;);</span><br><span class="line">xiaoming.<span class="property">name</span>; <span class="comment">// &#x27;小明&#x27;</span></span><br><span class="line">xiaoming.<span class="property">grade</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证原型:</span></span><br><span class="line">xiaoming.<span class="property">__proto__</span> === <span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line">xiaoming.<span class="property">__proto__</span>.<span class="property">__proto__</span> === <span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证继承关系:</span></span><br><span class="line">xiaoming <span class="keyword">instanceof</span> <span class="title class_">PrimaryStudent</span>; <span class="comment">// true</span></span><br><span class="line">xiaoming <span class="keyword">instanceof</span> <span class="title class_">Student</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">函数F仅用于桥接，我们仅创建了一个<span class="keyword">new</span> <span class="title function_">F</span>()实例，而且，没有改变原有的<span class="title class_">Student</span>定义的原型链</span><br><span class="line"></span><br><span class="line">把继承这个动作用一个<span class="title function_">inherits</span>()函数封装起来，还可以隐藏F的定义，并简化代码：</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">inherits</span>(<span class="params">Child, Parent</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> F = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line">    F.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line">    <span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line">    <span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Child</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">inherits</span>()函数可以复用：</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = props.<span class="property">name</span> || <span class="string">&#x27;Unnamed&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hello</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Hello, &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;!&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PrimaryStudent</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="title class_">Student</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">grade</span> = props.<span class="property">grade</span> || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现原型继承链:</span></span><br><span class="line"><span class="title function_">inherits</span>(<span class="title class_">PrimaryStudent</span>, <span class="title class_">Student</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定其他方法到PrimaryStudent原型:</span></span><br><span class="line"><span class="title class_">PrimaryStudent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getGrade</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">grade</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>JavaScript的原型继承实现方式就是：</p>
<ol>
<li>定义新的构造函数，并在内部用call()调用希望“继承”的构造函数，并绑定this；</li>
<li>借助中间函数F实现原型链继承，最好通过封装的inherits函数完成；  </li>
<li>继续在新的构造函数的原型上定义新方法。继续在新的构造函数的原型上定义新方法。<br>JavaScript的对象模型是基于原型实现的，特点是简单，缺点是理解起来比传统的类－实例模型要困难，最大的缺点是继承的实现需要编写大量代码，并且需要正确实现原型链。</li>
</ol>
<h1 id="本地存储webstorage"><a href="#本地存储webstorage" class="headerlink" title="本地存储webstorage"></a>本地存储webstorage</h1><p>webstorage是本地存储，存储在客户端，包括localStorage和sessionStorage<br>数据存储在用户浏览器中。<br>容量较大，sessionStorage和localStorage约 5M 左右<br>只能存储字符串，可以将对象JSON.stringify() 编码后存储</p>
<ul>
<li>localStorage<br>localStorage生命周期是永久，同一浏览器可以共享，这意味着除非用户显示在浏览器提供的UI上清除localStorage信息，否则这些信息将永远存在。存放数据大小为一般为5MB,而且它仅在客户端（即浏览器）中保存，不参与和服务器的通信，键值对形式。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>);<span class="comment">//以“key”为名称存储一个值“value”</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;key&quot;</span>);<span class="comment">//获取名称为“key”的值</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&quot;key&quot;</span>);<span class="comment">//删除名称为“key”的信息。</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();<span class="comment">//清空localStorage中所有信息 清空所有的本地存储数据</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>localStorage.setItem(&#39;key&#39;,value)</code>value为一个对象Object,以上面的方式写入,会出现读取的返回值为{object Object}的情况,但这并不是我们想要的,此时我们需要使用新的方式传入Object<br><code>localStorage.setItem(&#39;param&#39;,JSON.stringify(Object))</code><br><code>JSON.parse(localStorage.getItem(&#39;key&#39;))</code></li>
<li>sessionStorage<br>1、生命周期为关闭浏览器窗口,仅在当前会话下有效，关闭页面或浏览器后被清除。<br>2、在同一个窗口(页面)下数据可以共享</li>
</ul>
<ol start="3">
<li>以键值对的形式存储使用</li>
<li>用法跟localStorage 基本相同</li>
</ol>
<h1 id="存储-自定义属性"><a href="#存储-自定义属性" class="headerlink" title="存储-自定义属性"></a>存储-自定义属性</h1><p>自定义属性: 由程序员自己添加的属性,在DOM对象中找不到, 无法使用点语法操作,必须使用专门的API</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getAttribute</span>(<span class="string">&#x27;属性名&#x27;</span>) <span class="comment">// 获取自定义属性</span></span><br><span class="line"><span class="title function_">setAttribute</span>(<span class="string">&#x27;属性名&#x27;</span>, <span class="string">&#x27;属性值&#x27;</span>) <span class="comment">// 设置自定义属性</span></span><br><span class="line"><span class="title function_">removeAttribute</span>(<span class="string">&#x27;属性名&#x27;</span>) <span class="comment">// 删除自定义属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//另一种 data-自定义属性</span></span><br><span class="line"><span class="comment">//传统的自定义属性没有专门的定义规则,开发者随意定值,不够规范</span></span><br><span class="line"><span class="comment">//在html5中推出来了专门的data-自定义属性	</span></span><br><span class="line"><span class="comment">//在标签上一律以data-开头</span></span><br><span class="line"><span class="comment">//在DOM对象上一律以dataset对象方式获取</span></span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&#x27;box&#x27;</span> data-id=<span class="string">&#x27;10&#x27;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(box.<span class="property">dataset</span>.<span class="property">id</span>)</span><br></pre></td></tr></table></figure>
<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><p>document对象还有一个cookie属性，可以获取当前页面的Cookie。<br>Cookie是由服务器发送的key-value标示符。因为HTTP协议是无状态的，但是服务器要区分到底是哪个用户发过来的请求，就可以用Cookie来区分。当一个用户成功登录后，服务器发送一个Cookie给浏览器，例如user&#x3D;ABC123XYZ(加密的字符串)…，此后，浏览器访问该网站时，会在请求头附上这个Cookie，服务器根据Cookie即可区分出用户。<br>Cookie还可以存储网站的一些设置，例如，页面显示的语言等等。<br>JavaScript可以通过document.cookie读取到当前页面的Cookie<br>这就造成了巨大的安全隐患<br>为了解决这个问题，服务器在设置Cookie时可以使用httpOnly，设定了httpOnly的Cookie将不能被JavaScript读取。这个行为由浏览器实现，主流浏览器均支持httpOnly选项  为了确保安全，服务器端在设置Cookie时，应该始终坚持使用httpOnly</p>
<ul>
<li>cookie, sessionStorage, localStorage区别<br>相同点：都存储在客户端<br>不同点：<br>1.存储大小<br>cookie数据大小不能超过4k。<br>sessionStorage和localStorage 虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大。<br>2.有效时间<br>localStorage    存储持久数据，浏览器关闭后数据不丢失除非主动删除数据；<br>sessionStorage  数据在当前浏览器窗口关闭后自动删除。<br>cookie          设置的cookie过期时间之前一直有效，即使窗口或浏览器关闭</li>
</ul>
<ol start="3">
<li>数据与服务器之间的交互方式<br>cookie的数据会自动的传递到服务器，服务器端也可以写cookie到客户端<br>sessionStorage和localStorage不会自动把数据发给服务器，仅在本地保存。</li>
</ol>
<ul>
<li>cookie其它缺点：<br>安全性问题：由于在HTTP请求中的cookie是明文传递的（HTTPS不是），带来的安全性问题还是很大的。<br>网络负担：我们知道cookie会被附加在每个HTTP请求中，在HttpRequest 和HttpResponse的header中都是要被传输的，所以无形中增加了一些不必要的流量损失。</li>
</ul>
<h1 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h1><p>在HTML表单中，可以上传文件的唯一控件就是&lt; input type&#x3D;”file”&gt;<br>注意：当一个表单包含&lt; input type&#x3D;”file”&gt;时，表单的enctype必须指定为multipart&#x2F;form-data，method必须指定为post，浏览器才能正确编码并以multipart&#x2F;form-data格式发送表单的数据。<br>出于安全考虑，浏览器只允许用户点击&lt; input type&#x3D;”file”&gt;来选择本地文件，用JavaScript对&lt; input type&#x3D;”file”&gt;的value赋值是没有任何效果的。当用户选择了上传某个文件后，JavaScript也无法获得该文件的真实路径<br>通常，上传的文件都由后台服务器处理，JavaScript可以在提交表单时对文件扩展名做检查，以便防止用户上传无效格式的文件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test-file-upload&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> filename = f.<span class="property">value</span>; <span class="comment">// &#x27;C:\fakepath\test.png&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (!filename || !(filename.<span class="title function_">endsWith</span>(<span class="string">&#x27;.jpg&#x27;</span>) || filename.<span class="title function_">endsWith</span>(<span class="string">&#x27;.png&#x27;</span>) || filename.<span class="title function_">endsWith</span>(<span class="string">&#x27;.gif&#x27;</span>))) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Can only upload image file.&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>随着HTML5的普及，新增的File API允许JavaScript读取文件内容，获得更多的文件信息。<br>HTML5的File API提供了File和FileReader两个主要对象，可以获得文件信息并读取文件。<br>下面的例子演示了如何读取用户选取的图片文件，并在一个&lt; div&gt;中预览图像：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br><span class="line">    fileInput = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test-image-file&#x27;</span>),</span><br><span class="line">    info = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test-file-info&#x27;</span>),</span><br><span class="line">    preview = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test-image-preview&#x27;</span>);</span><br><span class="line"><span class="comment">// 监听change事件:</span></span><br><span class="line">fileInput.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 清除背景图片:</span></span><br><span class="line">    preview.<span class="property">style</span>.<span class="property">backgroundImage</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">// 检查文件是否选择:</span></span><br><span class="line">    <span class="keyword">if</span> (!fileInput.<span class="property">value</span>) &#123;</span><br><span class="line">        info.<span class="property">innerHTML</span> = <span class="string">&#x27;没有选择文件&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取File引用:</span></span><br><span class="line">    <span class="keyword">var</span> file = fileInput.<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">// 获取File信息:</span></span><br><span class="line">    info.<span class="property">innerHTML</span> = <span class="string">&#x27;文件: &#x27;</span> + file.<span class="property">name</span> + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">                     <span class="string">&#x27;大小: &#x27;</span> + file.<span class="property">size</span> + <span class="string">&#x27;&lt;br&gt;&#x27;</span> +</span><br><span class="line">                     <span class="string">&#x27;修改: &#x27;</span> + file.<span class="property">lastModifiedDate</span>;</span><br><span class="line">    <span class="keyword">if</span> (file.<span class="property">type</span> !== <span class="string">&#x27;image/jpeg&#x27;</span> &amp;&amp; file.<span class="property">type</span> !== <span class="string">&#x27;image/png&#x27;</span> &amp;&amp; file.<span class="property">type</span> !== <span class="string">&#x27;image/gif&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;不是有效的图片文件!&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 读取文件:</span></span><br><span class="line">    <span class="keyword">var</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();<span class="comment">// FileReader() 返回一个新构造的FileReader。</span></span><br><span class="line">    <span class="comment">//当 FileReader 读取文件的方式为  </span></span><br><span class="line">    <span class="comment">//readAsArrayBuffer, </span></span><br><span class="line">    <span class="comment">//readAsBinaryString, </span></span><br><span class="line">    <span class="comment">//readAsDataURL 或者 readAsText 的时候，会触发一个 load 事件。从而可以使用  FileReader.onload 属性对该事件进行处理。</span></span><br><span class="line">    reader.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> data = e.<span class="property">target</span>.<span class="property">result</span>; </span><br><span class="line"><span class="comment">// &#x27;data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...&#x27;            </span></span><br><span class="line">        preview.<span class="property">style</span>.<span class="property">backgroundImage</span> = <span class="string">&#x27;url(&#x27;</span> + data + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="comment">// 以DataURL的形式读取文件:</span></span><br><span class="line">    reader.<span class="title function_">readAsDataURL</span>(file);</span><br><span class="line"><span class="comment">//readAsDataURL 方法会读取指定的 Blob 或 File 对象。</span></span><br><span class="line"><span class="comment">//读取操作完成的时候，readyState 会变成已完成DONE，并触发 loadend 事件，</span></span><br><span class="line"><span class="comment">//result属性将包含一个data:URL格式的字符串（base64编码）以表示所读取文件的内容。</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a>Canvas</h1><p>Canvas是HTML5新增的组件,可以用JavaScript在上面绘制各种图表、动画等</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">一个Canvas定义了一个指定尺寸的矩形框，在这个范围内我们可以随意绘制：</span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;test-canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;200&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">由于浏览器对HTML5标准支持不一致，</span><br><span class="line">所以，通常在<span class="tag">&lt;<span class="name">canvas</span>&gt;</span>内部添加一些说明性HTML代码，</span><br><span class="line">如果浏览器支持Canvas，它将忽略<span class="tag">&lt;<span class="name">canvas</span>&gt;</span>内部的HTML，</span><br><span class="line">如果浏览器不支持Canvas，它将显示<span class="tag">&lt;<span class="name">canvas</span>&gt;</span>内部的HTML：</span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;test-stock&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Current Price: 25.51<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">在使用Canvas前，用canvas.getContext来测试浏览器是否支持Canvas：</span><br><span class="line"><span class="comment">&lt;!-- HTML代码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;test-canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">heigth</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>你的浏览器不支持Canvas<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">var canvas = document.getElementById(&#x27;test-canvas&#x27;);</span><br><span class="line">if (canvas.getContext) &#123;</span><br><span class="line">    console.log(&#x27;你的浏览器支持Canvas!&#x27;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    console.log(&#x27;你的浏览器不支持Canvas!&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getContext(&#x27;2d&#x27;)方法让我们拿到一个CanvasRenderingContext2D对象，所有的绘图操作都需要通过这个对象完成。</span><br><span class="line">var ctx = canvas.getContext(&#x27;2d&#x27;);</span><br><span class="line">如果需要绘制3D怎么办？HTML5还有一个WebGL规范，允许在Canvas中绘制3D图形：</span><br><span class="line">gl = canvas.getContext(&quot;webgl&quot;);</span><br><span class="line"></span><br><span class="line">一：绘制形状</span><br><span class="line">先了解一下Canvas的坐标系统：</span><br><span class="line">以像素为单位，所以每个点都是非负整数。</span><br><span class="line"></span><br><span class="line">ctx.clearRect(0, 0, 200, 200); // 擦除(0,0)位置大小为200x200的矩形，擦除的意思是把该区域变为透明</span><br><span class="line">ctx.fillStyle = &#x27;#dddddd&#x27;; // 设置颜色</span><br><span class="line">ctx.fillRect(10, 10, 130, 130); // 把(10,10)位置大小为130x130的矩形涂色</span><br><span class="line">// 利用Path绘制复杂路径:</span><br><span class="line">var path=new Path2D();//创建对象</span><br><span class="line">path.arc(75, 75, 50, 0, Math.PI*2, true);</span><br><span class="line">path.moveTo(110,75);//画笔移到新坐标</span><br><span class="line">path.arc(75, 75, 35, 0, Math.PI, false);</span><br><span class="line">path.moveTo(65, 65);</span><br><span class="line">path.arc(60, 65, 5, 0, Math.PI*2, true);</span><br><span class="line">path.moveTo(95, 65);</span><br><span class="line">path.arc(90, 65, 5, 0, Math.PI*2, true);</span><br><span class="line">ctx.strokeStyle = &#x27;#0000ff&#x27;;//用颜色画笔</span><br><span class="line">ctx.stroke(path);//</span><br><span class="line">stroke() 方法会实际地绘制出通过 moveTo() 和 lineTo() 方法定义的路径。默认颜色是黑色。</span><br><span class="line">lineTo为终点 moveTo为起点</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://i-blog.csdnimg.cn/blog_migrate/33e2d2da607919b4e7b633fc33bf6396.png" alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">二、绘制文本</span><br><span class="line">绘制文本就是在指定的位置输出文本，可以设置文本的字体、样式、阴影等，与CSS完全一致</span><br><span class="line"></span><br><span class="line">还可以实现动画、缩放、各种滤镜和像素转换等高级操作。</span><br><span class="line"></span><br><span class="line">如果要实现非常复杂的操作，考虑以下优化方案：</span><br><span class="line">1·通过创建一个不可见的Canvas来绘图，然后将最终绘制结果复制到页面的可见Canvas中；</span><br><span class="line">2·尽量使用整数坐标而不是浮点数；</span><br><span class="line">3·可以创建多个重叠的Canvas绘制不同的层，而不是在一个Canvas中绘制非常复杂的图；</span><br><span class="line">4·背景图片如果不变可以直接用<span class="tag">&lt;<span class="name">img</span>&gt;</span>标签并放到最底层。</span><br></pre></td></tr></table></figure>

            </div>
        </div>
    </article>

    
    
<nav class="article-nav">
  
    <a href="/2025/03/24/%E3%80%90%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E3%80%91-yml%E6%96%87%E4%BB%B6-YAML%E6%A0%BC%E5%BC%8F%E6%96%87%E4%BB%B6-JSON%E6%96%87%E4%BB%B6/" id="article-nav-newer" class="article-nav-link-wrap prev">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          【文件格式】.yml文件_YAML格式文件_JSON文件
        
      </div>
    </a>
  
  
    <a href="/2025/03/24/jQuery%E4%B8%80%E6%9C%AC%E9%80%9A/" id="article-nav-older" class="article-nav-link-wrap next">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">jQuery一本通</div>
    </a>
  
</nav>

    

    
</div>
    </div>
    <footer class="site-footer">
        <div class="global-width">
            <ul class="site-widget">
                
                <li class="widget widget-tag">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/basics/" rel="tag">basics</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frontend/" rel="tag">frontend</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/projects/" rel="tag">projects</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-category">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/daily-report/">daily_report</a><span class="category-list-count">51</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-recent_posts">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-body">
      <ul>
        
          <li>
            <a href="/2025/04/13/%E6%97%A5%E6%8A%A54-8/">日报4.8</a>
          </li>
        
          <li>
            <a href="/2025/04/08/%E6%B5%8B%E8%AF%95%E6%88%90%E9%95%BF%E8%B7%AF%E7%BA%BF/">测试成长路线</a>
          </li>
        
          <li>
            <a href="/2025/04/08/FE%E6%88%90%E9%95%BF%E8%B7%AF%E7%BA%BF/">FE成长路线</a>
          </li>
        
          <li>
            <a href="/2025/04/08/%E6%97%A5%E6%8A%A54-7/">日报4.7</a>
          </li>
        
          <li>
            <a href="/2025/04/08/%E6%97%A5%E6%8A%A54-6/">日报4.6</a>
          </li>
        
      </ul>
    </div>
  </div>

                </li>
                
            </ul>
        </div>
        <div class="site-info">
            <address>
                &copy; 2014 <a href="https://70v-yoyo.github.io">Yoyo&#39;s blog</a> All Right Reserved. <br/>
                Powered by <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a>. Theme by <a target="_blank" rel="noopener" href="http://zzoman.com">ZZOMAN</a>
                <p><a target="_blank" href="https://github.com/70v-Yoyo">My github</a></p>
            </address>
        </div>
    </footer> 
    
    
    <script src="/libs/jquery-1.11.3.min.js" type="text/javascript"></script>
    
    <script src="/libs/fancybox/jquery.fancybox.js" type="text/javascript"></script>
    
    <script src="/js/site_init.js" type="text/javascript"></script>
     
    <noscript>
        <style>
            article {
                position: absolute;
                width: 0;
                height: 0;
                overflow: hidden;
                opacity: 0;
            }

        </style>
        <h1>JS已被禁用</h1>
    </noscript>
</body>
</html>
