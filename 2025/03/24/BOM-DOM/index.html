<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    
    
    <title>BOM &amp; DOM | Yoyo&#39;s blog</title>
    
    <link rel="alternative" href="/atom.xml" title="Yoyo&#39;s blog" type="application/atom+xml">
    
    
<link rel="stylesheet" href="/css/style.css">

    
    <link rel="stylesheet" href="/libs/fancybox/jquery.fancybox.css" charset="utf-8">
    
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!-- hexo injector head_end start --><script src="./func.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
<body class="site">
    <!-- 遮罩层 -->
    <div id="mask-layer">
    </div>
    
    <header class="site-header">
        <h1 class="site-title"><a href="/">Yoyo&#39;s blog</a></h1>
        <nav class="site-nav">
            <ul class="nav">
                
                <li><a href="/">Home</a></li>
                
                <li><a href="/archives">Archives</a></li>
                
                
                <li><a href="/atom.xml" title="RSS Feed">rss</a></li>
                
                <li><a class="toggle-search" href="#search">search</a></li>
            </ul>
        </nav>
        <div class="site-search" id="search">
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://70v-yoyo.github.io"></form>
        </div>
        
            <div class="site-header-background" style="background-image:url('http://reumia.github.io/hexo-theme-zzoman2015/images/background-zzoman2015.jpg')"></div>
        
    </header>
    <div class="site-body">
        <div class="global-width">
    <article class="article" data-layout="post" data-slug="BOM-DOM">
        <div class="article-content">
            
            
            <header class="article-header">
                <div class="article-meta">
                    <a href="/2025/03/24/BOM-DOM/" class="article-date">
  <time datetime="2025-03-24T11:10:21.000Z">2025-03-24</time>
</a>
                    
                    
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/frontend/" rel="tag">frontend</a></li></ul>

                </div>
                
    <h1 class="article-title" itemprop="name">
      <a href="/2025/03/24/BOM-DOM/">BOM &amp; DOM</a>
    </h1>

            </header>
            
            <div class="article-body">
                <meta name="referrer" content="no-referrer" />

<blockquote>
<p>版本：250324</p>
</blockquote>
<hr>
<ul>
<li>Web API 是浏览器提供的一套操作浏览器功能和页面元素的 API ( BOM 和 DOM)。<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API">官方文档点击跳转</a><br>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></li>
<li>浏览器如何界面渲染的<br><img src="https://i-blog.csdnimg.cn/direct/5b02002bdb2e4992944e23f4a8403663.png" alt="在这里插入图片描述"><br>解析（Parser）HTML，生成DOM树(DOM Tree)<br>同时解析（Parser） CSS，生成样式规则 (Style Rules)<br>根据DOM树和样式规则，生成渲染树(Render Tree)<br>进行布局 Layout(回流&#x2F;重排):根据生成的渲染树，得到节点的几何信息（位置，大小）<br>进行绘制 Painting(重绘): 根据计算和获取的信息进行整个页面的绘制<br>Display: 展示在页面上</li>
<li>回流(重排)<br>当 Render Tree 中部分或者全部元素的尺寸、结构、布局等发生改变时，浏览器就会重新渲染部分或全部文档的过程称为回流。<br>会导致回流（重排）的操作：简单理解影响到布局了，就会有回流<br> 页面的首次刷新<br> 浏览器的窗口大小发生改变<br> 元素的大小或位置发生改变<br> 改变字体的大小<br> 内容的变化（如：input框的输入，图片的大小）<br> 激活css伪类 （如：:hover）<br> 脚本操作DOM（添加或者删除可见的DOM元素）</li>
<li>重绘<br>由于节点(元素)的样式的改变并不影响它在文档流中的位置和文档布局时(比如：color、background-color、outline等), 称为重绘。</li>
<li>重绘不一定引起回流，而回流一定会引起重绘。<br><img src="https://i-blog.csdnimg.cn/direct/59b00cc0b9e94804af06130dc9c915f3.png" alt="在这里插入图片描述"></li>
</ul>
<h1 id="JS运行机制"><a href="#JS运行机制" class="headerlink" title="JS运行机制"></a>JS运行机制</h1><ul>
<li>JS是单线程，不能同时进行；因为 Javascript 这门脚本语言诞生的使命所致——JavaScript 是为处理页面中用户的交互，以及操作 DOM 而诞生的。比如我们对<br>某个 DOM 元素进行添加和删除操作，不能同时进行。 应该先进行添加，之后再删除。如果 JS 执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞的感觉。</li>
<li>同步任务v.s.异步任务<br>为了解决这个问题，利用多核 CPU 的计算能力，HTML5 提出 Web Worker 标准，允许 JavaScript 脚本创建多个线程，但是子线程完全受主线程控制。于是，JS 中出现了<strong>同步任务</strong>和<strong>异步任务</strong>。<br>JS中所有任务可以分成两种，一种是同步任务（synchronous），另一种是异步任务（asynchronous）。本质区别： 这条流水线上各个流程的执行顺序不同。<br>同步任务指的是：在主线程【执行栈】上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；<br>异步任务指的是：不进入主线程、而进入【任务队列】的任务，当主线程中的任务运行完了，才会从”任务队列”取出异步任务放入主线程执行。比如你在做一件事情时，因为这件事情会花费很长时间，在做这件事的同时，你还可以去处理其他事情。比如做饭的异步做法，我们在烧水的同时，利用这10分钟，去切菜，炒菜。<br><img src="https://i-blog.csdnimg.cn/direct/d47e83bb11a9415a9ab30c94172b2c5c.png" alt="在这里插入图片描述"></li>
<li>JS执行机制：事件循环<br><img src="https://i-blog.csdnimg.cn/direct/fc52f2ed526b44958e547ec167f55bd1.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/direct/74da5c97e2414d4b9d2c91a9b3bb51ef.png" alt="在这里插入图片描述"></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下面三个片段的输出各是什么</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//1-&gt;2-&gt;3</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//将回调函数放入 宏任务队列，虽然 0ms 但仍然要等主线程任务执行完毕后才执行。</span></span><br><span class="line"><span class="comment">//即使 setTimeout 的时间是 0ms，它依然不会立即执行，而是等 同步任务执行完毕 才执行。</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//1-&gt;2-&gt;3</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br><span class="line"><span class="comment">//1 2 3（如果 3 秒不点击） </span></span><br><span class="line"><span class="comment">// 1 2 click 3（如果 3 秒内点击）</span></span><br></pre></td></tr></table></figure>
<h1 id="BOM浏览器对象模型"><a href="#BOM浏览器对象模型" class="headerlink" title="BOM浏览器对象模型"></a>BOM浏览器对象模型</h1><p>BOM (Browser Object Model，简称BOM) 是指浏览器对象模型，它提供了独立于内容的、可以与浏览器窗口进行互动的对象结构。通过BOM可以操作浏览器窗口，比如弹出框、控制浏览器跳转、获取分辨率等。其核心&#x2F;顶级对象是 window。<br>	BOM 由一系列相关的对象构成，并且每个对象都提供了很多方法与属性。<br>	BOM 缺乏标准，JavaScript 语法的标准化组织是 ECMA，DOM 的标准化组织是 W3C，BOM 最初是Netscape 浏览器标准的一部分。<br>BOM&gt;DOM，BOM包含DOM<br><img src="https://i-blog.csdnimg.cn/direct/8dca4dd4b5714dcea3ec5db5e277378f.png" alt="在这里插入图片描述"></p>
<ul>
<li>window对象<br>是js访问浏览器窗口的接口。<br>是一个全局对象，定义在全局作用域中的变量、函数都会变成window对象的属性和方法。<br>调用时可省略window，例如alert(),prompt()等</li>
<li><ul>
<li><strong>window.name 是 JavaScript 里一个独特的属性</strong>，它和一般的变量不同，具有持久性和跨页面共享的特性。window.name 在页面刷新后仍然保留</li>
</ul>
</li>
</ul>
<ol>
<li>一般来说，JavaScript 变量在页面刷新后会被重置，但 window.name 不会丢失，除非手动修改或关闭浏览器。window.name 可以在同一窗口的不同页面之间共享</li>
<li>如果用户在当前窗口导航到一个新页面，window.name 的值不会丢失，可以在新页面中访问它！</li>
<li>window.name 允许存储超长字符串<br>一般的 localStorage 最大存储约 5MB，而 window.name 可以存储比 localStorage 更多的数据，甚至可以用来存储 JSON 字符串。</li>
<li>安全性风险：由于 window.name 可以在不同页面之间共享，如果不小心泄露，可能会导致安全风险（如 XSS 攻击）。🚫 不要存储敏感数据（密码、token）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解决方案：跨域访问时重置 window.name</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hostname</span> !== <span class="string">&quot;yourwebsite.com&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>定时器<blockquote>
<p>回调函数：回调，就是回头调用的意思。上一件事干完，再回头再调用这个函数。例如：定时器中的调用函数，事件处理函数，也是回调函数。<br>以前我们讲的   element.onclick &#x3D; function(){}   或者  element.addEventListener(“click”, fn);   里面的 函数也是回调函数。</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//炸弹定时器</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(func,[延迟的毫秒数])</span><br><span class="line"><span class="comment">//这里面的函数称为回调函数callback</span></span><br><span class="line"><span class="comment">//window可省</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="built_in">clearTimeout</span>(timeoutID)<span class="comment">//取消之前调用setTimeout()的定时器</span></span><br><span class="line"><span class="comment">//递归setTimeout可以实现setInterval</span></span><br><span class="line"><span class="keyword">let</span> clock=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.clock&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myInterval</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">let</span> d=<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">	clock.<span class="property">innerText</span>=d.<span class="title function_">toLocaleString</span>();</span><br><span class="line">	<span class="built_in">setTimeout</span>(myInterval,<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">myInterval</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//闹钟定时器</span></span><br><span class="line"><span class="keyword">let</span> timeID=<span class="variable language_">window</span>.<span class="built_in">setInterval</span>(callback,[ms])</span><br><span class="line"><span class="comment">//重复调用一个函数，每隔这个时间就调用一次回调函数，第一次执行也是要间隔这ms数</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="built_in">clearInterval</span>(intervalID)</span><br><span class="line"><span class="comment">//注意 即使clear了timeID依然在，所以要timeID=null才行</span></span><br></pre></td></tr></table></figure>
<ul>
<li>this指向问题<br>this的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁，一般情况下this的最终指向的是那个调用它的对象。<br>1.全局作用域或者普通函数中this指向全局对象window（注意定时器里面的this指向window)<br>2.方法调用中谁调用this指向谁<br>3.构造函数中this指向构造函数的实例</li>
</ul>
<h2 id="window对象常见事件"><a href="#window对象常见事件" class="headerlink" title="window对象常见事件"></a>window对象常见事件</h2><p><code>window.open(&quot;http://www.w3school.com.cn&quot;,&quot;window2&quot;,&quot;width=600,height=400&quot;)</code>打开窗口<br>window对象有innerWidth和innerHeight属性，可以获取浏览器窗口的内部宽度和高度。内部宽高是指除去菜单栏、工具栏、边框等占位元素后，用于显示网页的净宽高。还有一个outerWidth和outerHeight属性，可以获取浏览器窗口的整个宽高。<br>兼容性：IE&lt;&#x3D;8不支持。</p>
<ul>
<li>页面（窗口）加载事件（2种）<blockquote>
<p>onload是页面内容全部加载完触发(包括图像、脚本文件、CSS<br>文件等)。DOMContentLoaded是仅DOM元素加载完触发，且从IE9开始支持。</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width = <span class="variable language_">window</span>.<span class="property">innerWidth</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>window.onload 是窗口 (页面）加载事件，<strong>当文档内容完全加载完成</strong>会触发该事件(包括图像、脚本文件、CSS 文件等), 就调用的处理函数。唯一，后覆盖前。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)<span class="comment">//没有唯一性限制</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br><span class="line"><span class="comment">//window也可以 不过最好是加在document上</span></span><br><span class="line"><span class="comment">//事件触发时仅DOM加载完成，不包括样式表、图片、flash等</span></span><br><span class="line"><span class="comment">//IE9以上才支持！！！</span></span><br><span class="line"><span class="comment">//如果页面的图片很多的话, 从用户访问到onload触发可能需要较长的时间, </span></span><br><span class="line"><span class="comment">//交互效果就不能实现，必然影响用户的体验，此时用 DOMContentLoaded 事件比较合适。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>调整窗口大小事件<br>经常利用这个事件完成响应式布局。 window.innerWidth 当前屏幕的宽度</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="comment">//window.onresize 是调整窗口大小加载事件,  当触发时就调用的处理函数。</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="screen对象"><a href="#screen对象" class="headerlink" title="screen对象"></a>screen对象</h2><p>screen对象表示屏幕的信息，常用的属性有：<br>screen.width：屏幕宽度，以像素为单位；<br>screen.height：屏幕高度，以像素为单位；<br>screen.colorDepth：返回颜色位数，如8、16、24。</p>
<h2 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h2><p>window对象给我们提供了location属性用于获取或设置窗体URL，也可以解析URL。因为这个属性返回的是一个对象location。</p>
<ul>
<li>location属性<br><img src="https://i-blog.csdnimg.cn/direct/df7aef6e0e4b403284ff2572138f677e.png" alt="在这里插入图片描述"><blockquote>
<p>如一个完整的url:<br><a target="_blank" rel="noopener" href="http://www.example.com:8080/path/index.html?a=1&b=2#TOP">http://www.example.com:8080/path/index.html?a=1&amp;b=2#TOP</a><br>location.protocol; &#x2F;&#x2F; ‘http’<br>location.host; &#x2F;&#x2F; ‘<a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a>‘<br>location.port; &#x2F;&#x2F; ‘8080’<br>location.pathname; &#x2F;&#x2F; ‘&#x2F;path&#x2F;index.html’<br>location.search; &#x2F;&#x2F; ‘?a&#x3D;1&amp;b&#x3D;2’<br>location.hash; &#x2F;&#x2F; ‘TOP’</p>
</blockquote>
</li>
<li>location对象的常见方法<br><img src="https://i-blog.csdnimg.cn/direct/f5fcf78611ea4204b2aa5db8d3118f44.png" alt="在这里插入图片描述"></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">			<span class="comment">// 记录浏览历史，所以可以实现后退功能</span></span><br><span class="line">            <span class="comment">// location.assign(&#x27;http://www.itcast.cn&#x27;);</span></span><br><span class="line">            <span class="comment">// 不记录浏览历史，所以不可以实现后退功能</span></span><br><span class="line">            <span class="comment">// location.replace(&#x27;http://www.itcast.cn&#x27;);</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">search</span>); <span class="comment">// ?uname=andy</span></span><br><span class="line"><span class="comment">// 1.先去掉？  substr(&#x27;起始的位置&#x27;，截取几个字符);</span></span><br><span class="line"><span class="keyword">var</span> params = location.<span class="property">search</span>.<span class="title function_">substr</span>(<span class="number">1</span>); <span class="comment">// uname=andy</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(params);</span><br><span class="line"><span class="comment">// 2. 利用=把字符串分割为数组 split(&#x27;=&#x27;);</span></span><br><span class="line"><span class="keyword">var</span> arr = params.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [&quot;uname&quot;, &quot;ANDY&quot;]</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="comment">// 3.把数据写入div中</span></span><br><span class="line">div.<span class="property">innerHTML</span> = arr[<span class="number">1</span>] + <span class="string">&#x27;欢迎您&#x27;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>URL (uniform resource locator)统一资源定位符<br><code>protocol://host[:port]/path/[?query]#fragment</code></li>
<li>利用location实现多页面参数传递<br>① 第一个登录页面，里面有提交表单， action 提交到 index.html页面<br>② 第二个页面，可以使用第一个页面的参数，这样实现了一个数据不同页面之间的传递效果<br>③ 第二个页面之所以可以使用第一个页面的数据，是利用了URL 里面的 location.search参数<br>④ 在第二个页面中，需要把这个参数提取。<br>⑤ 第一步去掉？ 利用 substr<br>⑥ 第二步 利用&#x3D;号分割 键 和 值 split(‘&#x3D;‘)<br>⑦ 第一个数组就是键 第二个数组就是值</li>
</ul>
<h2 id="navigator对象"><a href="#navigator对象" class="headerlink" title="navigator对象"></a>navigator对象</h2><p>navigator 对象包含有关浏览器的信息，它有很多属性，我们最常用的是 userAgent，该属性可以返回由客户机发送服务器的 user-agent 头部的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>((navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i</span>))) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;&quot;</span>;     <span class="comment">//手机</span></span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&quot;&quot;</span>;     <span class="comment">//电脑</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测 userAgent（浏览器信息）</span></span><br><span class="line">!(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">const</span> userAgent = navigator.<span class="property">userAgent</span></span><br><span class="line"><span class="comment">// 验证是否为Android或iPhone</span></span><br><span class="line"><span class="keyword">const</span> android = userAgent.<span class="title function_">match</span>(<span class="regexp">/(Android);?[\s\/]+([\d.]+)?/</span>)</span><br><span class="line"><span class="keyword">const</span> iphone = userAgent.<span class="title function_">match</span>(<span class="regexp">/(iPhone\sOS)\s([\d_]+)/</span>)</span><br><span class="line"><span class="comment">// 如果是Android或iPhone，则跳转至移动站点</span></span><br><span class="line"><span class="keyword">if</span> (android || iphone) &#123;</span><br><span class="line">location.<span class="property">href</span> = <span class="string">&#x27;http://m.itcast.cn&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>navigator对象表示浏览器的信息<br>navigator.appName：浏览器名称；<br>navigator.appVersion：浏览器版本；<br>navigator.language：浏览器设置的语言；<br>navigator.platform：操作系统类型；<br>navigator.userAgent：浏览器设定的User-Agent字符串。<br>navigator的信息可以很容易地被用户修改，所以JavaScript读取的值不一定是正确的。</p>
<h2 id="history对象"><a href="#history对象" class="headerlink" title="history对象"></a>history对象</h2><p>这个对象属于历史遗留对象，对于现代Web页面来说，由于大量使用AJAX和页面交互，简单粗暴地调用history.back()可能会让用户感到非常愤怒。任何情况，你都不应该使用history这个对象了<br>window对象给我们提供了一个 history对象，与浏览器历史记录进行交互。该对象包含用户（在浏览器窗口中）访问过的URL。history对象一般在实际开发中比较少用，但是会在一些 OA 办公系统中见到。<br><img src="https://i-blog.csdnimg.cn/direct/27625365c64349ceb9772f859855b053.png" alt="在这里插入图片描述"></p>
<h1 id="DOM文档对象模型"><a href="#DOM文档对象模型" class="headerlink" title="DOM文档对象模型"></a>DOM文档对象模型</h1><blockquote>
<p>核心要点：增删改查，创建，属性操作，事件操作</p>
<p>文档对象模型（Document Object Model，简称DOM），是W3C组织推荐的处理可扩展标记语言的标准编程接口。通过 DOM 提供的接口可以对页面上的各种元素进行操作（大小、位置、颜色等）。顶级对象是document</p>
</blockquote>
<ul>
<li>DOM树<br>DOM树 又称为文档树模型，把文档映射成树形结构，通过节点对象对其处理，处理的结果可以加入到当前的页面。<br><img src="https://i-blog.csdnimg.cn/direct/52415a23fcdf40ef8ac6572a815e93e5.png" alt="在这里插入图片描述"><br>文档：一个页面就是一个文档，DOM中使用document表示<br>节点：网页中的所有内容，在文档树中都是节点（标签、属性、文本、注释等），使用node表示<br>标签节点：网页中的所有标签，通常称为元素节点，又简称为“元素”，使用element表示<br>DOM把这些节点都看作对象。<br>节点至少拥有nodeType（节点类型）、nodeName（节点名称）和nodeValue（节点值）这三个基本属性。<br><img src="https://i-blog.csdnimg.cn/direct/712a02b7e675493ea4ecf7e62616ab8b.png" alt="在这里插入图片描述"></li>
<li>总结<br>创建</li>
</ul>
<ol>
<li>document.write</li>
<li>innerHTML</li>
<li>createElement<br>增</li>
<li>appendChild</li>
<li>insertBefore<br>删</li>
<li>removeChild<br>改<br>主要修改dom的元素属性，dom元素的内容、属性, 表单的值等</li>
<li>修改元素属性： src、href、title等</li>
<li>修改普通元素内容： innerHTML 、innerText<br>安全起见，尽量使用innerText</li>
<li>修改表单元素： value、type、disabled等</li>
<li>修改元素样式： style、className<br>查<br>主要获取查询dom的元素</li>
<li>DOM提供的API 方法： getElementById、getElementsByTagName 古老用法 不太推荐</li>
<li>H5提供的新方法： querySelector、querySelectorAll 提倡</li>
<li>利用节点操作获取元素： 父(parentNode)、子(children)、兄(previousElementSibling、nextElementSibling) 提倡<br> 属性操作<br>主要针对于自定义属性。</li>
<li>setAttribute：设置dom的属性值</li>
<li>getAttribute：得到dom的属性值</li>
<li>removeAttribute移除属性<br>事件操作<br>给元素注册事件， 采取 事件源.事件类型 &#x3D; 事件处理程序<br><img src="https://i-blog.csdnimg.cn/direct/99b5e89fe05a40f1ba709be9ee642296.png" alt="在这里插入图片描述"></li>
</ol>
<h2 id="一般获取元素"><a href="#一般获取元素" class="headerlink" title="一般获取元素"></a>一般获取元素</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(id)</span><br><span class="line">参数：id值，区分大小写的字符串</span><br><span class="line">返回值：元素对象 或 null</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;time&quot;</span>&gt;</span>2019-9-9<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 因为我们文档页面从上往下加载，所以先得有标签 所以我们script写到标签的下面</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> timer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;time&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(timer);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> timer);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.dir 打印我们返回的元素对象 更好的查看里面的属性和方法</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">dir</span>(timer);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">document.getElementsByTagName(&#x27;标签名&#x27;) 或者</span><br><span class="line">element.getElementsByTagName(&#x27;标签名&#x27;) </span><br><span class="line">作用：根据标签名获取元素对象</span><br><span class="line">参数：标签名</span><br><span class="line">返回值：元素对象集合（伪数组，数组元素是元素对象）</span><br><span class="line">注意：getElementsByTagName()获取到是动态集合，即：当页面增加了标签，这个集合中也就增加了元素。</span><br><span class="line"></span><br><span class="line">document.getElementsByClassName()是h5新增的方法，有浏览器兼容性问题</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1.获取元素 获取的是 tbody 里面所有的行</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> trs = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;tbody&#x27;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;tr&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. 利用循环绑定注册事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; trs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 3. 鼠标经过事件 onmouseover</span></span></span><br><span class="line"><span class="language-javascript">	trs[i].<span class="property">onmouseover</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// console.log(11);</span></span></span><br><span class="line"><span class="language-javascript">		<span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;bg&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 4. 鼠标离开事件 onmouseout</span></span></span><br><span class="line"><span class="language-javascript">   trs[i].<span class="property">onmouseout</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1. 全选和取消全选做法：  让下面所有复选框的checked属性（选中状态） 跟随 全选按钮即可</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 获取元素</span></span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> j_cbAll = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;j_cbAll&#x27;</span>); </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> j_tbs = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;j_tb&#x27;</span>).<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;input&#x27;</span>); </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 全选按钮注册事件</span></span></span><br><span class="line"><span class="language-javascript">        j_cbAll.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// this.checked 当前复选框的选中状态</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">checked</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; j_tbs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    j_tbs[i].<span class="property">checked</span> = <span class="variable language_">this</span>.<span class="property">checked</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">         &#125;</span></span><br><span class="line"><span class="language-javascript">         <span class="comment">// 给所有的子复选框注册单击事件</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; j_tbs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            j_tbs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// flag 控制全选按钮是否选中</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> flag = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 每次点击下面的复选框都要循环检查者4个小按钮是否全被选中</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; j_tbs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!j_tbs[i].<span class="property">checked</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        flag = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">break</span>; </span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 设置全选按钮的状态</span></span></span><br><span class="line"><span class="language-javascript">                j_cbAll.<span class="property">checked</span> = flag;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>querySelector 和 querySelectorAll 是两种常用的 DOM 查询方法。</li>
</ul>
<ol>
<li>querySelector只能选择第一个匹配的节点；</li>
<li>querySelectorAll可以选择多个节点,以”,”分隔开,返回的是个数组；</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">querySelector 返回指定选择器的第一个元素对象  </span><br><span class="line">里面的选择器需要加符号 .<span class="property">box</span>  #nav</span><br><span class="line"><span class="keyword">var</span> tab_list = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tab_list&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> lis = tab_list.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取特殊元素</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span> <span class="comment">//body元素对象</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">documentElement</span> <span class="comment">//html元素对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//tab栏</span></span><br><span class="line">        <span class="comment">// 获取元素</span></span><br><span class="line">        <span class="keyword">var</span> tab_list = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tab_list&#x27;</span>);</span><br><span class="line">        <span class="keyword">var</span> lis = tab_list.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">        <span class="keyword">var</span> items = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.item&#x27;</span>);</span><br><span class="line">        <span class="comment">// for循环，给选项卡绑定点击事件</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// 开始给5个小li 设置索引号 </span></span><br><span class="line">            lis[i].<span class="title function_">setAttribute</span>(<span class="string">&#x27;index&#x27;</span>, i);</span><br><span class="line">            lis[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">// 1. 上的模块选项卡，当前这一个底色会是红色，其余不变（排他思想）</span></span><br><span class="line">                <span class="comment">// 干掉所有人 其余的li清除 class 这个类</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    lis[i].<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 留下我自己 </span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;current&#x27;</span>;</span><br><span class="line">                <span class="comment">// 2. 下面的显示内容模块</span></span><br><span class="line">                <span class="keyword">var</span> index = <span class="variable language_">this</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;index&#x27;</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">                <span class="comment">// 干掉所有人 让其余的item 这些div 隐藏</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    items[i].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 留下我自己 让对应的item 显示出来</span></span><br><span class="line">                items[index].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="层级关系获取元素"><a href="#层级关系获取元素" class="headerlink" title="层级关系获取元素"></a>层级关系获取元素</h2><p><img src="https://i-blog.csdnimg.cn/direct/8916c3dc12ec4476a52bc2667c802287.png" alt="在这里插入图片描述"><br>节点就是前面DOM树中的所有节点，网页的所有内容都是节点。节点至少拥有nodeType（节点类型）、nodeName（节点名称）和nodeValue（节点值）这三个<br>基本属性。<br> 元素节点 nodeType 为 1<br> 属性节点 nodeType 为 2<br> 文本节点 nodeType 为 3 （文本节点包含文字、空格、换行等）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父级节点 返回最近的一个父节点或者null</span></span><br><span class="line">node.<span class="property">parentNode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//返回包含指定节点的子节点的集合，该集合为即时更新的集合。</span></span><br><span class="line"><span class="comment">//包含了所有的子节点，包括元素节点，文本节点等。</span></span><br><span class="line"><span class="comment">//如果只想要获得里面的元素节点，则需要专门处理。所以我们一般不提倡使用childNodes</span></span><br><span class="line">parentNode.<span class="property">childNodes</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//是一个只读属性，返回所有的子元素节点。它只返回子元素节点，其余节点不返回</span></span><br><span class="line"><span class="comment">//是得到了各个浏览器的支持</span></span><br><span class="line">parentNode.<span class="property">children</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第一个或最后一个 找不到则返回null。同样，也是包含所有的节点。</span></span><br><span class="line"><span class="comment">//子节点 不仅仅是元素节点</span></span><br><span class="line">parentNode.<span class="property">firstChild</span></span><br><span class="line">parentNode.<span class="property">lastChild</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//返回第一个子元素节点，找不到则返回null。</span></span><br><span class="line"><span class="comment">//注意：这两个方法有兼容性问题，IE9 以上才支持。</span></span><br><span class="line">parentNode.<span class="property">firstElementChild</span></span><br><span class="line">parentNode.<span class="property">lastElementChild</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//综上</span></span><br><span class="line"><span class="comment">//firstChild 和 lastChild 包含其他节点，操作不方便</span></span><br><span class="line"><span class="comment">//firstElementChild 和lastElementChild 又有兼容性问题</span></span><br><span class="line"><span class="comment">//如果要第一个子元素节点，使用 parentNode.chilren[0]</span></span><br><span class="line"><span class="comment">//如果是最后一个子元素节点，使用 parentNode.chilren[parentNode.chilren.length - 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//兄弟节点 返回当前元素的下一个兄弟节点，找不到则返回null。包含所有的节点。</span></span><br><span class="line">node.<span class="property">nextSibling</span></span><br><span class="line">node.<span class="property">previousSibling</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//兄弟元素节点 注意：这两个方法有兼容性问题， IE9 以上才支持。</span></span><br><span class="line">node.<span class="property">nextElementSibling</span></span><br><span class="line">node.<span class="property">previousElementSibling</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用自己封装的获取兄弟节点函数 同时解决兼容性</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getNextElementSibling</span>(<span class="params">element</span>) &#123;</span><br><span class="line">	 <span class="keyword">var</span> el = element;</span><br><span class="line">	 <span class="keyword">while</span> (el = el.<span class="property">nextSibling</span>) &#123;</span><br><span class="line">		 <span class="keyword">if</span> (el.<span class="property">nodeType</span> === <span class="number">1</span>) &#123;</span><br><span class="line">		 	<span class="keyword">return</span> el;</span><br><span class="line">		 &#125;</span><br><span class="line">	 &#125;</span><br><span class="line">	 <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下拉菜单</span></span><br><span class="line"><span class="keyword">var</span> nav = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.nav&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> lis = nav.<span class="property">children</span>; <span class="comment">// 得到4个小li</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span><br><span class="line">	lis[i].<span class="property">onmouseover</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">children</span>[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	lis[i].<span class="property">onmouseout</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">children</span>[<span class="number">1</span>].<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">node.<span class="title function_">cloneNode</span>()<span class="comment">//返回调用该方法的节点的一个副本。</span></span><br><span class="line"><span class="comment">//如果括号参数为空或者为 false ，则是浅拷贝，即只克隆复制节点本身，不克隆里面的子节点。</span></span><br><span class="line"><span class="comment">//如果括号参数为 true ，则是深度拷贝，会复制节点本身以及里面所有的子节点。</span></span><br><span class="line"></span><br><span class="line">parentNode.<span class="title function_">replaceChild</span>(newChild, oldChild);</span><br><span class="line"><span class="comment">//用指定的节点替换当前节点的一个子节点，并返回被替换掉的节点。</span></span><br></pre></td></tr></table></figure>
<h2 id="事件对象event"><a href="#事件对象event" class="headerlink" title="事件对象event"></a>事件对象event</h2><p>事件是可以被 JavaScript 侦测到的行为。简单理解： <strong>触发— 响应机制</strong>。</p>
<ul>
<li>事件三要素<br>事件源（谁）：触发事件的元素<br>事件类型（什么事件）： 例如 click 点击事件<br>事件处理程序（做啥）：事件触发后要执行的代码(函数形式)，事件处理函数</li>
<li>执行事件步骤<br>获取事件源，注册事件（绑定事件），添加事件处理程序（采用函数赋值形式）</li>
<li>常见的鼠标事件<br><img src="https://i-blog.csdnimg.cn/direct/3dda6264814f4558931b9fcebde467e6.png" alt="在这里插入图片描述"><br>mouseenter鼠标经过<br>mouseleave<br>window.addEventListener(‘scroll’, function () {            &#x2F;&#x2F; 执行的操作        })<br>window.onresize &#x3D; function () {} 或window.addEventListener(‘resize’, function () {            &#x2F;&#x2F; 执行的操作        })</li>
</ul>
<p>keydown键盘按下<br>keyup键盘抬起<br>keypress键盘按下并弹起，onkeypress 和前面2个的区别是，它不识别功能键，比如左右箭头，shift，ctrl 等。<br>键盘事件执行顺序：keydown-&gt;keypress-&gt;keyup<br>onkeydown 和 onkeyup 不区分字母大小写，onkeypress 区分字母大小写。<br>e.key 替代keyCode返回改建的ascii码</p>
<table>
<thead>
<tr>
<th>按键</th>
<th><code>e.key</code> 返回值</th>
</tr>
</thead>
<tbody><tr>
<td>A-Z</td>
<td><code>&quot;a&quot;</code> - <code>&quot;z&quot;</code>（小写，和键盘大小写无关）</td>
</tr>
<tr>
<td>数字 0-9</td>
<td><code>&quot;0&quot;</code> - <code>&quot;9&quot;</code></td>
</tr>
<tr>
<td>Enter</td>
<td><code>&quot;Enter&quot;</code></td>
</tr>
<tr>
<td>空格</td>
<td><code>&quot; &quot;</code>（空字符串）</td>
</tr>
<tr>
<td>方向键</td>
<td><code>&quot;ArrowUp&quot;</code>, <code>&quot;ArrowDown&quot;</code>, <code>&quot;ArrowLeft&quot;</code>, <code>&quot;ArrowRight&quot;</code></td>
</tr>
<tr>
<td>Shift</td>
<td><code>&quot;Shift&quot;</code></td>
</tr>
<tr>
<td>Ctrl</td>
<td><code>&quot;Control&quot;</code></td>
</tr>
<tr>
<td>Alt</td>
<td><code>&quot;Alt&quot;</code></td>
</tr>
<tr>
<td>Backspace</td>
<td><code>&quot;Backspace&quot;</code></td>
</tr>
<tr>
<td>Escape</td>
<td><code>&quot;Escape&quot;</code></td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//由事件参数对象的兼容性问题导致 </span></span><br><span class="line"> <span class="number">1.</span> 谷歌,火狐,<span class="title class_">IE9</span>+ : 事件参数对象随着事件处理函数的参数传入 </span><br><span class="line"> <span class="number">2.</span> <span class="title class_">IE8</span>以下: event对象必须作为<span class="variable language_">window</span>对象的一个属性(<span class="variable language_">window</span>.<span class="property">event</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按下回车可以生成留言信息</span></span><br><span class="line">    <span class="comment">// 事件侦听的三要素</span></span><br><span class="line">    <span class="comment">// textarea.addEventListener(&#x27;键盘事件&#x27;, function() &#123;发布信息&#125;)</span></span><br><span class="line">    textarea.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="comment">// 怎么知道用户按下了回车键呢？</span></span><br><span class="line">      <span class="comment">// console.log(e.keyCode) 已经废弃    只要 e.key === &#x27;Enter&#x27;</span></span><br><span class="line">      <span class="comment">// console.log(e.key)</span></span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;Enter&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// alert(11)</span></span><br><span class="line">        <span class="comment">// 发布新闻</span></span><br><span class="line">        <span class="comment">// 自动触发点击按钮</span></span><br><span class="line">        send.<span class="title function_">click</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">=</span><br><span class="line">        <span class="comment">// 获取输入框</span></span><br><span class="line">        <span class="keyword">var</span> search = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">		<span class="comment">// 给document注册keyup事件</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="comment">// 判断keyCode的值</span></span><br><span class="line">            <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">83</span>) &#123;</span><br><span class="line">                <span class="comment">// 触发输入框的获得焦点事件</span></span><br><span class="line">                search.<span class="title function_">focus</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>input表单<br>输入事件input,<br>改变事件change 如checkbox状态改变</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//应用场景：防止复制</span></span><br><span class="line"><span class="number">1.</span>禁止鼠标右键菜单</span><br><span class="line">contextmenu主要控制应该何时显示上下文菜单，主要用于程序员取消默认的上下文菜单</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;contextmenu&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">	e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;)</span><br><span class="line"><span class="number">2.</span>禁止鼠标选中（selectstart 开始选中）</span><br><span class="line"> <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;selectstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line"> e.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>唐伯虎<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 点击一个按钮，弹出对话框</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1. 事件是有三部分组成  事件源  事件类型  事件处理程序   我们也称为事件三要素</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//(1) 事件源 事件被触发的对象   谁  按钮</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//(2) 事件类型  如何触发 什么事件 比如鼠标点击(onclick) 还是鼠标经过 还是键盘按下</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//(3) 事件处理程序  通过一个函数赋值的方式 完成</span></span></span><br><span class="line"><span class="language-javascript">        btn.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&#x27;点秋香&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1.获取元素 获取的是 tbody 里面所有的行</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> trs = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;tbody&#x27;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;tr&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. 利用循环绑定注册事件</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; trs.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 3. 鼠标经过事件 onmouseover</span></span></span><br><span class="line"><span class="language-javascript">            trs[i].<span class="property">onmouseover</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// console.log(11);</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;bg&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 4. 鼠标离开事件 onmouseout</span></span></span><br><span class="line"><span class="language-javascript">            trs[i].<span class="property">onmouseout</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">className</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>两种注册事件的区别：</li>
</ul>
<ol>
<li>传统：on注册（L0）<br>同一个对象,后面注册的事件会覆盖前面注册(同一个事件)【唯一性】<br>直接使用null覆盖就可以实现事件的解绑<br>都是冒泡阶段执行的</li>
<li>事件监听注册（L2）addEventListener<br>后面注册的事件不会覆盖前面注册的事件(同一个事件)【多个监听器按注册顺序依次执行】<br>可以通过第三个参数去确定是在冒泡或者捕获阶段执行<br>必须使用removeEventListener(事件类型, 事件处理函数, 获取捕获或者冒泡阶段)<br>匿名函数无法被解绑<br>ie9以下版本IE不支持，使用attachEvent()代替</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//事件监听版本</span></span><br><span class="line">事件源.<span class="property">on</span>事件 = <span class="keyword">function</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line"><span class="comment">//若是用 L0 事件监听 即上述，则只有冒泡阶段，没有捕获</span></span><br><span class="line"></span><br><span class="line">元素.<span class="title function_">addEventListener</span>(<span class="string">&#x27;事件&#x27;</span>,执行的函数)<span class="comment">//IE9以后才支持addEventListener</span></span><br><span class="line"><span class="comment">//低版本的IE可以使用attacheEvent代替addEventListener</span></span><br><span class="line">target.<span class="title function_">addEventListener</span>(type, listener, options);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;点击事件触发&quot;</span>);</span><br><span class="line">&#125;, &#123; <span class="attr">once</span>: <span class="literal">true</span> &#125;); <span class="comment">// 事件触发一次后自动移除</span></span><br><span class="line">options 配置对象的属性：</span><br><span class="line">属性名	类型	说明</span><br><span class="line">capture	<span class="title class_">Boolean</span>	是否在捕获阶段执行监听器（默认为 <span class="literal">false</span>，即冒泡阶段执行）。</span><br><span class="line">once	<span class="title class_">Boolean</span>	事件触发后监听器是否自动移除（默认为 <span class="literal">false</span>）。</span><br><span class="line">passive	<span class="title class_">Boolean</span>	是否不会调用 event.<span class="title function_">preventDefault</span>()（默认为 <span class="literal">false</span>）。</span><br><span class="line"></span><br><span class="line">eventTarget.<span class="title function_">attachEvent</span>(eventNameWithOn, callback)</span><br><span class="line">eventNameWithOn：事件类型字符串，比如 onclick 、onmouseover ，这里要带 on</span><br><span class="line">callback： 事件处理函数，当目标触发事件时回调函数被调用</span><br><span class="line"><span class="comment">//注意：IE8 及早期版本支持</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addEventListener</span>(<span class="params">element, eventName, fn</span>) &#123;</span><br><span class="line"> <span class="comment">// 判断当前浏览器是否支持 addEventListener 方法</span></span><br><span class="line"> <span class="keyword">if</span> (element.<span class="property">addEventListener</span>) &#123;</span><br><span class="line"> element.<span class="title function_">addEventListener</span>(eventName, fn); <span class="comment">// 第三个参数 默认是false</span></span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">attachEvent</span>) &#123;</span><br><span class="line"> element.<span class="title function_">attachEvent</span>(<span class="string">&#x27;on&#x27;</span> + eventName, fn);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="comment">// 相当于 element.onclick = fn;</span></span><br><span class="line"> element[<span class="string">&#x27;on&#x27;</span> + eventName] = fn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params">evt</span>)&#123;  <span class="keyword">var</span> e=<span class="variable language_">window</span>.<span class="property">event</span>||event;  &#125;;</span><br><span class="line"><span class="comment">//低版本的IE，通过 window.event获取事件对象。</span></span><br><span class="line">e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除事件</span></span><br><span class="line">eventTarget.<span class="property">onclick</span> = <span class="literal">null</span>;</span><br><span class="line">eventTarget.<span class="title function_">removeEventListener</span>(type, listener[, useCapture]);</span><br><span class="line">eventTarget.<span class="title function_">detachEvent</span>(eventNameWithOn, callback);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeEventListener</span>(<span class="params">element, eventName, fn</span>) &#123;</span><br><span class="line"> <span class="comment">// 判断当前浏览器是否支持 removeEventListener 方法</span></span><br><span class="line"> <span class="keyword">if</span> (element.<span class="property">removeEventListener</span>) &#123;</span><br><span class="line"> element.<span class="title function_">removeEventListener</span>(eventName, fn); <span class="comment">// 第三个参数 默认是false</span></span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">detachEvent</span>) &#123;</span><br><span class="line"> element.<span class="title function_">detachEvent</span>(<span class="string">&#x27;on&#x27;</span> + eventName, fn);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> element[<span class="string">&#x27;on&#x27;</span> + eventName] = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>e.target 和 this 的区别：<br> this 是事件绑定的元素， 这个函数的调用者（绑定这个事件的元素）<br> e.target 是事件触发的元素。<blockquote>
<p>正常情况下target 和 this是一致的，但有一种情况不同，那就是在事件冒泡时单击子元素，父元素的事件处理函数也会被触发执行<br>这时候this指向的是父元素，因为它是绑定事件的元素对象，<br>而target指向的是子元素，因为他是触发事件的那个具体元素对象。</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>abc<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ul.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// 我们给ul 绑定了事件  那么this 就指向ul  </span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// ul</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">// e.target 触发了事件的对象 我们点击的是li e.target 指向的就是li</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>); <span class="comment">// li</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>事件流：页面接收事件的顺序<blockquote>
<p>当你单击一个div时，同时你也单击了div的父元素，甚至整个页面。那么是先执行父元素的单击事件，还是先执行div的单击事件 ？？？冒泡阶段 如果addEventListener 第三个参数是 false 或者 省略 ，son -&gt; father -&gt;body -&gt; html -&gt; document；如果addEventListener() 第三个参数是 true 那么在捕获阶段触发，document -&gt; html -&gt; body -&gt; father -&gt; son</p>
</blockquote>
</li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/direct/22767d46d75b4e5faf852a5c26ce52a7.png" alt="在这里插入图片描述"><br>在 JavaScript 中，事件流有 三个阶段：<br>捕获阶段（Capturing Phase）：事件从 window 开始，沿 DOM 树向目标元素传播。<br>目标阶段（Target Phase）：事件到达目标元素，并执行其绑定的监听器。<br>冒泡阶段（Bubbling Phase）：事件从目标元素开始，沿 DOM 树向 window 反向传播。当一个元素的事件被触发时，同样的事件将会在该元素的所有祖先元素中依次被触发。简单理解：当一个元素触发事件后，会依次向上调用所有父级元素的同名事件，事件冒泡是默认存在的<br>默认情况下，事件监听器在冒泡阶段执行，但可以通过 addEventListener() 的 capture 选项改变。<br>onclick 和 attachEvent 只能得到冒泡阶段。<br>JS 代码中只能执行捕获或者冒泡其中的一个阶段。<br>实际开发中我们很少使用事件捕获，我们更关注事件冒泡。有些事件是没有冒泡的，比如 onblur、onfocus、onmouseenter、onmouseleave。</p>
<ul>
<li>事件对象event&#x2F;e<br>在事件绑定的回调函数的第一个参数就是事件对象<br>事件触发时就会产生事件对象,事件对象有很多方法和属性，保存了事件相关的信息，获取时有兼容性问题，使用事件对象可以阻止事件冒泡和默认行为<br>当我们注册事件时， event 对象就会被系统自动创建，并依次传递给事件监听器（事件处理函数）。<br>常用属性<br>1.type获取当前的事件类型<br>2.clientX&#x2F;clientY获取光标相对于浏览器可见窗口左上角的位置<br>3.offsetX&#x2F;offsetY获取光标相对于当前DOM元素左上角的位置<br>4.key用户按下的键盘键的值，现在不提倡使用keyCode已废弃<br>5.pageX&#x2F;pageY 鼠标相当于文档页面的X坐标&#x2F;Y坐标 IE9+支持<br>6.screenX&#x2F;screenY 鼠标相对于电脑屏幕的X坐标&#x2F;Y坐标<br><img src="https://i-blog.csdnimg.cn/direct/a2c55f6226974fd7b4c05dc8910b706a.png" alt="在这里插入图片描述"></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pic = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> x = e.<span class="property">pageX</span>;</span><br><span class="line"><span class="keyword">var</span> y = e.<span class="property">pageY</span>;</span><br><span class="line">pic.<span class="property">style</span>.<span class="property">top</span> = y - <span class="number">40</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">pic.<span class="property">style</span>.<span class="property">left</span> = x - <span class="number">50</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>阻止事件流动<br>因为默认就有冒泡模式的存在，所以容易导致事件影响到父级元素<br>若想把事件就限制在当前元素内，就需要阻止事件流动<br>阻止事件流动需要拿到事件对象<br><code>e.stopPropagation()</code>此方法可以阻断事件流动传播，不光在冒泡阶段有效，捕获阶段也有效<br>非标准写法：IE 6-8 利用事件对象 cancelBubble 属性<code>e.cancelBubble = true;</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(e &amp;&amp; e.<span class="property">stopPropagation</span>)&#123;</span><br><span class="line"> e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> <span class="variable language_">window</span>.<span class="property">event</span>.<span class="property">cancelBubble</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>阻止默认行为，比如链接点击不跳转，表单域的跳转<br><code>e.preventDefault()</code><br><code>// 低版本浏览器 ie678  returnValue  属性 e.returnValue = false;</code></li>
<li>鼠标经过事件：mouseenter 和mouseover的区别<br> mouseover 和 mouseout 会有冒泡效果<br> mouseenter 和 mouseleave 没有冒泡效果(推荐)</li>
<li>mouseover 鼠标经过自身盒子会触发，经过子盒子还会触发。mouseenter  只会经过自身盒子触发<br> 之所以这样，就是因为mouseenter不会冒泡，跟mouseenter搭配鼠标离开 mouseleave  同样不会冒泡</li>
<li>事件委托（代理、委派，在 jQuery 里面称为事件委派）是利用事件流的特征解决一些开发需求的知识技巧<br> 优点：给父级元素加事件（可以提高性能）<br> 原理：事件委托其实是利用事件冒泡的特点<br> 实现：事件对象.target 可以获得真正触发事件的元素<blockquote>
<p>例子：点击每个 li 都会弹出对话框，以前需要给每个 li 注册事件，是非常辛苦的，而且访问 DOM 的次数越多，这就会延长整个页面的交互就绪时间</p>
</blockquote>
</li>
</ul>
<p>事件委托的原理<br>不是每个子节点单独设置事件监听器，而是事件监听器设置在其父节点上，然后利用冒泡原理影响设置每个子节点。<br>以上案例：给 ul 注册点击事件，然后利用事件对象的 target 来找到当前点击的 li，因为点击 li，事件会冒泡到 ul 上，<br>ul 有注册事件，就会触发事件监听器。<br>事件委托的作用：我们只操作了一次 DOM ，提高了程序的性能。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>知否知否，点我应有弹框在手！<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 事件委托的核心原理：给父节点添加侦听器， 利用事件冒泡影响每一个子节点</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    ul.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// e.target 这个可以得到我们点击的对象</span></span></span><br><span class="line"><span class="language-javascript">        e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;pink&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="JS-特效三大系列【offset】【scroll】【client】"><a href="#JS-特效三大系列【offset】【scroll】【client】" class="headerlink" title="JS 特效三大系列【offset】【scroll】【client】"></a>JS 特效三大系列【offset】【scroll】【client】</h2><h3 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h3><ol>
<li>获得元素和其父元素的距离</li>
<li>获得元素自身的大小（宽度高度）</li>
<li>注意：返回的数值都不带单位<br><img src="https://i-blog.csdnimg.cn/direct/d0d515dde6254bf4b3001afbc1d1785f.png" alt="在这里插入图片描述"></li>
</ol>
<ul>
<li>offset 与 style 区别<br>与  style . ( left  &#x2F;  top  &#x2F;  width  &#x2F;  height ) 的区别:</li>
</ul>
<ol>
<li>offset系列的是只读属性,而通过style的方式可以读写 </li>
<li>offset系列返回的数值类型(结果四舍五入),style返回的是字符串 </li>
<li>style 可以返回没有定位的元素的left值和top值,而 offsetLeft 和 offsetTop 不可以</li>
</ol>
<ul>
<li><ul>
<li>offset 【想要获取元素大小位置，用offset】<br>offset 可以得到任意样式表中的样式值（行内行外都可以）<br>offset 系列获得的数值是没有单位的<br>offsetWidth 包含padding+border+width<br>offsetWidth 等属性是只读属性，只能获取不能赋值<br>可视宽高，如果盒子隐藏，则获取结果为0<br><img src="https://i-blog.csdnimg.cn/direct/d0d725dbdb6643c098cf4d0bf3800a04.png" alt="在这里插入图片描述"></li>
</ul>
</li>
<li><ul>
<li>style【想要给元素更改值，用style改变】<br>style 只能得到行内样式表中的样式值<br>style.width 获得的是带有单位的字符串<br>style.width 获得不包含padding和border 的值<br>style.width 是可读写属性，可以获取也可以赋值</li>
</ul>
</li>
<li>案例：获取鼠标在盒子内的坐标</li>
</ul>
<ol>
<li>我们在盒子内点击，想要得到鼠标距离盒子左右的距离。</li>
<li>首先得到鼠标在页面中的坐标（e.pageX, e.pageY）</li>
<li>其次得到盒子在页面中的距离 ( box.offsetLeft, box.offsetTop)</li>
<li>用鼠标距离页面的坐标减去盒子在页面中的距离，得到 鼠标在盒子内的坐标</li>
<li>如果想要移动一下鼠标，就要获取最新的坐标，使用鼠标移动</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.box&#x27;</span>);</span><br><span class="line">box.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> x = e.<span class="property">pageX</span> - <span class="variable language_">this</span>.<span class="property">offsetLeft</span>;</span><br><span class="line"><span class="keyword">var</span> y = e.<span class="property">pageY</span> - <span class="variable language_">this</span>.<span class="property">offsetTop</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;x坐标是&#x27;</span> + x + <span class="string">&#x27; y坐标是&#x27;</span> + y;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//offset</span></span><br><span class="line">offsetLeft : 用于获取元素到最近的定位父盒子的左侧距离 </span><br><span class="line">* 计算方式: 当前元素的左边框的左侧到定位父盒子的左边框右侧 </span><br><span class="line">* 如果父级盒子没有定位, 那么会接着往上找有定位的盒子 </span><br><span class="line">* 如果上级元素都没有定位,那么最后距离是与body的left值 </span><br><span class="line"></span><br><span class="line">offsetTop : 用于获取元素到最近定位父盒子的顶部距离</span><br><span class="line"> * 计算方式:当前元素的上边框的上侧到定位父盒子的上边框下侧 </span><br><span class="line"> * 如果父级盒子没有定位,那么会接着往上找有定位的盒子 </span><br><span class="line"> * 如果上级元素都没有定位,那么最后距离是与body的top值 </span><br><span class="line"> </span><br><span class="line">offsetWidth :用于获取元素的真实宽度(除了margin以外的宽度) </span><br><span class="line"> </span><br><span class="line">offsetHeight : 用于获取元素的真实高度(除了margin以外的高度) </span><br><span class="line"> </span><br><span class="line">offsetParent :用于获取该元素中有定位的最近父级元素 </span><br><span class="line">* 如果当前元素的父级元素都没有进行定位,那么offsetParent为body</span><br></pre></td></tr></table></figure>
<h3 id="client"><a href="#client" class="headerlink" title="client"></a>client</h3><p><img src="https://i-blog.csdnimg.cn/direct/ca83514510154689bc88db19932d63a8.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/direct/3052ee6aaa3e40b0b154255666478157.png" alt="在这里插入图片描述"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//client 网页可视区域</span></span><br><span class="line"><span class="number">1.</span> clientWidth : 获取网页可视区域的宽度 </span><br><span class="line"><span class="number">2.</span> <span class="attr">clientHeight</span>: 获取网页可视区域的高度 </span><br><span class="line"><span class="number">3.</span> clientX : 获取鼠标事件发生时的应用客户端区域的水平坐标 </span><br><span class="line"><span class="number">4.</span> clientY : 获取鼠标事件发生时的应用客户端区域的垂直坐标</span><br><span class="line"></span><br><span class="line"><span class="comment">//兼容问题</span></span><br><span class="line"> <span class="comment">//由浏览器对象不同导致 </span></span><br><span class="line"> * 未声明 <span class="attr">DTD</span>: 谷歌,火狐,<span class="title class_">IE9</span>+支持 <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>/clientHeight </span><br><span class="line"> * 已经声明<span class="attr">DTD</span>:<span class="title class_">IE8</span>以下支持 <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>/clientHeight </span><br><span class="line"> * 火狐/谷歌/ie9+以上支持的 <span class="variable language_">window</span>.<span class="property">innerWidth</span>/innerHeight</span><br><span class="line"><span class="comment">//兼容代码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">client</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">innerWidth</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&quot;width&quot;</span>: <span class="variable language_">window</span>.<span class="property">innerWidth</span>,</span><br><span class="line">      <span class="string">&quot;height&quot;</span>: <span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">compatMode</span> === <span class="string">&quot;CSS1Compat&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&quot;width&quot;</span>: <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span>,</span><br><span class="line">      <span class="comment">//屏幕宽度</span></span><br><span class="line">      <span class="string">&quot;height&quot;</span>: <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="string">&quot;width&quot;</span>: <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>,</span><br><span class="line">      <span class="string">&quot;height&quot;</span>: <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>淘宝 flexible.js 源码分析<br>立即执行函数 (function(){})()  或者 (function(){}())<br>主要作用： 创建一个独立的作用域。 避免了命名冲突问题<br>下面三种情况都会刷新页面都会触发 load 事件。<br>1.a标签的超链接<br>2.F5或者刷新按钮（强制刷新）<br>3.前进后退按钮<br>但是 火狐中，有个特点，有个“往返缓存”，这个缓存中不仅保存着页面数据，还保存了DOM和JavaScript的状态；实际上是将整个页面都保存在了内存里。<br>所以此时后退按钮不能刷新页面。<br>此时可以使用 pageshow事件来触发。这个事件在页面显示时触发，无论页面是否来自缓存。在重新加载页面中，pageshow会在load事件触发后触发；根据事件对象中的persisted来判断是否是缓存中的页面触发的pageshow事件&#96;注意这个事件给window添加。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pageshow&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">persisted</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面来自缓存&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面是重新加载的&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> <span class="title function_">flexible</span>(<span class="params"><span class="variable language_">window</span>, <span class="variable language_">document</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 获取的html 的根元素</span></span><br><span class="line">    <span class="keyword">var</span> docEl = <span class="variable language_">document</span>.<span class="property">documentElement</span></span><br><span class="line">        <span class="comment">// dpr 物理像素比</span></span><br><span class="line">    <span class="keyword">var</span> dpr = <span class="variable language_">window</span>.<span class="property">devicePixelRatio</span> || <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// adjust body font size  设置我们body 的字体大小</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">setBodyFontSize</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 如果页面中有body 这个元素 就设置body的字体大小</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>) &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">fontSize</span> = (<span class="number">12</span> * dpr) + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 如果页面中没有body 这个元素，则等着 我们页面主要的DOM元素加载完毕再去设置body</span></span><br><span class="line">            <span class="comment">// 的字体大小</span></span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, setBodyFontSize)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">setBodyFontSize</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set 1rem = viewWidth / 10    设置我们html 元素的文字大小</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">setRemUnit</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> rem = docEl.<span class="property">clientWidth</span> / <span class="number">10</span></span><br><span class="line">        docEl.<span class="property">style</span>.<span class="property">fontSize</span> = rem + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setRemUnit</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reset rem unit on page resize  当我们页面尺寸大小发生变化的时候，要重新设置下rem 的大小</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, setRemUnit)</span><br><span class="line">        <span class="comment">// pageshow 是我们重新加载页面触发的事件</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pageshow&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="comment">// e.persisted 返回的是true 就是说如果这个页面是从缓存取过来的页面，也需要从新计算一下rem 的大小</span></span><br><span class="line">        <span class="keyword">if</span> (e.<span class="property">persisted</span>) &#123;</span><br><span class="line">            <span class="title function_">setRemUnit</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// detect 0.5px supports  有些移动端的浏览器不支持0.5像素的写法</span></span><br><span class="line">    <span class="keyword">if</span> (dpr &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> fakeBody = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line">        <span class="keyword">var</span> testElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">        testElement.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;.5px solid transparent&#x27;</span></span><br><span class="line">        fakeBody.<span class="title function_">appendChild</span>(testElement)</span><br><span class="line">        docEl.<span class="title function_">appendChild</span>(fakeBody)</span><br><span class="line">        <span class="keyword">if</span> (testElement.<span class="property">offsetHeight</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            docEl.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;hairlines&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        docEl.<span class="title function_">removeChild</span>(fakeBody)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;(<span class="variable language_">window</span>, <span class="variable language_">document</span>))</span><br></pre></td></tr></table></figure>
<h3 id="scroll"><a href="#scroll" class="headerlink" title="scroll"></a>scroll</h3><p>如果浏览器的高（或宽）度不足以显示整个页面时，会自动出现滚动条。当滚动条向下滚动时，页面上面被隐藏掉的高度，我们就称为页面被卷去的头部。滚动条在滚动时会触发 onscroll事件。<br><code>window.scroll(x,y)</code>滚动窗口至文档中的特定位置。注意，里面的x和y 不跟单位，直接写数字<br>scrollLeft和scrollTop这两个属性是可以修改的<br>检测页面滚动的头部距离（被卷去的头部）用document.documentElement.scrollTop,document.documentElement返回HTML元素对象<br><img src="https://i-blog.csdnimg.cn/direct/f1931051a36b43ec8bc5f7d08654ec96.png" alt="在这里插入图片描述"></p>
<ol>
<li>页面被卷去的头部：可以通过window.pageYOffset 获得  如果是被卷去的左侧window.pageXOffset</li>
<li>注意，元素被卷去的头部是element.scrollTop  , 如果是页面被卷去的头部 则是 window.pageYOffset</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//兼容问题</span></span><br><span class="line">* 未声明 <span class="attr">DTD</span>: 谷歌,火狐,<span class="title class_">IE9</span>+支持 <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span>/scrollLeft </span><br><span class="line">* 已经声明<span class="attr">DTD</span>:<span class="title class_">IE8</span>以下支持 <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span>/scrollLeft </span><br><span class="line">* 火狐/谷歌/ie9+以上支持的 <span class="variable language_">window</span>.<span class="property">pageYOffest</span>/pageXOffest</span><br><span class="line"><span class="comment">//兼容代码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">left</span>: <span class="variable language_">window</span>.<span class="property">pageXOffset</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollLeft</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollLeft</span> || <span class="number">0</span>,</span><br><span class="line">    <span class="attr">top</span>: <span class="variable language_">window</span>.<span class="property">pageYOffset</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> || <span class="number">0</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getScroll</span>().<span class="property">left</span><span class="comment">//使用</span></span><br></pre></td></tr></table></figure>
<ul>
<li>总结</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">网页可见区域宽： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>; </span><br><span class="line">网页可见区域高： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>; </span><br><span class="line"></span><br><span class="line">网页真实元素宽： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">offsetWidth</span> (包括边线的宽); </span><br><span class="line">网页真实元素高： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">offsetHeight</span> (包括边线的宽); </span><br><span class="line"></span><br><span class="line">网页正文全文宽： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollWidth</span>; </span><br><span class="line">网页正文全文高： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>; </span><br><span class="line"></span><br><span class="line">网页被卷去的高： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span>; </span><br><span class="line">网页被卷去的左： <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollLeft</span>; </span><br><span class="line"></span><br><span class="line">浏览器窗口的顶部边缘与屏幕的顶部边缘之间的距离： <span class="variable language_">window</span>.<span class="property">screenTop</span>; </span><br><span class="line">浏览器窗口的左边缘与屏幕的左边缘之间的距离： <span class="variable language_">window</span>.<span class="property">screenLeft</span>; </span><br><span class="line"></span><br><span class="line">屏幕分辨率的高： <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">height</span>; </span><br><span class="line">屏幕分辨率的宽： <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">width</span>; </span><br><span class="line"></span><br><span class="line">屏幕可用工作区高度： <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">availHeight</span>; </span><br><span class="line">屏幕可用工作区宽度： <span class="variable language_">window</span>.<span class="property">screen</span>.<span class="property">availWidth</span>;</span><br></pre></td></tr></table></figure>
<p><img src="https://i-blog.csdnimg.cn/direct/2446813486184604aa4cee5da345ea76.png" alt="在这里插入图片描述"><br>他们主要用法：<br>1.offset系列 经常用于获得元素位置    offsetLeft  offsetTop<br>2.client经常用于获取元素大小  clientWidth clientHeight<br>3.scroll 经常用于获取滚动距离 scrollTop  scrollLeft<br>4.注意页面滚动的距离通过 window.pageXOffset  获得</p>
<h2 id="操作元素"><a href="#操作元素" class="headerlink" title="操作元素"></a>操作元素</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="property">innerText</span> 不解析html标签，去除空格、换行</span><br><span class="line">element.<span class="property">innerHTML</span> 不去除</span><br><span class="line">两者的区别在于读取属性时，innerText不返回隐藏元素的文本，而textContent返回所有文本。</span><br><span class="line"><span class="variable constant_">IE</span>&lt;<span class="number">9</span>不支持textContent。</span><br><span class="line"><span class="variable constant_">HTML</span> 里隐藏文本框有多种方式</span><br><span class="line"><span class="number">1</span>、type=<span class="string">&quot;hidden&quot;</span>     隐藏且不占位置。</span><br><span class="line"><span class="number">2</span>、style=<span class="string">&quot;display:none;&quot;</span>    隐藏任何元素，文本框也不例外</span><br><span class="line"><span class="number">3</span>、style=<span class="string">&quot;visibility:hidden;&quot;</span>     隐藏后还占位置</span><br><span class="line"></span><br><span class="line"><span class="comment">//常见属性</span></span><br><span class="line">src,href</span><br><span class="line">id,alt,title</span><br><span class="line"></span><br><span class="line"><span class="comment">//表单元素</span></span><br><span class="line">type,value,checked,selected,disabled</span><br><span class="line">btn.<span class="property">disabled</span> = <span class="literal">false</span>; <span class="comment">// 启用按钮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//样式属性</span></span><br><span class="line">element.<span class="property">style</span><span class="comment">//是一个对象，里面存储行内样式键值对</span></span><br><span class="line"><span class="comment">//当js修改样式时为行内样式，优先级高</span></span><br><span class="line"><span class="comment">//获取不到类定义的样式</span></span><br><span class="line"><span class="comment">//样式名字带-的改成驼峰命名 因为在js中会被解析成减法</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">backgroundImage</span> = <span class="string">&#x27;url(&#x27;</span> + <span class="variable language_">this</span>.<span class="property">src</span> + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">element.<span class="property">className</span><span class="comment">//覆盖原先类名 class是关键字不能用</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;class1&quot;</span>, <span class="string">&quot;class2&quot;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tab .active&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">.<span class="title function_">remove</span>(class1,class2,..);</span><br><span class="line">.<span class="title function_">toggle</span>(<span class="keyword">class</span>)<span class="comment">//切换（添加或移除）指定的 CSS 类。如果该类已存在，则移除它；如果不存在，则添加它。</span></span><br><span class="line"></span><br><span class="line">box.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义属性</span></span><br><span class="line">element.属性<span class="comment">//获取内置属性</span></span><br><span class="line">element.<span class="title function_">getAttribute</span>(<span class="string">&#x27;attr_name&#x27;</span>)<span class="comment">//获取自定义属性</span></span><br><span class="line">element.<span class="title function_">setAttribute</span>(<span class="string">&#x27;attr_name&#x27;</span>,<span class="string">&#x27;value&#x27;</span>)</span><br><span class="line">element.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;属性&#x27;</span>);</span><br><span class="line"></span><br><span class="line">element.属性=<span class="string">&#x27;value&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//H5自定义属性目的：为了保存并使用数据。有些数据保存到页面中而不用保存到数据库中。</span></span><br><span class="line"><span class="comment">//H5规定自定义属性data-开头做为属性名并且赋值。</span></span><br><span class="line"><span class="comment">//但是有些自定义属性很容易引起歧义，不容易判断是元素的内置属性还是自定义属性。</span></span><br><span class="line">&lt;div data-index=<span class="string">&quot;1&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">element.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-index&#x27;</span>,<span class="number">2</span>)</span><br><span class="line"><span class="variable constant_">H5</span>新增 element.<span class="property">dataset</span>.<span class="property">index</span> 或者 element.<span class="property">dataset</span>[<span class="string">&#x27;index&#x27;</span>] </span><br><span class="line"><span class="comment">//ie11才开始支持</span></span><br><span class="line"></span><br><span class="line"> 		<span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">        <span class="comment">// console.log(div.getTime);</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="title function_">getAttribute</span>(<span class="string">&#x27;getTime&#x27;</span>));</span><br><span class="line">        div.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-time&#x27;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-index&#x27;</span>));</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-list-name&#x27;</span>));</span><br><span class="line">        <span class="comment">// h5新增的获取自定义属性的方法 它只能获取data-开头的</span></span><br><span class="line">        <span class="comment">//ie11才开始支持</span></span><br><span class="line">        <span class="comment">// dataset 是一个集合里面存放了所有以data开头的自定义属性</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>.<span class="property">index</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>[<span class="string">&#x27;index&#x27;</span>]);</span><br><span class="line">        <span class="comment">// 如果自定义属性里面有多个-链接的单词，我们获取的时候采取 驼峰命名法</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>.<span class="property">listName</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">dataset</span>[<span class="string">&#x27;listName&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定时器-间歇函数 使用定时器函数重复执行代码</span></span><br><span class="line"><span class="keyword">let</span> timerId = <span class="built_in">setInterval</span>(回调函数, 间隔时间ms)</span><br><span class="line"><span class="built_in">clearInterval</span>(timerId)</span><br><span class="line"><span class="comment">//定时器需要等待，所以后面的代码先执行</span></span><br><span class="line"><span class="comment">//每一次调用定时器都会产生一个新定时器</span></span><br><span class="line"><span class="built_in">setInterval</span>(repeat,<span class="number">1000</span>)</span><br><span class="line"><span class="comment">//实战：轮播图</span></span><br><span class="line"><span class="keyword">let</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">&quot;./data.txt&quot;</span>)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">text</span>())</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">const</span> jsondata=<span class="title class_">JSON</span>.<span class="title function_">parse</span>(data);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(jsondata);</span><br><span class="line">                <span class="keyword">let</span> timeID=<span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">//不能在这个()里放入参数 因为此时的作用域是setInterval里面 </span></span><br><span class="line">                    <span class="comment">// setInterval 不会自动传递外部参数 会重新定义一个变量 值为undefined</span></span><br><span class="line">                    i=(i+<span class="number">1</span>)%<span class="number">9</span>;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(jsondata)</span><br><span class="line">                    <span class="keyword">let</span> imgsrc=jsondata[i].<span class="property">imgSrc</span></span><br><span class="line">                    <span class="keyword">let</span> text=jsondata[i].<span class="property">title</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(imgsrc,text)</span><br><span class="line">                    <span class="keyword">let</span> img=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.pic&#x27;</span>)</span><br><span class="line">                    <span class="keyword">let</span> title=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.text&#x27;</span>)</span><br><span class="line">                    img.<span class="property">src</span>=imgsrc</span><br><span class="line">                    title.<span class="property">textContent</span>=text</span><br><span class="line">                &#125;, <span class="number">1000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(err)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;解析失败&#x27;</span>,err)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取文件失败&#x27;</span>,err))</span><br><span class="line"></span><br><span class="line"><span class="comment">//实战：禁用按钮倒计时</span></span><br><span class="line">    btn=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.btn&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> s=<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">let</span> timeID=<span class="built_in">setInterval</span>(update,<span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s==<span class="number">0</span>)&#123;</span><br><span class="line">        btn.<span class="property">disabled</span>=<span class="literal">false</span>;</span><br><span class="line">        btn.<span class="property">textContent</span>=<span class="string">`我已经阅读用户协议`</span></span><br><span class="line">        <span class="built_in">clearInterval</span>(timeID);</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        s-=<span class="number">1</span>;</span><br><span class="line">        btn.<span class="property">textContent</span>=<span class="string">`我已经阅读用户协议(<span class="subst">$&#123;s&#125;</span>s)`</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//循环雪碧图 精灵图</span></span><br><span class="line"><span class="keyword">var</span> lis = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; lis.<span class="property">length</span>; i++) &#123;</span><br><span class="line"><span class="comment">// 让索引号 乘以 44 就是每个li 的背景y坐标  index就是我们的y坐标</span></span><br><span class="line">	<span class="keyword">var</span> index = i * <span class="number">44</span>;</span><br><span class="line">	lis[i].<span class="property">style</span>.<span class="property">backgroundPosition</span> = <span class="string">&#x27;0 -&#x27;</span> + index + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//仿新浪注册页面</span></span><br><span class="line">        <span class="comment">// 首先判断的事件是表单失去焦点 onblur</span></span><br><span class="line">        <span class="comment">// 如果输入正确则提示正确的信息颜色为绿色小图标变化</span></span><br><span class="line">        <span class="comment">// 如果输入不是6到16位，则提示错误信息颜色为红色 小图标变化</span></span><br><span class="line">        <span class="comment">// 因为里面变化样式较多，我们采取className修改样式</span></span><br><span class="line">        <span class="comment">// 1.获取元素</span></span><br><span class="line">        <span class="keyword">var</span> ipt = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ipt&#x27;</span>);</span><br><span class="line">        <span class="keyword">var</span> message = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.message&#x27;</span>);</span><br><span class="line">        <span class="comment">//2. 注册事件 失去焦点</span></span><br><span class="line">        ipt.<span class="property">onblur</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// 根据表单里面值的长度 ipt.value.length</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span> &lt; <span class="number">6</span> || <span class="variable language_">this</span>.<span class="property">value</span>.<span class="property">length</span> &gt; <span class="number">16</span>) &#123;</span><br><span class="line">                <span class="comment">// console.log(&#x27;错误&#x27;);</span></span><br><span class="line">                message.<span class="property">className</span> = <span class="string">&#x27;message wrong&#x27;</span>;</span><br><span class="line">                message.<span class="property">innerHTML</span> = <span class="string">&#x27;您输入的位数不对要求6~16位&#x27;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                message.<span class="property">className</span> = <span class="string">&#x27;message right&#x27;</span>;</span><br><span class="line">                message.<span class="property">innerHTML</span> = <span class="string">&#x27;您输入的正确&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>dataset 示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;myButton&quot;</span> <span class="attr">data-index</span>=<span class="string">&quot;1&quot;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 获取按钮元素</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> button = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myButton&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 读取 dataset</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;初始索引:&quot;</span>, button.<span class="property">dataset</span>.<span class="property">index</span>); <span class="comment">// 输出: &quot;1&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 修改 dataset</span></span></span><br><span class="line"><span class="language-javascript">        button.<span class="property">dataset</span>.<span class="property">index</span> = <span class="string">&quot;2&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;修改后的索引:&quot;</span>, button.<span class="property">dataset</span>.<span class="property">index</span>); <span class="comment">// 输出: &quot;2&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 监听点击事件</span></span></span><br><span class="line"><span class="language-javascript">        button.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 自增 index</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">dataset</span>.<span class="property">index</span> = <span class="built_in">parseInt</span>(<span class="variable language_">this</span>.<span class="property">dataset</span>.<span class="property">index</span>) + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;当前索引: &quot;</span> + <span class="variable language_">this</span>.<span class="property">dataset</span>.<span class="property">index</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>因为我们插入的js节点已经存在于当前的文档树，因此这个节点首先会从原先的位置删除，再插入到新的位置。<br>创建了一个&lt;  style  &gt;节点，然后把它添加到&lt;  head  &gt;节点的末尾，这样就动态地给文档添加了新的CSS定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建节点</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="comment">//创建由tagName指定的HTML元素。因为这些元素原先不存在，称为动态创建元素节点。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将一个节点添加到指定父节点的子节点列表末尾。</span></span><br><span class="line"><span class="comment">//类似于 CSS 里面的after 伪元素。</span></span><br><span class="line">parentnode.<span class="title function_">appendChild</span>(child)</span><br><span class="line"></span><br><span class="line"><span class="comment">//将一个节点添加到父节点的指定子节点前面。</span></span><br><span class="line"><span class="comment">//类似于 CSS 里面的 before 伪元素。</span></span><br><span class="line">parentnode.<span class="title function_">insertBefore</span>(<span class="title class_">NEWchild</span>, 指定元素)</span><br><span class="line"></span><br><span class="line"><span class="comment">//从 DOM 中删除一个子节点，返回删除的节点。</span></span><br><span class="line">parentnode.<span class="title function_">removeChild</span>(child)</span><br><span class="line"><span class="comment">//如不存在父子关系则删除不成功</span></span><br><span class="line"><span class="comment">//注意到删除后的节点虽然不在文档树中了，但其实它还在内存中，可以随时再次被添加到别的位置。</span></span><br><span class="line"><span class="comment">//当你遍历一个父节点的子节点并进行删除操作时，要注意，children属性是一个只读属性，并且它在子节点变化时会实时更新。</span></span><br><span class="line">parent.<span class="title function_">removeChild</span>(parent.<span class="property">children</span>[<span class="number">0</span>]);</span><br><span class="line">parent.<span class="title function_">removeChild</span>(parent.<span class="property">children</span>[<span class="number">1</span>]); <span class="comment">// &lt;-- 浏览器报错</span></span><br><span class="line"><span class="comment">//因为一共有0，1两号子节点，删掉0号后1号自动变0号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//返回调用该方法的节点的一个副本。 也称为克隆节点/拷贝节点</span></span><br><span class="line">node.<span class="title function_">cloneNode</span>()</span><br><span class="line"><span class="comment">//括号参数为空或者为false则是浅拷贝，即只克隆复制节点本身，不克隆里面的子节点。</span></span><br><span class="line"><span class="comment">//如果括号参数为 true ，则是深度拷贝，会复制节点本身以及里面所有的子节点。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>三种动态创建元素的区别<br> document.write()<br> element.innerHTML<br> document.createElement()<br>区别</li>
</ul>
<ol>
<li>document.write 是直接将内容写入页面的内容流，但是文档流执行完毕，则它会导致页面全部重绘</li>
<li>innerHTML 是将内容写入某个 DOM 节点，不会导致页面全部重绘</li>
<li>innerHTML 创建多个元素效率更高（不要拼接字符串，采取数组形式拼接），结构稍微复杂；innerHTML 复制节点的时候，不会复制原先节点的事件，会存在内存泄露问题</li>
<li>createElement() 创建多个元素效率稍低一点点，但是结构更清晰，如果页面创建元素较少，建议使用 createElement()<br>总结：不同浏览器下，innerHTML 效率要比 creatElement 高</li>
</ol>
<h1 id="特效实例"><a href="#特效实例" class="headerlink" title="特效实例"></a>特效实例</h1><h2 id="节流阀"><a href="#节流阀" class="headerlink" title="节流阀"></a>节流阀</h2><p>防止轮播图按钮连续点击造成播放过快。<br>节流阀目的：当上一个函数动画内容执行完毕，再去执行下一个函数动画，让事件无法连续触发。<br>核心实现思路：利用回调函数，添加一个变量来控制，锁住函数和解锁函数。<br>开始设置一个变量 var flag &#x3D; true;<br>If(flag) {flag &#x3D; false; do something} 关闭水龙头<br>利用回调函数 动画执行完毕， flag &#x3D; true 打开水龙头</p>
<h2 id="移动端网页特效"><a href="#移动端网页特效" class="headerlink" title="移动端网页特效"></a>移动端网页特效</h2><ul>
<li>触屏事件概述<br>在移动端，touch事件比鼠标事件执行效率高<br>移动端浏览器兼容性较好，我们不需要考虑以前 JS 的兼容性问题，可以放心的使用原生 JS 书写效果，但是移动端也有自己独特的地方。比如触屏事件 touch（也称触摸事件），Android 和 IOS 都有。<br>touch 对象代表一个触摸点。触摸点可能是一根手指，也可能是一根触摸笔。触屏事件可响应用户手指（或触控笔）对屏幕或者触控板操作。<br><img src="https://i-blog.csdnimg.cn/direct/16e0352307a44fa78a12420d43782853.png" alt="在这里插入图片描述"><br>如果移动距离小于 某个像素 就回弹原来位置<br>如果移动距离大于某个像素就上一张下一张滑动。<br>滑动也分为左滑动和右滑动 判断的标准是 移动距离正负 如果是负值就是左滑 反之右滑</li>
<li>触摸事件对象（TouchEvent）<br>TouchEvent 是一类描述手指在触摸平面（触摸屏、触摸板等）的状态变化的事件。这类事件用于描述一个或多<br>个触点，使开发者可以检测触点的移动，触点的增加和减少，等等<br>touchstart、touchmove、touchend 三个事件都会各自有事件对象。<br>触摸事件对象重点我们看三个常见对象列表：<br>targetTouches属性和touches在手指按下和移动中都可以获取手指列表<br><img src="https://i-blog.csdnimg.cn/direct/b4df40a74e1a46829f4f548d4a214a32.png" alt="在这里插入图片描述"><br>因为平时我们都是给元素注册触摸事件，所以重点记住 targetTouches</li>
<li>移动端拖动元素</li>
</ul>
<ol>
<li>touchstart、touchmove、touchend 可以实现拖动元素</li>
<li>但是拖动元素需要当前手指的坐标值 我们可以使用 targetTouches[0] 里面的pageX 和 pageY </li>
<li>移动端拖动的原理： 手指移动中，计算出手指移动的距离。然后用盒子原来的位置 + 手指移动的距离</li>
<li>手指移动的距离： 手指滑动中的位置 减去 手指刚开始触摸的位置<br>拖动元素三步曲：<br>（1） 触摸元素 touchstart： 获取手指初始坐标，同时获得盒子原来的位置<br>（2） 移动手指 touchmove： 计算手指的滑动距离，并且移动盒子<br>（3） 离开手指 touchend:<br>注意： 手指移动也会触发滚动屏幕所以这里要阻止默认的屏幕滚动 e.preventDefault();</li>
</ol>
<ul>
<li>移动端常用开发插件<br>比如移动端常见插件：iScroll、Swiper、SuperSlider 。<br><a target="_blank" rel="noopener" href="https://www.swiper.com.cn/">https://www.swiper.com.cn/</a><br>superslide： <a target="_blank" rel="noopener" href="http://www.superslide2.com/">http://www.superslide2.com/</a><br>iscroll： <a target="_blank" rel="noopener" href="https://github.com/cubiq/iscrol">https://github.com/cubiq/iscrol</a><br>移动端视频插件 zy.media.js<br>H5 给我们提供了 video 标签，但是浏览器的支持情况不同。在移动端我们可以使用插件方式来制作。</li>
<li>click 延时解决方案<br>移动端 click 事件会有 300ms 的延时，原因是移动端屏幕双击会缩放(double tap to zoom) 页面。<br>fastclick 插件解决 300ms 延迟。 使用延时<br>GitHub官网地址： <a target="_blank" rel="noopener" href="https://github.com/ftlabs/fastclick">https://github.com/ftlabs/fastclick</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解决方案</span></span><br><span class="line"><span class="comment">//1 禁用缩放，浏览器禁用默认的双击缩放行为并且去掉 300ms 的点击延迟。</span></span><br><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;user-scalable=no&quot;</span>&gt;</span><br><span class="line"><span class="comment">//2 使用插件。 fastclick 插件解决 300ms 延迟。</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;addEventListener&#x27;</span> <span class="keyword">in</span> <span class="variable language_">document</span>) &#123;</span><br><span class="line"> <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"> <span class="title class_">FastClick</span>.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>);<span class="comment">/*等页面文档加载完成 不需要等所有的资源*/</span></span><br><span class="line"> &#125;, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3 利用touch事件自己封装这个事件解决 300ms 延迟。</span></span><br><span class="line"><span class="comment">//如果离开屏幕到触摸屏幕时间差值小于150ms，并且没有滑动过屏幕，那么我们就定义为点击</span></span><br><span class="line"><span class="comment">//封装tap，解决click 300ms 延时</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tap</span> (<span class="params">obj, callback</span>) &#123;</span><br><span class="line"> <span class="keyword">var</span> isMove = <span class="literal">false</span>;</span><br><span class="line"> <span class="keyword">var</span> startTime = <span class="number">0</span>; <span class="comment">// 记录触摸时候的时间变量</span></span><br><span class="line"> obj.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line"> startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>(); <span class="comment">// 记录触摸时间</span></span><br><span class="line"> &#125;);</span><br><span class="line"> obj.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line"> isMove = <span class="literal">true</span>; <span class="comment">// 看看是否有滑动，有滑动算拖拽，不算点击</span></span><br><span class="line"> &#125;);</span><br><span class="line"> obj.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchend&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line"> <span class="keyword">if</span> (!isMove &amp;&amp; (<span class="title class_">Date</span>.<span class="title function_">now</span>() - startTime) &lt; <span class="number">150</span>) &#123; <span class="comment">// 如果手指触摸和离开时间小于150ms 算点击</span></span><br><span class="line"> callback &amp;&amp; <span class="title function_">callback</span>(); <span class="comment">// 执行回调函数</span></span><br><span class="line"> &#125;</span><br><span class="line"> isMove = <span class="literal">false</span>; <span class="comment">// 取反 重置</span></span><br><span class="line"> startTime = <span class="number">0</span>;</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用 </span></span><br><span class="line"> <span class="title function_">tap</span>(div, <span class="keyword">function</span>(<span class="params"></span>)&#123; <span class="comment">// 执行代码 &#125;);</span></span><br></pre></td></tr></table></figure>
<ul>
<li>移动端常用开发框架<br>前端常用的框架有 Bootstrap、Vue、Angular 等。<br>MUI 原生UI前端框架<br>MUI 是一个专门用于做手机 APP 的前端框架。<br>MUI 的 UI 设计理念是：以 IOS 为基础，补充 Android 平台特有的控件。因此 MUI 封装的控件，UI 上更符合app 的体验。<br>MUI 中文官网地址：<a target="_blank" rel="noopener" href="http://dev.dcloud.net.cn/mui/">http://dev.dcloud.net.cn/mui/</a></li>
</ul>

            </div>
        </div>
    </article>

    
    
<nav class="article-nav">
  
    <a href="/2025/03/24/jQuery%E4%B8%80%E6%9C%AC%E9%80%9A/" id="article-nav-newer" class="article-nav-link-wrap prev">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          jQuery一本通
        
      </div>
    </a>
  
  
    <a href="/2025/03/24/%E6%97%A5%E6%8A%A53-23/" id="article-nav-older" class="article-nav-link-wrap next">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">日报3.23</div>
    </a>
  
</nav>

    

    
</div>
    </div>
    <footer class="site-footer">
        <div class="global-width">
            <ul class="site-widget">
                
                <li class="widget widget-tag">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/basics/" rel="tag">basics</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frontend/" rel="tag">frontend</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/projects/" rel="tag">projects</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tags/" rel="tag">tags</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/" rel="tag">test</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-category">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/daily-report/">daily_report</a><span class="category-list-count">52</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-recent_posts">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-body">
      <ul>
        
          <li>
            <a href="/2025/07/09/JS%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0/">JS一本通</a>
          </li>
        
          <li>
            <a href="/2025/07/09/htmlcss/">HTML_CSS_Bootstrap_Emmet</a>
          </li>
        
          <li>
            <a href="/2025/07/07/%E5%89%8D%E7%AB%AF%E5%BF%85%E4%BC%9A%E5%85%B3%E9%94%AE%E8%AF%8D/">FE必会关键词</a>
          </li>
        
          <li>
            <a href="/2025/05/29/Lyrics/">Lyrics</a>
          </li>
        
          <li>
            <a href="/2025/05/28/test/">test</a>
          </li>
        
      </ul>
    </div>
  </div>

                </li>
                
            </ul>
        </div>
        <div class="site-info">
            <address>
                &copy; 2014 <a href="https://70v-yoyo.github.io">Yoyo&#39;s blog</a> All Right Reserved. <br/>
                Powered by <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a>. Theme by <a target="_blank" rel="noopener" href="http://zzoman.com">ZZOMAN</a>
                <p><a target="_blank" href="https://github.com/70v-Yoyo">My github</a></p>
            </address>
        </div>
    </footer> 
    
    
    <script src="/libs/jquery-1.11.3.min.js" type="text/javascript"></script>
    
    <script src="/libs/fancybox/jquery.fancybox.js" type="text/javascript"></script>
    
    <script src="/js/site_init.js" type="text/javascript"></script>
     
    <noscript>
        <style>
            article {
                position: absolute;
                width: 0;
                height: 0;
                overflow: hidden;
                opacity: 0;
            }

        </style>
        <h1>JS已被禁用</h1>
    </noscript>
<!-- hexo injector body_end start -->
    <script>
      (function() {
        function moveElementIfSmallScreen() {
          const toc = document.getElementById('fixed-toc-container');
          const article = document.querySelector("article");
          const toggleBtn = document.getElementById('toggle_btn');
          if (!toc || !article) return;
          if (window.innerWidth < 1024 && article.firstElementChild !== toc) {
            console.log('small screen!!')
            
            article.insertBefore(toc, article.firstChild);//移动节点，而非复制
            
            toggleBtn.style.display='none';
            // 替换样式：取消 fixed，设置适合正文的样式
            toc.style.position = 'relative';
            toc.style.top = '';
            toc.style.left = '';
            toc.style.width = '100%';
            toc.style.maxHeight = 'none';
            toc.style.overflowY = 'visible';
            toc.style.overflowX = 'visible';
            toc.style.padding = '1em';
            toc.style.borderLeft = 'none';
            toc.style.borderBottom = '1px solid #ddd';
            toc.style.background = '#f9f9f9';
            toc.style.opacity = '1';
            toc.style.zIndex = '9999';
            toc.style.boxShadow = 'none';
            toc.style.margin = '1rem';
            toc.style.paddingTop= '2rem';
          }
        }
        window.addEventListener("DOMContentLoaded", moveElementIfSmallScreen);
        window.addEventListener("resize", moveElementIfSmallScreen);
      })();
    </script>
  <!-- hexo injector body_end end -->
    <div id="fixed-toc-container" style="
      position: fixed;
      top: 0vh;
      left: 0px;
      width: 15rem;
      max-height: 80vh;
      overflow-y: auto;
      overflow-x: auto;
      padding: 10px;
      border-left: 2px solid #ccc;
      font-size: 14px;
      line-height: 1.5;
      background: #fff;
      opacity:0.8;
      z-index: 9999;
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.05),  /* 第一层：近处柔和 */
        0 8px 16px rgba(0, 0, 0, 0.08); /* 第二层：远处扩散 */
    ">
      <strong>Contents</strong>
      <div id="toggle_btn" style="
      position:absolute;
      right:1rem;
      display:inline-block;
      width:2rem;
      text-align:center;
      border:1px solid #ccc;
      "><</div>
      <ul id="fixed-toc-list" style="list-style: none; padding-left: 10px;"></ul>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const nav = document.querySelector('nav');
        if (nav) {
          const navBottom = nav.getBoundingClientRect().bottom;//浏览器JS API
          console.log('nav bottom:', navBottom);
          // 设置toc元素 top = nav bottom
          const toc = document.querySelector('#fixed-toc-container');
          if (toc) {
            toc.style.top = navBottom + 'px';
            toc.style.maxHeight=window.innerHeight - navBottom.getBoundingClientRect().bottom;
          }
        }
      });

      const myDiv = document.getElementById('toggle_btn');
      var tocList=document.getElementById("fixed-toc-list");
      var tocContainer=document.getElementById("fixed-toc-container");
      function handleClickBtn() {
        console.log('Div 被点击了！');
        if(myDiv.textContent==='<'){
          myDiv.textContent ='>'
          tocList.style.display='none'
          tocContainer.style.width='11rem'
        }else{
          myDiv.textContent ='<'
          tocList.style.display='block'
          tocContainer.style.width='15rem'
        }
          
      }


      myDiv.addEventListener('click', handleClickBtn);// 绑定点击事件


      (function() {
      const Patternstr = "/*\\d{4}/\\d{2}/\\d{2}/.*"; //本身是字符串插入，所以对符号要转义
      //"^//*"->"/"
      //"/.*"->".*"
      //JS引擎中""转义
      //正则表达式引擎也是""转义
      const dataPattern = new RegExp(Patternstr);
      const path = window.location.pathname;
      console.log(dataPattern.toString(),path,dataPattern.test(path));//控制台在渲染时省略了反斜杠的可视表示。
      if (!dataPattern.test(path)&&(path==='/'||path==='index.html')) {
        console.log('no toc')
        let toc = document.getElementById('fixed-toc-container');
        if (toc) toc.style.display = 'none';
        return;
      }
        var content = document.querySelector('body');
        console.log('content',content)
        //var tocList = document.getElementById('fixed-toc-list');
        if (!content || !tocList) {
          document.getElementById('fixed-toc-container').style.display = 'none';
          return;
        }
        var headings = content.querySelectorAll('h1, h2, h3, h4');
        console.log('headings',headings)
        if(headings){
          const h1Element=headings[0];
          const rect = h1Element.getBoundingClientRect();
          if(rect.left<150){
           tocContainer.style.right='0px';
           tocContainer.style.left = 'auto'; // 移除内联的 left 样式
            //不是设置right:0 就替换left:0 需要移除
            console.log('to right')
          }
          console.log(rect.left,'150')
        }
        
        if (headings.length === 0) {
          document.getElementById('fixed-toc-container').style.display = 'none';
          return;
        }
        headings.forEach(function(heading, i) {
          if (!heading.id) {
            heading.id = 'heading-' + i;
          }
        });
        headings.forEach(function(heading) {
          var level = parseInt(heading.tagName.substring(1));
          var li = document.createElement('li');
          li.style.marginLeft = (level - 1) * 15 + 'px';
          var a = document.createElement('a');
          a.href = '#' + heading.id;
          a.textContent = heading.textContent;
          a.style.color = '#555';
          a.style.textDecoration = 'none';
          a.onmouseover = function() { a.style.textDecoration = 'underline'; };
          a.onmouseout = function() { a.style.textDecoration = 'none'; };
          li.appendChild(a);
          tocList.appendChild(li);
        });
      })();
    </script>
  </body>
</html>
