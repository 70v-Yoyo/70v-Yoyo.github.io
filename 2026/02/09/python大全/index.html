<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    
    
    <title>python大全 | Yoyo&#39;s blog</title>
    
    <link rel="alternative" href="/atom.xml" title="Yoyo&#39;s blog" type="application/atom+xml">
    
    
<link rel="stylesheet" href="/css/style.css">

    
    <link rel="stylesheet" href="/libs/fancybox/jquery.fancybox.css" charset="utf-8">
    
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!-- hexo injector head_end start --><script src="./func.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
<body class="site">
    <!-- 遮罩层 -->
    <div id="mask-layer">
    </div>
    
    <header class="site-header">
        <h1 class="site-title"><a href="/">Yoyo&#39;s blog</a></h1>
        <nav class="site-nav">
            <ul class="nav">
                
                <li><a href="/">Home</a></li>
                
                <li><a href="/archives">Archives</a></li>
                
                
                <li><a href="/atom.xml" title="RSS Feed">rss</a></li>
                
                <li><a class="toggle-search" href="#search">search</a></li>
            </ul>
        </nav>
        <div class="site-search" id="search">
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="https://70v-yoyo.github.io"></form>
        </div>
        
            <div class="site-header-background" style="background-image:url('http://reumia.github.io/hexo-theme-zzoman2015/images/background-zzoman2015.jpg')"></div>
        
    </header>
    <div class="site-body">
        <div class="global-width">
    <article class="article" data-layout="post" data-slug="python大全">
        <div class="article-content">
            
            
            <header class="article-header">
                <div class="article-meta">
                    <a href="/2026/02/09/python%E5%A4%A7%E5%85%A8/" class="article-date">
  <time datetime="2026-02-09T06:47:55.000Z">2026-02-09</time>
</a>
                    
                    
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/basics/" rel="tag">basics</a></li></ul>

                </div>
                
    <h1 class="article-title" itemprop="name">
      <a href="/2026/02/09/python%E5%A4%A7%E5%85%A8/">python大全</a>
    </h1>

            </header>
            
            <div class="article-body">
                <meta name="referrer" content="no-referrer" />

<blockquote>
<p>版本：260209</p>
</blockquote>
<ul>
<li>断言assert用于做单元测试</li>
<li>刷题易错点<br>node.next 首先要判断node是否为None，否则判题报错</li>
</ul>
<h1 id="目录结构规范"><a href="#目录结构规范" class="headerlink" title="目录结构规范"></a>目录结构规范</h1><p><img src="/images/python%E5%A4%A7%E5%85%A8.assets/2aad40972ab74178949ab6ade438739c.png" alt="在这里插入图片描述"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements <span class="comment">#生成requirements.txt</span></span><br><span class="line">pip install pacakage==version <span class="comment">#version 这里填版本号</span></span><br></pre></td></tr></table></figure>

<h1 id="底层初探"><a href="#底层初探" class="headerlink" title="底层初探"></a>底层初探</h1><h2 id="变量创建过程和垃圾回收机制"><a href="#变量创建过程和垃圾回收机制" class="headerlink" title="变量创建过程和垃圾回收机制"></a>变量创建过程和垃圾回收机制</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span>(variable) <span class="comment">#变量对应的内存地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#python解释器每隔一段时间扫描哪个内存值没有对应的变量名，就会回收掉</span></span><br></pre></td></tr></table></figure>
<ul>
<li>python中的None指的是一个变量还没有被赋值，与JS中的undefined不同，python中不存在undefined这种用法，如果出现这种情况直接报NameError错误。</li>
</ul>
<h2 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h2><p>ascii码将二进制与十进制与字符强行关联起来-&gt;gbk,utf-8,unicode</p>
<ul>
<li>windows:  gbk</li>
<li>Linux &#x2F;Mac: utf-8</li>
</ul>
<h2 id="浅拷贝、深拷贝"><a href="#浅拷贝、深拷贝" class="headerlink" title="浅拷贝、深拷贝"></a>浅拷贝、深拷贝</h2><p>浅拷贝：创建一个新的对象，并为它分配一块新的内存，但新对象里的元素其实还是原对象中各个子对象的引用。所以修改子对象时，原对象和新对象都会受到影响。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>.copy() <span class="comment">#浅拷贝</span></span><br><span class="line"></span><br><span class="line">list_1 = [<span class="number">1</span>, [<span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>], (<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>), &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Sarah&quot;</span>&#125;]</span><br><span class="line">list_2 = <span class="built_in">list</span>(list_1)   <span class="comment"># 浅拷贝   与list_1.copy()功能一样</span></span><br><span class="line"></span><br><span class="line">list_1[<span class="number">0</span>] = <span class="number">10</span></span><br><span class="line">list_2[<span class="number">0</span>] = <span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;list_1:  &quot;</span>, list_1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;list_2:  &quot;</span>, list_2)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">list_1:   [10, [22, 33, 44], (5, 6, 7), &#123;&#x27;name&#x27;: &#x27;Sarah&#x27;&#125;, 100]</span></span><br><span class="line"><span class="string">list_2:   [20, [22, 33, 44], (5, 6, 7), &#123;&#x27;name&#x27;: &#x27;Sarah&#x27;&#125;, &#x27;n&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">list_1[<span class="number">1</span>].remove(<span class="number">44</span>)</span><br><span class="line">list_2[<span class="number">1</span>] += [<span class="number">55</span>, <span class="number">66</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;list_1:  &quot;</span>, list_1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;list_2:  &quot;</span>, list_2)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">当对底层做改变时，他们的值是一起变的</span></span><br><span class="line"><span class="string">list_1:   [10, [22, 33, 55, 66], (5, 6, 7), &#123;&#x27;name&#x27;: &#x27;Sarah&#x27;&#125;, 100]</span></span><br><span class="line"><span class="string">list_2:   [20, [22, 33, 55, 66], (5, 6, 7), &#123;&#x27;name&#x27;: &#x27;Sarah&#x27;&#125;, &#x27;n&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">list_2[<span class="number">2</span>] += (<span class="number">8</span>,<span class="number">9</span>)<span class="comment">#特例：当添加的是元组时，list_1不会跟着list_2一起变</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;list_1:  &quot;</span>, list_1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;list_2:  &quot;</span>, list_2)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">结论：浅拷贝操作之后</span></span><br><span class="line"><span class="string">针对不可变元素（数字、字符串、元组）的操作，都各自生效了，结果不相同</span></span><br><span class="line"><span class="string">针对不可变元素（列表、集合）的操作，发生了一些混淆，结果相同</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>深拷贝：创建一个全新的对象，并且递归地把原对象中的每一个子对象都复制一份，分配给新对象。这意味着新对象和原对象完全独立，互不影响。</p>
<p>浅拷贝就像其名字一样，只是一个表面复制。只有第一层被创建为新的对象，而底层的对象不会被复制。</p>
<p>对于不可变对象，深拷贝和浅拷贝的效果是一样的，而深拷贝和浅拷贝的讨论只有在可变数据类型的情况下才有意义</p>
<p>列表内的元素可以分散的存储在内存中<br>列表存储的，实际上是这些元素的地址！！！——地址的存储在内存中是连续的</p>
<h2 id="是否可变"><a href="#是否可变" class="headerlink" title="是否可变"></a>是否可变</h2><p>1、不可变类型：数字、字符串、元组<br>在生命周期中保持内容不变，换句话说，改变了就不是它自己了（id变了）<br>不可变对象的 +&#x3D; 操作 实际上创建了一个新的对象</p>
<p>元组并不是总是不可变的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t = (<span class="number">1</span>,[<span class="number">2</span>])</span><br><span class="line">t[<span class="number">1</span>].append(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(t) <span class="comment">#(1, [2, 3])</span></span><br></pre></td></tr></table></figure>
<p>2、可变类型：列表、字典、集合<br>id 保持不变，但是里面的内容可以变<br>可变对象的 +&#x3D; 操作 实际在原对象的基础上就地修改</p>
<h2 id="简写-解析语法"><a href="#简写-解析语法" class="headerlink" title="简写&#x3D;解析语法"></a>简写&#x3D;解析语法</h2><p>更简洁、运行速度较快</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#简写</span></span><br><span class="line">squares = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">21</span>):</span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">        squares.append(i**<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(squares)   </span><br><span class="line"></span><br><span class="line"><span class="comment">##change-----&gt;</span></span><br><span class="line">squares = [i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">21</span>) <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(squares) </span><br><span class="line"></span><br><span class="line"><span class="comment">#多变量</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">y = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">results = [i*j <span class="keyword">for</span> i,j <span class="keyword">in</span> <span class="built_in">zip</span>(x, y)]</span><br><span class="line">results</span><br><span class="line"></span><br><span class="line"><span class="comment">#嵌套</span></span><br><span class="line">colors = [<span class="string">&quot;black&quot;</span>, <span class="string">&quot;white&quot;</span>]</span><br><span class="line">sizes = [<span class="string">&quot;S&quot;</span>, <span class="string">&quot;M&quot;</span>, <span class="string">&quot;L&quot;</span>]</span><br><span class="line">tshirts = [<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>.<span class="built_in">format</span>(color, size) <span class="keyword">for</span> color <span class="keyword">in</span> colors <span class="keyword">for</span> size <span class="keyword">in</span> sizes]</span><br><span class="line">tshirts</span><br><span class="line"></span><br><span class="line"><span class="comment">#字典</span></span><br><span class="line">squares = &#123;i: i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)&#125;</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> squares.items():</span><br><span class="line">    <span class="built_in">print</span>(k, <span class="string">&quot;:  &quot;</span>, v)</span><br><span class="line"></span><br><span class="line"><span class="comment">#集合</span></span><br><span class="line">squares = &#123;i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)&#125;</span><br><span class="line">squares</span><br><span class="line"></span><br><span class="line"><span class="comment"># if</span></span><br><span class="line">n = -<span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> n &gt;= <span class="number">0</span>:</span><br><span class="line">    x = n</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    x = -n</span><br><span class="line">x</span><br><span class="line"><span class="comment">##change-----&gt;</span></span><br><span class="line">n = -<span class="number">10</span></span><br><span class="line">x = n <span class="keyword">if</span> n&gt;= <span class="number">0</span> <span class="keyword">else</span> -n</span><br><span class="line">x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><ul>
<li>生成器：适用于大数量，节约空间<br>只是保存一个代号g，里面值并没有生成，是懒生成&#x2F;惰性运算，调用next(g)即可得到当前的下一个值，没有下一个时抛出异常StopIteration</li>
</ul>
<ol>
<li>列表生成式[]改为()即可 <code>(i*i for i in a)</code></li>
<li>用next(g)麻烦时可利用for循环<code>for i in g</code></li>
<li>给生成器传值</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建生成器</span></span><br><span class="line">g = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> i &gt; <span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(g))</span><br><span class="line"><span class="comment"># 生成器是无法直接输出的 直接输出显示的是&lt;generator object &lt;genexpr&gt; at 0x000002073C2F9548&gt;</span></span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"><span class="comment"># 取值 简写next(g)</span></span><br><span class="line"><span class="built_in">print</span>(g.__next__()) <span class="comment"># 6 同print(next(g))</span></span><br><span class="line"><span class="comment">#报错显示StopIteration表示生成器无法在产生值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> n<span class="comment">#返回+暂停</span></span><br><span class="line">g = f1()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(g))<span class="comment"># &lt;class &#x27;generator&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(g.__next__())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">g_test</span>():</span><br><span class="line">	<span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">		n=<span class="keyword">yield</span></span><br><span class="line">		<span class="built_in">print</span>(n)</span><br><span class="line">g=g_test()</span><br><span class="line">g.__next__()<span class="comment">#调用生成器，同时发送None到yield</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">	g.send(i)<span class="comment">#调用生成器，同时发送i，不能在生成器刚启动时发送非空的值</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">range</span>(<span class="number">10</span>)<span class="comment">#就是一个生成器</span></span><br><span class="line">f=<span class="built_in">open</span>()<span class="comment">#也是</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#实现单线程的多并发，一个线程下&quot;几乎同时&quot;干几件事利用yield</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生产者</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">producer</span>(<span class="params">bun_queue</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        bun = <span class="string">f&quot;包子<span class="subst">&#123;random.randint(<span class="number">1</span>, <span class="number">100</span>)&#125;</span>&quot;</span>  <span class="comment"># 生产一个包子</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;生产者生产了 <span class="subst">&#123;bun&#125;</span>&quot;</span>)</span><br><span class="line">        bun_queue.append(bun)  <span class="comment"># 将包子添加到包子队列中</span></span><br><span class="line">        time.sleep(<span class="number">1</span>)  <span class="comment"># 每生产一个包子等待一段时间</span></span><br><span class="line">        <span class="keyword">yield</span>  <span class="comment"># 暂停，交给消费者</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 消费者</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">consumer</span>(<span class="params">bun_queue</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> bun_queue:</span><br><span class="line">            bun = bun_queue.pop(<span class="number">0</span>)  <span class="comment"># 从队列中取出一个包子</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;消费者吃了 <span class="subst">&#123;bun&#125;</span>&quot;</span>)</span><br><span class="line">            time.sleep(<span class="number">2</span>)  <span class="comment"># 吃包子的时间</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;没有包子可吃，消费者等待...&quot;</span>)</span><br><span class="line">            time.sleep(<span class="number">1</span>)  <span class="comment"># 如果没有包子，消费者等待</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 调度生产者和消费者</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    bun_queue = []  <span class="comment"># 包子队列</span></span><br><span class="line">    producer_gen = producer(bun_queue)  <span class="comment"># 创建生产者生成器</span></span><br><span class="line">    consumer_gen = consumer(bun_queue)  <span class="comment"># 创建消费者生成器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 交替运行生产者和消费者</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):  <span class="comment"># 控制总共运行的时间或次数</span></span><br><span class="line">        <span class="built_in">next</span>(producer_gen)  <span class="comment"># 生产者生产</span></span><br><span class="line">        <span class="built_in">next</span>(consumer_gen)  <span class="comment"># 消费者消费</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<ul>
<li>yield 和 return 区别<br>return 会完全退出函数并返回一个值。<br>yield 暂停函数的执行，并允许函数在之后继续从暂停的位置继续执行。</li>
<li>yield 应用场景<br>大数据集的高效迭代：如果你需要生成大量的值，但不想一次性占用大量内存，使用生成器和 yield 会更节省内存。<br>创建无限序列：因为生成器是懒加载的，使用 yield 可以生成无限长的序列，而不需要担心内存溢出。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span>((i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">101</span>))) <span class="comment">#将[]换成() 得到的这个生成器不占用内存，只输出结果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#构造生成器函数yield</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params"><span class="built_in">max</span></span>):</span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="built_in">max</span>:</span><br><span class="line">        <span class="keyword">yield</span> a </span><br><span class="line"><span class="comment">#每次调用next()时执行，遇到yield语句返回</span></span><br><span class="line"><span class="comment">#再次执行：从上次返回的yield语句处继续执行</span></span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">fib(<span class="number">10</span>)<span class="comment">#&lt;generator object fib at 0x000001BE11B19048&gt;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fib(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(squares))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(squares))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(squares))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(squares))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(squares))</span><br></pre></td></tr></table></figure>
<p>for item in Iterable 等价于：<br>先通过iter(Iterable)函数或者自定义函数+yield获取可迭代对象Iterable的迭代器，对获取到的迭代器不断调用next()方法来获取下一个值并将其赋值给item，遇到StopIteration异常后循环结束</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#构造一个生产n 以内素数的生成器</span></span><br><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 参考Blog：https://blog.csdn.net/ZSGG_ACM/article/details/51584624 </span></span><br><span class="line"><span class="comment"># &#x27;埃式素数生成法&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">odd_list</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;奇数生成器(不包括1)生成的是一个无限序列&#x27;&#x27;&#x27;</span></span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n += <span class="number">2</span></span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filter_not_prime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;过滤因子&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x : x % n <span class="comment">#返回闭包 </span></span><br><span class="line">    <span class="comment">#x%n!=0的保留</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">primes</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;生成素数序列&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    it = odd_list()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n = <span class="built_in">next</span>(it)</span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">        <span class="comment">#print(n,it)</span></span><br><span class="line">        it = <span class="built_in">filter</span>(filter_not_prime(n), it)<span class="comment">#it是一个generator，里面的所有函数拿出来%n筛选</span></span><br><span class="line">        </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">filter(function, iterable)</span></span><br><span class="line"><span class="string">返回一个可迭代的filter对象，可以使用list()函数将其转化为列表，这个列表包含过滤器对象中返回的所有的项。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;遍历素数生成器&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i, x <span class="keyword">in</span> <span class="built_in">enumerate</span>(primes()): <span class="comment"># enumerate迭代遍历键值对(索引:素数)</span></span><br><span class="line"><span class="comment">#         if x &gt; num:</span></span><br><span class="line">        <span class="keyword">if</span> i &gt; num:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(x)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    is_prime(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure>

<h2 id="迭代器Iterator"><a href="#迭代器Iterator" class="headerlink" title="迭代器Iterator"></a>迭代器Iterator</h2><ul>
<li><p>可用于for循环&#x2F;next()的对象统称为可迭代对象Iterable，如列表、元组、字符串、字典、集合、文件、生成器。</p>
<p>但不是所有iterable都是iterator。</p>
<p>所有生成器generator都是迭代器iterator</p>
</li>
<li><p>判断iterator&#x2F;iterable</p>
</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable, Iterator</span><br><span class="line"><span class="built_in">isinstance</span>(obj, Iterable)</span><br><span class="line"><span class="built_in">isinstance</span>(obj, Iterator)</span><br></pre></td></tr></table></figure>

<ul>
<li>iterable v.s. iterator</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th>Iterable</th>
<th>Iterator</th>
</tr>
</thead>
<tbody><tr>
<td>是否保存当前位置</td>
<td>❌ 不保存</td>
<td>✅ 保存</td>
</tr>
<tr>
<td>是否只能遍历一次</td>
<td>❌ 可以多次</td>
<td>✅ 一次性</td>
</tr>
<tr>
<td>是否实现 <code>__next__</code></td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyIterable</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> SomeIterator()</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyIterator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):<span class="comment">#关键：能用next()</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="comment">#生成器  iterable</span></span><br><span class="line"><span class="built_in">isinstance</span>(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Sarah&quot;</span>&#125;, Iterable)<span class="comment">#True</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="string">&#x27;Python&#x27;</span>, Iterable)<span class="comment">#True</span></span><br><span class="line">squares = (i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">isinstance</span>(squares, Iterable)<span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#迭代器  iterator</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterator</span><br><span class="line"></span><br><span class="line">squares = (i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">isinstance</span>(squares, Iterator)<span class="comment">#1. 生成器都是迭代器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. 列表、元组、字符串、字典、集合不是迭代器</span></span><br><span class="line"><span class="comment">#但可以通过iter(Iterable)创建迭代器</span></span><br><span class="line"><span class="built_in">isinstance</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], Iterator)<span class="comment">#False</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="built_in">iter</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]), Iterator)<span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3. zip enumerate 等itertools里的函数是迭代器</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">y = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]</span><br><span class="line"><span class="built_in">zip</span>(x, y)</span><br><span class="line"></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="built_in">enumerate</span>(numbers)</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.文件是迭代器</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;测试文件.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding = <span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">isinstance</span>(f, Iterator))<span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#5.range()不是迭代器,而是懒加载的生成器，即不包含全部内容，而是通过计算来回答</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#例子</span></span><br><span class="line"><span class="comment">#main.py</span></span><br><span class="line"><span class="keyword">from</span> solution <span class="keyword">import</span> FibonacciIterator</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">num = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>])</span><br><span class="line">fibonacci = FibonacciIterator()</span><br><span class="line"><span class="built_in">print</span>([<span class="built_in">next</span>(fibonacci) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num)],end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment">#solution.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FibonacciIterator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.a, <span class="variable language_">self</span>.b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>   </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># write your code here:</span></span><br><span class="line">        <span class="variable language_">self</span>.a, <span class="variable language_">self</span>.b = <span class="variable language_">self</span>.b,<span class="variable language_">self</span>.a + <span class="variable language_">self</span>.b</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.a</span><br></pre></td></tr></table></figure>
<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><ul>
<li>背景<br>不能违反软件开发中的一个原则“开放-封闭”，规定已经实现的功能代码不应该被修改，但可以被扩展，原有的调用方式也不能改（把函数名作为参数传参，修改原来的调用方式为new_func(old_func)），这个时候就要用到装饰器了（使得old_func&#x3D;new_func(old_func) ）。<br>1.需要对已开发上线的程序添加某些功能<br>2.不能对程序中函数的源代码进行修改<br>3.不能改变程序中函数的调用方式<br>4.核心是封装+闭包+高阶函数+装饰器</li>
</ul>
<p>装饰器通常是一个函数，它接受一个函数作为参数，并返回一个新的函数。<br>装饰器可以修改函数的行为，例如添加日志、缓存、验证等操作。<br>装饰器通过 @ 符号来应用到函数或方法上。</p>
<p>Python 提供了一些内建的装饰器，例如 @staticmethod、@classmethod 和 @property。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基本用法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_decorator</span>(<span class="params">func</span>):<span class="comment">#装饰器</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Before function call&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;After function call&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_decorator </span><span class="comment">#使得say_hello()=my_decorator(say_hello)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>():<span class="comment">#作为参数func传进去</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello!&quot;</span>)</span><br><span class="line"></span><br><span class="line">say_hello()  <span class="comment">#my_decorator(say_hello)()</span></span><br><span class="line"><span class="comment"># 输出：Before function call \n Hello! \n After function call</span></span><br></pre></td></tr></table></figure>
<h2 id="语法糖"><a href="#语法糖" class="headerlink" title="语法糖"></a>语法糖</h2><p>语法糖指的是一种语法简化了原来的代码，实际效果不变。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inner run&quot;</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        func()</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, (end-start)))</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@timer                      </span><span class="comment"># 相当于实现了f1 = timer(f1)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">f1()</span><br><span class="line"></span><br><span class="line"><span class="comment">#装饰有参函数</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inner run&quot;</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        func(*args, **kwargs)</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, (end-start)))</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@timer                </span><span class="comment"># 相当于实现了f1 = timer(f1)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line">    time.sleep(n)</span><br><span class="line"></span><br><span class="line">f1(<span class="number">2</span>) <span class="comment">#等价于timer(f1(2))()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#增加返回值</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inner run&quot;</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        res = func(*args, **kwargs)</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, (end-start)))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@timer                   </span><span class="comment"># 相当于实现了f1 = timer(f1)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line">    time.sleep(n)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;wake up&quot;</span></span><br><span class="line">    </span><br><span class="line">res = f1(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">inner run</span></span><br><span class="line"><span class="string">f1 run</span></span><br><span class="line"><span class="string">f1 函数运行用时2.00秒</span></span><br><span class="line"><span class="string">wake up</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#装饰器本身要传递一些额外参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">method</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;inner run&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> method == <span class="string">&quot;origin&quot;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;origin_inner run&quot;</span>)</span><br><span class="line">                start = time.time()</span><br><span class="line">                res = func(*args, **kwargs)</span><br><span class="line">                end = time.time()</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, (end-start)))</span><br><span class="line">            <span class="keyword">elif</span> method == <span class="string">&quot;double&quot;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;double_inner run&quot;</span>)</span><br><span class="line">                start = time.time()</span><br><span class="line">                res = func(*args, **kwargs)</span><br><span class="line">                end = time.time()</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行双倍用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, <span class="number">2</span>*(end-start)))</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        <span class="keyword">return</span> inner</span><br><span class="line">    <span class="keyword">return</span> outer</span><br><span class="line"></span><br><span class="line"><span class="meta">@timer(<span class="params">method=<span class="string">&quot;origin&quot;</span></span>)  </span><span class="comment"># 相当于timer = timer(method = &quot;origin&quot;)   </span></span><br><span class="line">						 <span class="comment">#f1 = timer(f1)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line"><span class="meta">@timer(<span class="params">method=<span class="string">&quot;double&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f2 run&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">f1()</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line">f2()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">inner run</span></span><br><span class="line"><span class="string">origin_inner run</span></span><br><span class="line"><span class="string">f1 run</span></span><br><span class="line"><span class="string">f1 函数运行用时1.00秒</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">inner run</span></span><br><span class="line"><span class="string">double_inner run</span></span><br><span class="line"><span class="string">f2 run</span></span><br><span class="line"><span class="string">f2 函数运行双倍用时2.00秒</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#何时执行装饰器，一装饰就执行，不必等调用</span></span><br><span class="line">func_names=[]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_function</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;run&quot;</span>)</span><br><span class="line">    func_names.append(func)</span><br><span class="line">    <span class="keyword">return</span> func</span><br><span class="line"></span><br><span class="line"><span class="meta">@find_function</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="meta">@find_function</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f2 run&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="meta">@find_function</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f3</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f3 run&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">run</span></span><br><span class="line"><span class="string">run</span></span><br><span class="line"><span class="string">run</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> func <span class="keyword">in</span> func_names:</span><br><span class="line">    <span class="built_in">print</span>(func.__name__)</span><br><span class="line">    func()</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">f1</span></span><br><span class="line"><span class="string">f1 run</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f2</span></span><br><span class="line"><span class="string">f2 run</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f3</span></span><br><span class="line"><span class="string">f3 run</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#例子：原函数的属性被掩盖了</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inner run&quot;</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        func()</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, (end-start)))</span><br><span class="line">    <span class="keyword">return</span> inner<span class="comment">#返回值</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@timer                </span><span class="comment"># 相当于实现了f1 = timer(f1)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f1.__name__)     <span class="comment">#输出inner</span></span><br><span class="line"></span><br><span class="line">------------------</span><br><span class="line"><span class="comment">#不要被掩盖，输出原来的名字</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inner run&quot;</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        func()</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, (end-start)))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@timer                </span><span class="comment"># 相当于实现了f1 = timer(f1)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(f1.__name__) </span><br><span class="line">f1()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">f1</span></span><br><span class="line"><span class="string">inner run</span></span><br><span class="line"><span class="string">f1 run</span></span><br><span class="line"><span class="string">f1 函数运行用时1.00秒</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="函数对象"><a href="#函数对象" class="headerlink" title="函数对象"></a>函数对象</h2><p>函数是Python中的第一类对象<br>（1）可以把函数赋值给变量，可以将函数作为参数进行传递<br>（2）对该变量进行调用，可实现原函数的功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x**<span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(square))      <span class="comment"># square 是function类的一个实例</span></span><br><span class="line">pow_2 = square          <span class="comment"># 可以理解成给这个函数起了个别名pow_2</span></span><br><span class="line"><span class="built_in">print</span>(pow_2(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(square(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#应用</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inner run&quot;</span>)</span><br><span class="line">        start = time.time()</span><br><span class="line">        func()</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; 函数运行用时&#123;:.2f&#125;秒&quot;</span>.<span class="built_in">format</span>(func.__name__, (end-start)))</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;f1 run&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">f1 = timer(f1) <span class="comment">#f1被赋值成了一个函数 </span></span><br><span class="line">f1()</span><br><span class="line"><span class="comment">#等价于</span></span><br><span class="line">timer(f1)()  </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出：</span></span><br><span class="line"><span class="string">inner run</span></span><br><span class="line"><span class="string">f1 run</span></span><br><span class="line"><span class="string">f1 函数运行用时1.00秒</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>（1）接收函数作为参数<br>（2）或者返回一个函数<br>满足上述条件之一的函数称之为高阶函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pow_2</span>(<span class="params">fun</span>):</span><br><span class="line">    <span class="keyword">return</span> fun</span><br><span class="line"></span><br><span class="line">f = pow_2(square)</span><br><span class="line">f(<span class="number">8</span>)</span><br></pre></td></tr></table></figure>
<h2 id="嵌套函数"><a href="#嵌套函数" class="headerlink" title="嵌套函数"></a>嵌套函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;outer is running&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;inner is running&quot;</span>)</span><br><span class="line">        </span><br><span class="line">    inner()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">outer()</span><br></pre></td></tr></table></figure>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>闭包：延伸了作用域的函数，如果一个函数定义在另一个函数的作用域内，并且引用了外层函数的变量，则该函数称为闭包</p>
<p>闭包是由函数及其相关的引用环境组合而成的实体(即：闭包&#x3D;函数+引用环境即包裹一层的作用域)</p>
<p>一旦在内层函数重新定义了相同名字的变量，则变量成为局部变量,nonlocal允许内嵌的函数来修改闭包变量,即inner()外面的outer里面的变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line">    z = <span class="number">10</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        y = x+<span class="number">100</span></span><br><span class="line">        <span class="keyword">return</span> y, z</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">f = outer()                <span class="comment"># 实际上f包含了inner函数本身+outer函数的环境</span></span><br><span class="line"><span class="built_in">print</span>(f)<span class="comment">#&lt;function outer.&lt;locals&gt;.inner at 0x000001BE11B1D730&gt;</span></span><br><span class="line"><span class="built_in">print</span>(f.__closure__)         <span class="comment"># __closure__属性中包含了来自外部函数的信息</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f.__closure__:</span><br><span class="line">    <span class="built_in">print</span>(i.cell_contents)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出</span></span><br><span class="line"><span class="string">(&lt;cell at 0x000001BE0FDE06D8: int object at 0x00007FF910D59340&gt;, &lt;cell at 0x000001BE0FDE0A98: int object at 0x00007FF910D59460&gt;)</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">10</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h2><p>四种LEGB：<code>locals, enclosing function, globals, __builtins__</code><br>enclosing function:嵌套函数中外部函数的名字空间，如果fun2嵌套在fun1中，则对于fun2，fun1的名字空间就是enclosing<br><code>__builtins__</code>:内置模块空间，包括内置变量内置函数,<code>print(dir(__builtins__))</code></p>
<ul>
<li>作用域的查找顺序:LEGB</li>
</ul>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;*********主线程开始*********&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;**********f1开始*********&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;**********f1结束*********&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;**********f2开始*********&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;**********f2结束*********&quot;</span>)</span><br><span class="line"><span class="comment"># 创建线程</span></span><br><span class="line"><span class="comment"># target 指定这个线程执行那个函数中的代码,只写函数名即可，不要写括号</span></span><br><span class="line">th1 = threading.Thread(target=f1)</span><br><span class="line">th2 = threading.Thread(target=f2)</span><br><span class="line"><span class="comment"># 带参数args 后面指定一个元组</span></span><br><span class="line">th1 = Thread(target=f1, args=(<span class="number">2</span>,))</span><br><span class="line">th2 = Thread(target=f2, args=(<span class="number">3</span>,))</span><br><span class="line"><span class="comment"># 启动线程</span></span><br><span class="line">th1.start()</span><br><span class="line">th2.start()</span><br><span class="line"><span class="comment"># 设置等待：让当前线程（通常是主线程）阻塞等待直到目标线程执行结束。</span></span><br><span class="line">th1.join()</span><br><span class="line">th2.join()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;*********主线程结束*********&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#锁机制</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread, Lock</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="comment"># 存储支付宝账号余额</span></span><br><span class="line">zhifubao = &#123;</span><br><span class="line">    <span class="string">&#x27;zhangsan&#x27;</span>: <span class="number">10000</span>,</span><br><span class="line">    <span class="string">&#x27;liming&#x27;</span>: <span class="number">5000</span>,</span><br><span class="line">    <span class="string">&#x27;wanghong&#x27;</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="string">&#x27;zhaolei&#x27;</span>: <span class="number">5000</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 申请一把锁</span></span><br><span class="line">zhifu_lock = Lock()</span><br><span class="line"><span class="comment"># 线程1 ： 滴滴打车处理，参数是用户账户和扣款金额</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">thread1_didi_pay</span>(<span class="params">account,amount</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;* t1: 即将开始操作&#x27;</span>)</span><br><span class="line">    <span class="comment"># 上锁</span></span><br><span class="line">    zhifu_lock.acquire()</span><br><span class="line">    balance = zhifubao[account]</span><br><span class="line">    <span class="comment"># 下面的sleep(2) 表示一些处理过程需要花上2秒钟</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;* t1: 完成交易需要2s中&#x27;</span>)</span><br><span class="line">    sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;* t1: deduct&#x27;</span>)</span><br><span class="line">    zhifubao[account] = balance - amount</span><br><span class="line">    <span class="comment"># 释放锁</span></span><br><span class="line">    zhifu_lock.release()</span><br><span class="line"><span class="comment"># 线程2 ： 余额宝可以赚取利息，参数是用户账户和扣款金额</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">thread2_yue_pay</span>(<span class="params">account,amount</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;* t2: 即将开始操作&#x27;</span>)</span><br><span class="line">    <span class="comment"># 上锁</span></span><br><span class="line">    zhifu_lock.acquire()</span><br><span class="line">    balance = zhifubao[account]</span><br><span class="line">    <span class="comment"># 下面的sleep(2) 表示一些处理过程需要花上2秒钟</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;* t2: 完成交易需要2s中&#x27;</span>)</span><br><span class="line">    sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;* t2: deduct&#x27;</span>)</span><br><span class="line">    zhifubao[account] = balance + amount</span><br><span class="line">    <span class="comment"># 释放锁</span></span><br><span class="line">    zhifu_lock.release()</span><br><span class="line"><span class="comment"># 分别创建两个线程</span></span><br><span class="line">t1 = Thread(target=thread1_didi_pay, args=(<span class="string">&#x27;zhangsan&#x27;</span>, <span class="number">2000</span>))</span><br><span class="line">t2 = Thread(target=thread2_yue_pay, args=(<span class="string">&#x27;zhangsan&#x27;</span>, <span class="number">2000</span>))</span><br><span class="line"><span class="comment"># 启动线程</span></span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line"><span class="comment"># 设置等待</span></span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br><span class="line"><span class="comment"># 输出账户余额</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;_________________________&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(zhifubao[<span class="string">&quot;zhangsan&quot;</span>])</span><br></pre></td></tr></table></figure>



<h1 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h1><ul>
<li>编码问题：如果发现 UTF-8 解决不了设置为 utf-8-sig 尝试。<br>中文编码gbk ：一个汉字转换为2个字节的二进制<br>万国码utf-8 ：一个汉字转换为3个字节的二进制</li>
</ul>
<p><img src="/images/python%E5%A4%A7%E5%85%A8.assets/6aab4b822c2147e9a12b7c47502a65bb.png" alt="在这里插入图片描述"></p>
<p>文件指针标记从哪个位置开始读数据<br>第一次打开文件，文件指针指向文件开始位置<br>read()一次读入返回所有内容，之后文件指针移动到内容末尾<br>文件读完了返回空字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;文件打开、读写：open 打开文件后必须close 关闭文件。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;打开的文件&quot;</span>,<span class="string">&quot;打开方式默认r&quot;</span>) <span class="keyword">as</span> f：<span class="comment">#推荐，自动调用close&amp;可同时操作多个文件</span></span><br><span class="line">f = <span class="built_in">open</span>(file, encoding=<span class="string">&quot;utf-8&quot;</span>)<span class="comment">#带中文字符要用utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;file01.txt&#x27;</span>) <span class="keyword">as</span> f1,<span class="built_in">open</span>(<span class="string">&#x27;file05.txt&#x27;</span>, <span class="string">&#x27;a+&#x27;</span>) <span class="keyword">as</span> f2:</span><br><span class="line">    <span class="comment"># 从file01.txt中读取内容</span></span><br><span class="line">    f1_list = f1.readlines()</span><br><span class="line">    <span class="comment"># 给f2中写入一个列表</span></span><br><span class="line">    f2.writelines(f1_list)</span><br><span class="line"></span><br><span class="line"><span class="comment">#文件指针</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;文件指针位置：<span class="subst">&#123;f.tell()&#125;</span>&quot;</span>)</span><br><span class="line">f.seek(offset, whence=<span class="number">0</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">offset: 字节数，可正可负即向前向后</span></span><br><span class="line"><span class="string">whence (optional): 偏移起始位置。默认值为 0（绝对文件定位）：0：文件开头（默认值）。1：当前文件位置。2：文件末尾。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">文件指针在左上角第一行开始位置，写入时注意文件指针，不然会覆盖原内容</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文件全部内容到一个字符串中</span></span><br><span class="line">read_str = f.read()<span class="comment">#read(2)读2个字符</span></span><br><span class="line"><span class="comment"># 循环逐行读取1</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">	<span class="built_in">print</span>(line)</span><br><span class="line"><span class="comment"># 循环逐行读取2</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;三国演义片头曲_gbk.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:     </span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        text = f.readline()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">            <span class="comment"># print(text is &quot;&quot;)</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># print(text == &quot;\n&quot;)</span></span><br><span class="line">            <span class="built_in">print</span>(text, end=<span class="string">&quot;&quot;</span>)      <span class="comment"># 保留原文的换行，使print()的换行不起作用</span></span><br><span class="line">	</span><br><span class="line"><span class="comment"># 从当前指针位置逐行读取到一个列表中</span></span><br><span class="line">data = f.readlines()<span class="comment">#[&#x27;梦想橡皮擦\n&#x27;, &#x27;是一个大佬\n&#x27;, &#x27;真的是一个大佬\n&#x27;, &#x27;我自己都信了&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#图片这类2进制文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;test.jpg&quot;</span>, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:     </span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">len</span>(f.readlines()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;写入：写入的内容需为字符串类型，其它类型会报错。如果写入文件不存在则会创建该文件，写入内容原内容会被覆盖。追加数据用mode = a，文件指针在末尾。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># 文件地址，注意提前在当前目录新建一个 test.txt 文件</span></span><br><span class="line">file = <span class="string">&quot;test.txt&quot;</span></span><br><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(file, mode=<span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:<span class="comment">#mode=w会覆盖</span></span><br><span class="line">    <span class="comment"># 写入文件内容</span></span><br><span class="line">    f.write(<span class="string">&quot;我是即将被写入的内容&quot;</span>)</span><br><span class="line">	<span class="comment">#写入多行数据</span></span><br><span class="line">    f.write(<span class="string">&quot;我是即将被写入的内容\n&quot;</span>)</span><br><span class="line">    f.write(<span class="string">&quot;我是即将被写入的内容&quot;</span>)</span><br><span class="line"><span class="comment">#将一个元素为字符串的列表整体写入文件——f.writelines()</span></span><br><span class="line">ls = [<span class="string">&quot;春天刮着风&quot;</span>, <span class="string">&quot;秋天下着雨&quot;</span>, <span class="string">&quot;春风秋雨多少海誓山盟随风远去&quot;</span>]</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;恋曲1980.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.writelines(ls)</span><br><span class="line"></span><br><span class="line"><span class="comment">#mode=r+可读可写，文件不存在时不创建</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;浪淘沙_北戴河.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="comment">#     for line in f:</span></span><br><span class="line"><span class="comment">#         print(line)   # 全部读一遍后，指针到达结尾</span></span><br><span class="line">    f.seek(<span class="number">0</span>,<span class="number">2</span>)         <span class="comment"># 或者可以将指针移到末尾f.seek(偏移字节数,位置（0：开始；1：当前位置；2：结尾）)</span></span><br><span class="line">    text = [<span class="string">&quot;萧瑟秋风今又是，\n&quot;</span>, <span class="string">&quot;换了人间。\n&quot;</span>]</span><br><span class="line">    f.writelines(text)</span><br><span class="line"></span><br><span class="line"><span class="comment">#mode=w+ 可读可写，若文件存在立刻清空原内容！！！</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;浪淘沙_北戴河.txt&quot;</span>, <span class="string">&quot;w+&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    text = [<span class="string">&quot;萧瑟秋风今又是，\n&quot;</span>, <span class="string">&quot;换了人间。\n&quot;</span>]  <span class="comment"># 已经清空原内容</span></span><br><span class="line">    f.writelines(text)                             <span class="comment"># 写入新内容，指针在最后</span></span><br><span class="line">    f.seek(<span class="number">0</span>,<span class="number">0</span>)            <span class="comment"># 指针移到开始</span></span><br><span class="line">    <span class="built_in">print</span>(f.read())        <span class="comment"># 读取内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#mode=a+追加 文件指针在末尾 可读可写</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;浪淘沙_北戴河.txt&quot;</span>, <span class="string">&quot;a+&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    text = [<span class="string">&quot;萧瑟秋风今又是，\n&quot;</span>, <span class="string">&quot;换了人间。\n&quot;</span>]  </span><br><span class="line">    f.writelines(text)                             <span class="comment"># 指针在最后,追加新内容， </span></span><br><span class="line">    f.seek(<span class="number">0</span>,<span class="number">0</span>)            <span class="comment"># 指针移到开始</span></span><br><span class="line">    <span class="built_in">print</span>(f.read())        <span class="comment"># 读取内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#文件复制 shutil.copy(旧文件,新文件)</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">shutil.copy(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;aaa.txt&quot;</span>)</span><br><span class="line">shutil.copy(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;../aaa.txt&quot;</span>) <span class="comment"># 不同目录拷贝</span></span><br><span class="line"><span class="comment">#目录复制（旧目录，新目录）</span></span><br><span class="line">shutil.copytree(<span class="string">&quot;../1&quot;</span>,<span class="string">&quot;a4&quot;</span>)<span class="comment">#需要确定新目录不存在，如果存在会报错。</span></span><br><span class="line"><span class="comment">#移动：move 方法可修改文件名、移动目录</span></span><br><span class="line">shutil.move(旧文件，新文件)</span><br></pre></td></tr></table></figure>
<p>模式后面加b表示二进制方式，不能设置encoding<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/2ea8020fcf56463696d672092150073f.png" alt="在这里插入图片描述"><br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/323cfea7e9bc4efdaaed4ba506a63bd8.png" alt="在这里插入图片描述"></p>
<h2 id="Excel文件读写-openpyxl处理xlsx"><a href="#Excel文件读写-openpyxl处理xlsx" class="headerlink" title="Excel文件读写-openpyxl处理xlsx"></a>Excel文件读写-openpyxl处理xlsx</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"><span class="comment"># 创建一个Excel对象</span></span><br><span class="line">wb = Workbook()</span><br><span class="line"><span class="comment"># 获取Excel中默认的sheet对象</span></span><br><span class="line">sheet_obj = wb.active</span><br><span class="line"><span class="comment"># 给当前的sheet中 添加内容</span></span><br><span class="line"><span class="comment"># 方式一：</span></span><br><span class="line">sheet_obj[<span class="string">&quot;B2&quot;</span>] = <span class="string">&quot;80&quot;</span></span><br><span class="line"><span class="comment"># 方式二：</span></span><br><span class="line">sheet_obj.cell(<span class="number">2</span>, <span class="number">1</span>).value = <span class="string">&quot;张无忌&quot;</span></span><br><span class="line"><span class="comment"># 修改当前sheet的名字</span></span><br><span class="line">sheet_obj.title = <span class="string">&quot;学生成绩表&quot;</span></span><br><span class="line"><span class="comment"># 保存</span></span><br><span class="line">wb.save(<span class="string">&quot;信息表.xlsx&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动创建sheet</span></span><br><span class="line">wb.create_sheet(<span class="string">&quot;年龄&quot;</span>, <span class="number">0</span>)</span><br><span class="line">wb.create_sheet(<span class="string">&quot;工龄&quot;</span>, <span class="number">1</span>)</span><br><span class="line">wb.create_sheet(<span class="string">&quot;学龄&quot;</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 获取表格中所有的sheet</span></span><br><span class="line"><span class="built_in">print</span>(wb.sheetnames)</span><br><span class="line"><span class="comment"># 选择 名字 是学龄的sheet</span></span><br><span class="line">ws = wb[<span class="string">&quot;学龄&quot;</span>]</span><br><span class="line">ws[<span class="string">&quot;B2&quot;</span>] = <span class="string">&quot;helloworld&quot;</span></span><br><span class="line">wb.save(<span class="string">&quot;hello.xlsx&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line"><span class="comment"># 指定操作的表格</span></span><br><span class="line">wb = load_workbook(<span class="string">&quot;202108131238151282162 .xlsx&quot;</span>)</span><br><span class="line"><span class="comment"># 选择sheet</span></span><br><span class="line">ws = wb[<span class="string">&quot;分组分批&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改内容</span></span><br><span class="line">ws[<span class="string">&quot;B12&quot;</span>] = <span class="string">&quot;张飞&quot;</span></span><br><span class="line">ws.cell(<span class="number">13</span>, <span class="number">5</span>).value = <span class="string">&quot;第2组&quot;</span></span><br><span class="line"><span class="comment"># 插入行 插入列</span></span><br><span class="line"><span class="comment"># 指定需要操作的Excel</span></span><br><span class="line">wb = load_workbook(<span class="string">&quot;202108131238151282162 .xlsx&quot;</span>)</span><br><span class="line"><span class="comment"># 指定sheet</span></span><br><span class="line">ws = wb[<span class="string">&quot;分组分批&quot;</span>]</span><br><span class="line"><span class="comment"># 插入行 , 在第五行的位置插入一行（空行）</span></span><br><span class="line">ws.insert_rows(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 在第七行的位置插入三行空行</span></span><br><span class="line">ws.insert_rows(<span class="number">7</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 插入列, 在第三列 的位置插入一列</span></span><br><span class="line">ws.insert_cols(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 在第三列的位置插入两列</span></span><br><span class="line">ws.insert_cols(<span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 删除那个位置的多少行</span></span><br><span class="line">ws.delete_rows(<span class="number">7</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 删除列</span></span><br><span class="line">ws.delete_cols(<span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 获取有数据的最大行号</span></span><br><span class="line">rows = ws.max_row</span><br><span class="line"><span class="built_in">print</span>(rows)</span><br><span class="line"><span class="comment"># 获取有数据的最大列号</span></span><br><span class="line">cols = ws.max_column</span><br><span class="line"><span class="built_in">print</span>(cols)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存:同名则替换</span></span><br><span class="line">wb.save(<span class="string">&quot;202108131238151282162 .xlsx&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<h2 id="通用数据格式"><a href="#通用数据格式" class="headerlink" title="通用数据格式"></a>通用数据格式</h2><p>在不同语言中加载和存储<br>csv格式：由逗号将数据分开的字符序列，excel打开<br>json格式：常被用来存储字典类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;成绩.csv&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    ls = [] </span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:                              <span class="comment"># 逐行读取</span></span><br><span class="line">        ls.append(line.strip(<span class="string">&quot;\n&quot;</span>).split(<span class="string">&quot;,&quot;</span>))  <span class="comment"># 去掉每行的换行符，然后用“,”进行分割</span></span><br><span class="line"><span class="keyword">for</span> res <span class="keyword">in</span> ls:</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line">ls = [[<span class="string">&#x27;编号&#x27;</span>, <span class="string">&#x27;数学成绩&#x27;</span>, <span class="string">&#x27;语文成绩&#x27;</span>], [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;100&#x27;</span>, <span class="string">&#x27;98&#x27;</span>], [<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;96&#x27;</span>, <span class="string">&#x27;99&#x27;</span>], [<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;97&#x27;</span>, <span class="string">&#x27;95&#x27;</span>]]</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;score.csv&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:   <span class="comment"># encoding=&quot;utf-8&quot;中文会出现乱码</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> ls:                                  <span class="comment"># 逐行写入</span></span><br><span class="line">        f.write(<span class="string">&quot;,&quot;</span>.join(row)+<span class="string">&quot;\n&quot;</span>)                 <span class="comment"># 用逗号组合成字符串形式，末尾加换行符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可以借助csv模块完成上述操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line">scores = &#123;<span class="string">&quot;Petter&quot;</span>:&#123;<span class="string">&quot;math&quot;</span>:<span class="number">96</span> , <span class="string">&quot;physics&quot;</span>: <span class="number">98</span>&#125;,</span><br><span class="line">        <span class="string">&quot;Paul&quot;</span>:&#123;<span class="string">&quot;math&quot;</span>:<span class="number">92</span> , <span class="string">&quot;physics&quot;</span>: <span class="number">99</span>&#125;,</span><br><span class="line">        <span class="string">&quot;Mary&quot;</span>:&#123;<span class="string">&quot;math&quot;</span>:<span class="number">98</span> , <span class="string">&quot;physics&quot;</span>: <span class="number">97</span>&#125;&#125;</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;score.json&quot;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:             <span class="comment"># 写入整个对象 </span></span><br><span class="line">        <span class="comment"># indent 表示字符串换行+缩进 ensure_ascii=False 显示中文</span></span><br><span class="line">        json.dump(scores, f, indent=<span class="number">4</span>, ensure_ascii=<span class="literal">False</span>)       </span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;score.json&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:                                         </span><br><span class="line">        scores = json.load(f)           <span class="comment"># 加载整个对象</span></span><br><span class="line">        <span class="keyword">for</span> k,v <span class="keyword">in</span> scores.items():</span><br><span class="line">            <span class="built_in">print</span>(k,v)        </span><br></pre></td></tr></table></figure>

<h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><p>模块： py 文件，可包含函数、类。</p>
<p>包 ：文件夹，包含许多模块 (py文件)，<strong>必含__init__.py</strong>，包中可嵌套子包。</p>
<blockquote>
<p>同一模块文件中代码太多可能导致变量&#x2F;函数名重复；代码的阅读性很差；一个模块文件代码不超过500行</p>
</blockquote>
<ul>
<li>自定义库</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;封装成包：文件夹内多个py文件，必有__init__.py文件（内容可空）标志是一个包并且里面指定对外提供的模块列表，__init__.py在包被调用时首先执行。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> package</span><br><span class="line"><span class="keyword">from</span> package <span class="keyword">import</span> test <span class="comment">#包里面的test.py</span></span><br><span class="line"><span class="comment">#跨目录导入 import sys sys.path.append(path)</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;同理，导入文件中的函数/变量/*所有内容</span></span><br><span class="line"><span class="string">一个模块只会被导入一次，不管执行多少次 import</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> module1[, module2[,... moduleN]</span><br><span class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> name1[, name2[, ... nameN]]</span><br><span class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> *<span class="comment">#不建议使用，函数重名没有任何提示</span></span><br><span class="line"><span class="comment">#import优先从内存读取</span></span><br><span class="line"><span class="comment">#最好使用as，不会混名，仅限当前模块使用</span></span><br><span class="line"><span class="keyword">from</span> module.xx <span class="keyword">import</span> xx <span class="keyword">as</span> rename</span><br><span class="line">rename.xxx</span><br><span class="line"><span class="keyword">import</span> day.test</span><br><span class="line"><span class="built_in">print</span>(day.test.x)</span><br><span class="line">               </span><br><span class="line"><span class="comment">#同层目录下另一个文件夹branch中调用filename.py</span></span><br><span class="line"><span class="keyword">from</span> branch <span class="keyword">import</span> filename</span><br><span class="line"><span class="comment">#同层目录下另一个文件filename.py</span></span><br><span class="line"><span class="keyword">import</span> filename</span><br><span class="line">filename.hi()</span><br><span class="line"><span class="keyword">from</span> filename <span class="keyword">import</span> method</span><br><span class="line">method(a,b)               </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">.py文件中import另一个文件夹里的文件</span></span><br><span class="line"><span class="string">1.导入同级文件夹中的模块可使用 “import 包名.模块名” 形式进行导入。</span></span><br><span class="line"><span class="string">2.导入上级文件夹中的模块，需要将所需模块所在文件夹路径加入当前环境变量。</span></span><br><span class="line"><span class="string">sys.path.append(‘对应路径’)</span></span><br><span class="line"><span class="string">之后就可以正常import了</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">__name__属性</span></span><br><span class="line"><span class="string">一个模块被另一个程序第一次引入时，其主程序将运行。如果我们想在模块被引入时，模块中的某一程序块不执行，我们可以用 __name__ 属性来使该程序块仅在该模块自身运行时执行。</span></span><br><span class="line"><span class="string">每个模块都有一个 __name__ 属性，当其值是 __main__ 表明该模块自身在运行，否则是被引入。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;程序自身在运行&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;我来自另一模块&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(__file__)<span class="comment">#打印包括当前工作目录到当前脚本的绝对路径</span></span><br><span class="line">module.__file__<span class="comment">#模块完整路径</span></span><br></pre></td></tr></table></figure>

<p>内置库：<br>时间库time\  随机库random\  容器数据类型collection\  迭代器函数itertools</p>
<p>第三方库:<br>数据分析numpy、pandas\  数据可视化matplotlib\  机器学习scikit-learn\  深度学习Tensorflow&#x2F;pytorch</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install pymsql <span class="comment">#uninstall -U更新</span></span><br><span class="line">pip list</span><br></pre></td></tr></table></figure>

<h1 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#不知道用法的时候使用dir()查看可调用属性</span></span><br><span class="line"><span class="built_in">divmod</span>(x,y)<span class="comment">#返回（商，余数）元组</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">pow</span>(x, y[, z])</span><br><span class="line"></span><br><span class="line"><span class="built_in">dict</span>(<span class="built_in">zip</span>([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>],[<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]))</span><br><span class="line"><span class="comment">#&#123;&#x27;a&#x27;: &#x27;1&#x27;, &#x27;c&#x27;: &#x27;c&#x27;, &#x27;b&#x27;: &#x27;2&#x27;&#125;</span></span><br><span class="line"><span class="built_in">zip</span>([iterable,…])<span class="comment">#打包传入迭代器相同位置的元素，生成元组类型新迭代器</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">enumerate</span>(iterable[, start])<span class="comment">#将可遍历的数据对象组合为一个索引序列，同时包含索引和数据。</span></span><br><span class="line"><span class="comment">#参数start表示参数下标的起始位置。</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">enumerate</span>(a))</span><br><span class="line">[(<span class="number">0</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">3</span>, <span class="number">4</span>)]</span><br><span class="line"><span class="built_in">list</span>(<span class="built_in">enumerate</span>(a,<span class="number">2</span>))</span><br><span class="line">[(<span class="number">2</span>, <span class="number">1</span>), (<span class="number">3</span>, <span class="number">2</span>), (<span class="number">4</span>, <span class="number">3</span>), (<span class="number">5</span>, <span class="number">4</span>)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">map</span>(function, sequence[, sequence, …])</span><br><span class="line"><span class="comment">#传入的函数应用到序列中的所有的项</span></span><br><span class="line"><span class="comment">#当传入的为None而不是函数的时候，map()函数将序列元素组合返回新元祖</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">map</span>(add, [<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>])<span class="comment">#[4, 6]</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">map</span>(<span class="literal">None</span>, [<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>])<span class="comment">#[(1, 3), (2, 4)]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>eval</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">list_1 = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入一个列表：&quot;</span>))  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入的列表是：&quot;</span>, list_1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行一个字符串表达式并返回结果</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&#x27;2 + 2&#x27;</span>)  <span class="comment">#4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>作用：将用户输入的字符串解析为合法的 Python 表达式，例如列表、字典、元组等。<br>不需要显式转换输入数据类型直接解析成 Python 对象。</li>
<li>缺点：eval 动态特性虽强大，但存在安全隐患：输入恶意代码（例如删除文件、访问系统资源等）eval 会执行。</li>
<li>更安全替代方案：ast.literal_eval只允许执行安全的表达式。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ast</span><br><span class="line">list_1 = ast.literal_eval(<span class="built_in">input</span>(<span class="string">&quot;请输入一个列表：&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输入的列表是：&quot;</span>, list_1)</span><br></pre></td></tr></table></figure>

<h1 id="python-标准库"><a href="#python-标准库" class="headerlink" title="python 标准库"></a>python 标准库</h1><h2 id="os"><a href="#os" class="headerlink" title="os"></a>os</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="built_in">print</span>(os.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#返回绝对路径</span></span><br><span class="line">ret = os.path.abspath(<span class="string">&quot;demo4.py&quot;</span>)</span><br><span class="line"><span class="comment">#获取相对路径</span></span><br><span class="line">os.path.relpath(path,start)<span class="comment">#path 绝对路径</span></span><br><span class="line"><span class="comment">#start 相对的对象值。默认从当前python文件地址开始</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#遍历目录和其子目录，返回一个三元组（root路径, dirs文件夹, files文件）的生成器。</span></span><br><span class="line">os.walk(top[, topdown=<span class="literal">True</span>[, οnerrοr=<span class="literal">None</span>[, followlinks=<span class="literal">False</span>]]])</span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">&quot;.&quot;</span>, topdown=<span class="literal">False</span>):....</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">top：必需参数，需要遍历的目录路径。</span></span><br><span class="line"><span class="string">topdown：可选参数，True（默认值）则按照目录树自上而下的顺序进行。 False则遍历顺序根据文件系统实际情况。</span></span><br><span class="line"><span class="string">onerror：可选参数，遍历过程遇到错误时调用此参数定义的处理函数。默认抛出异常。</span></span><br><span class="line"><span class="string">followlinks：可选参数，False（默认值）则不会跟踪符号链接（symlinks）。True则对符号链接递归遍历。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">os.rename(old,new)<span class="comment">#重命名</span></span><br><span class="line">os.remove()<span class="comment">#删除文件 不能删除文件夹</span></span><br><span class="line"></span><br><span class="line">os.getcwd()<span class="comment">#当前工作目录 绝对路径</span></span><br><span class="line">os.chdir(dirname)<span class="comment">#改变工作目录到dirname</span></span><br><span class="line">os.listdir(<span class="string">&quot;&quot;</span>)<span class="comment">#返回指定目录下所有文件和目录名</span></span><br><span class="line">os.rmdir(<span class="string">&quot;&quot;</span>) <span class="comment">#删除目录</span></span><br><span class="line">os.mkdir(<span class="string">&quot;test&quot;</span>)</span><br><span class="line"></span><br><span class="line">os.path.isfile()<span class="comment">#是否是一个文件</span></span><br><span class="line">os.path.isdir()<span class="comment">#是否是一个目录</span></span><br><span class="line">os.path.isabs()<span class="comment">#是否是绝对路径</span></span><br><span class="line">os.path.exists()<span class="comment">#路径是否存在 true/false</span></span><br><span class="line">os.path.split()<span class="comment">#得到路径分割的元组，文件名+后缀</span></span><br><span class="line">os.path.splitext()<span class="comment">#得到路径+文件名，文件类型后缀</span></span><br><span class="line">os.path.dirname()<span class="comment">#只获取路径 去掉文件名+后缀</span></span><br><span class="line">os.path.basename()<span class="comment">#获取文件名/最底层目录</span></span><br><span class="line">os.path.abspath()<span class="comment">#获取绝对路径 </span></span><br><span class="line">os.system(<span class="string">&quot;ls&quot;</span>)<span class="comment">#当作shell用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#环境变量</span></span><br><span class="line"><span class="built_in">print</span>(os.environ[<span class="string">&#x27;JAVA_HOME&#x27;</span>])</span><br><span class="line">os.getenv(<span class="string">&quot;HOME&quot;</span>)</span><br><span class="line">os.environ<span class="comment">#获取所有环境变量</span></span><br><span class="line">os.environ.setdefault(<span class="string">&#x27;HOME&#x27;</span>,<span class="string">&#x27;path/&#x27;</span>)<span class="comment">#设置系统环境变量，仅代码运行时有效</span></span><br><span class="line"></span><br><span class="line">os.linesep<span class="comment">#指示当前平台的行终止符 &quot;\r\n&quot;</span></span><br><span class="line"></span><br><span class="line">os.stat(file)<span class="comment">#获取文件属性</span></span><br><span class="line">os.chmod(file)<span class="comment">#修改权限和时间戳</span></span><br><span class="line">os.path.join(<span class="built_in">dir</span>,filename)<span class="comment">#组合路径</span></span><br><span class="line">p1 = os.path.join(<span class="string">r&quot;F:\视频&quot;</span>,<span class="string">&quot;python&quot;</span>,<span class="string">&quot;str1.py&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#转义 路径分隔符号// 转换为\</span></span><br><span class="line">new_path = os.path.abspath(<span class="string">r&quot;F://webtest//autotestpytest//outFile//log&quot;</span>)</span><br><span class="line"></span><br><span class="line">os.path.getsize(filename)<span class="comment">#文件大小</span></span><br><span class="line">os.get_terminal_size()<span class="comment">#当前终端大小</span></span><br></pre></td></tr></table></figure>

<h2 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python 启动时，解释器会默认加载一些 modules 存放在sys.modules中</span></span><br><span class="line"><span class="comment"># sys.modules 变量包含一个由当前载入(完整且成功导入)到解释器的模块组成的字典, 模块名作为键, 它们的位置作为值</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(sys.modules))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;math&quot;</span> <span class="keyword">in</span> sys.modules)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;numpy&quot;</span> <span class="keyword">in</span> sys.modules)</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">list</span>(sys.modules.items())[:<span class="number">20</span>]:</span><br><span class="line">    <span class="built_in">print</span>(k, <span class="string">&quot;:&quot;</span>, v)</span><br><span class="line"></span><br><span class="line"><span class="comment">#sys.path路径中包含的模块</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path <span class="comment">#模块搜索路径</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&#x27;E:\\ipython&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\python37.zip&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\DLLs&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\lib&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\AppData\\Roaming\\Python\\Python37\\site-packages&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\lib\\site-packages&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\lib\\site-packages\\win32&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\lib\\site-packages\\win32\\lib&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\lib\\site-packages\\Pythonwin&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\Anaconda3\\lib\\site-packages\\IPython\\extensions&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;C:\\Users\\ibm\\.ipython&#x27;]</span></span><br><span class="line"><span class="string">sys.path的第一个路径是当前执行文件所在的文件夹</span></span><br><span class="line"><span class="string">若需将不在该文件夹内的模块导入，需要将模块的路径添加到sys.path</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">sys.version <span class="comment">#python版本</span></span><br><span class="line">sys.exit(<span class="number">0</span>) <span class="comment">#正常退出</span></span><br><span class="line">sys.maxint <span class="comment">#最大int值</span></span><br><span class="line">sys.platform <span class="comment">#操作系统平台名称 mac:darwin达尔文</span></span><br><span class="line">sys.stdout.write(<span class="string">&#x27;nb&#x27;</span>) <span class="comment">#标准输出</span></span><br><span class="line">val=sys.stdin.readline()[:-<span class="number">1</span>] <span class="comment">#标准输入</span></span><br><span class="line">sys.getrecursionlimit() <span class="comment">#获取最大递归层数 默认1000 </span></span><br><span class="line">sys.setrecursionlimit(<span class="number">1200</span>) <span class="comment">#设置最大递归层数 不要动</span></span><br><span class="line">sys.getdefaultencoding() <span class="comment">#获取解释器默认编码 utf-8</span></span><br><span class="line">sys.getfilesystemencoding() <span class="comment">#获取内存数据存到文件里的默认编码 python3：utf-8 python2：ascii</span></span><br><span class="line"></span><br><span class="line">num = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>])</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">sys.argv is a list that contains the command-line arguments passed to the script.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="time"><a href="#time" class="headerlink" title="time"></a>time</h2><ul>
<li>时间表示有3种</li>
</ul>
<ol>
<li>时间戳，从1970.1.1起的秒数</li>
<li>格式化时间字符串 ‘2020-10-01 17:00’</li>
<li>元组 (struct_time)共9个元素<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/23786ad2ab9d4f57ae6a27d31dc9d704.png" alt="在这里插入图片描述"></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="built_in">help</span>(time)</span><br><span class="line"></span><br><span class="line"><span class="comment">#1.获取现在时间</span></span><br><span class="line">seconds=time.time() <span class="comment">#时间戳 seconds</span></span><br><span class="line">time.localtime()<span class="comment">#当前时间tuple</span></span><br><span class="line">time.strftime(<span class="built_in">format</span>)<span class="comment">#当前时间格式化字符串string</span></span><br><span class="line">s = time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, time.localtime())</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">格式化字符串时间:&#x27;Thu Aug 29 16:44:52 2019&#x27; </span></span><br><span class="line"><span class="string">tuple: t_local time.struct_time(tm_year=2019, tm_mon=8, tm_mday=29, tm_hour=16, tm_min=43, tm_sec=37, tm_wday=3, tm_yday=241, tm_isdst=0)</span></span><br><span class="line"><span class="string">t_UTC time.struct_time(tm_year=2019, tm_mon=8, tm_mday=29, tm_hour=8, tm_min=43, tm_sec=37, tm_wday=3, tm_yday=241, tm_isdst=0)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">tm_year ：年</span></span><br><span class="line"><span class="string">tm_mon ：月（1-12）</span></span><br><span class="line"><span class="string">tm_mday ：日（1-31）</span></span><br><span class="line"><span class="string">tm_hour ：时（0-23）</span></span><br><span class="line"><span class="string">tm_min ：分（0-59）</span></span><br><span class="line"><span class="string">tm_sec ：秒（0-59）</span></span><br><span class="line"><span class="string">tm_wday ：星期几（0-6,0表示周日）</span></span><br><span class="line"><span class="string">tm_yday ：一年中的第几天（1-366）</span></span><br><span class="line"><span class="string">tm_isdst ：是否是夏令时（默认为-1）</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#2. 时间转换</span></span><br><span class="line">t_local = time.localtime([seconds])<span class="comment">#时间戳-&gt;本地时间的tuple 默认当前时间</span></span><br><span class="line">t_UTC = time.gmtime()<span class="comment">#时间戳-&gt;UTC世界统一时间 格林威治时间的tuple  UTC比北京时间晚8小时</span></span><br><span class="line">time.strptime(string,[<span class="built_in">format</span>]) <span class="comment">#格式化字符串时间-&gt;tuple</span></span><br><span class="line"></span><br><span class="line">time.strftime(<span class="built_in">format</span>,[t])<span class="comment">#把tuple转化成格式化字符串时间 默认是当前时间</span></span><br><span class="line"><span class="comment">#format %Y-%m-%d %H:%M </span></span><br><span class="line"></span><br><span class="line">time.mktime(t) <span class="comment">#将tuple struct_time-&gt;时间戳</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&quot;%Y-%m-%d %A %H:%M:%S&quot;,</span></span><br><span class="line"><span class="string">&#x27;2019-08-29 Thursday 16:54:35&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注：</span></span><br><span class="line"><span class="string">年%Y（4个数字表示年份）</span></span><br><span class="line"><span class="string">月%m（01 - 12）   %B %b</span></span><br><span class="line"><span class="string">日%d （01 - 31）  </span></span><br><span class="line"><span class="string">星期%A %a小写都是英文简写</span></span><br><span class="line"><span class="string">时%H（24小时制，0-23）%I（12小时制，0-11）   </span></span><br><span class="line"><span class="string">分%M（00 - 59） </span></span><br><span class="line"><span class="string">秒%S（00 - 61） </span></span><br><span class="line"><span class="string">%j  一年中的第几天（001 - 366） </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">%c  本地相应的日期和时间的字符串表示（如：15/08/27 10:20:06）       </span></span><br><span class="line"><span class="string">%f  微妙（范围0.999999）     </span></span><br><span class="line"><span class="string">%p  本地am或者pm的相应符         </span></span><br><span class="line"><span class="string">%w  一个星期中的第几天（0 - 6，0是星期天）    </span></span><br><span class="line"><span class="string">%W  和%w基本相同，不同的是%W以星期一为一个星期的开始。    </span></span><br><span class="line"><span class="string">%x  本地相应日期字符串（如15/08/01）     </span></span><br><span class="line"><span class="string">%X  本地相应时间字符串（如08:08:10）     </span></span><br><span class="line"><span class="string">%z  与UTC时间的间隔（如果是本地时间，返回空字符串）</span></span><br><span class="line"><span class="string">%Z  时区的名字（如果是本地时间，返回空字符串）  </span></span><br><span class="line"><span class="string">%%  ‘%’字符  </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>计时器</span><br><span class="line">t_1_start = time.time()<span class="comment">#返回自1970.1.1以来的秒数，记录sleep</span></span><br><span class="line">t_2_start = time.perf_counter()<span class="comment">#随意选取一个时间点，记录现在时间到该时间点的间隔秒数，记录sleep</span></span><br><span class="line">t_3_start = time.process_time()<span class="comment">#随意选取一个时间点，记录现在时间到该时间点的间隔秒数，不记录sleep</span></span><br><span class="line"><span class="built_in">print</span>(t_1_start)</span><br><span class="line"><span class="built_in">print</span>(t_2_start)</span><br><span class="line"><span class="built_in">print</span>(t_3_start)</span><br><span class="line"></span><br><span class="line">res = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">    res += i</span><br><span class="line">    </span><br><span class="line">time.sleep(<span class="number">5</span>)<span class="comment"># 调用time模块中的sleep()  休息5秒钟</span></span><br><span class="line"></span><br><span class="line">t_1_end = time.time()</span><br><span class="line">t_2_end = time.perf_counter()</span><br><span class="line">t_3_end = time.process_time()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;time方法：&#123;:.3f&#125;秒&quot;</span>.<span class="built_in">format</span>(t_1_end-t_1_start))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;perf_counter方法：&#123;:.3f&#125;秒&quot;</span>.<span class="built_in">format</span>(t_2_end-t_2_start))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;process_time方法：&#123;:.3f&#125;秒&quot;</span>.<span class="built_in">format</span>(t_3_end-t_3_start))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1567068710.7269545</span></span><br><span class="line"><span class="string">6009.0814064</span></span><br><span class="line"><span class="string">2.25</span></span><br><span class="line"><span class="string">time方法：5.128秒</span></span><br><span class="line"><span class="string">perf_counter方法：5.128秒</span></span><br><span class="line"><span class="string">process_time方法：0.125秒</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a>datetime</h2><p>优先用datetime而非time,这个更常用<br>包含类：<br>datetime.date 表示日期的类<br>datetime.time  表示时间的类<br>datetime.datetime 表示日期时间<br>datetime.timedelta 表示时间间隔<br>datetime.tzinfo 表示时区相关，略</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span>(datetime.date)</span><br><span class="line"><span class="built_in">help</span>(datetime.datetime)</span><br><span class="line"></span><br><span class="line">datetime.date.today <span class="comment">#返回今天的date类 datetime.date(2024,12,1)</span></span><br><span class="line">datetime.date.timetuple(date) <span class="comment">#返回输入时间的tuple</span></span><br><span class="line">datetime.date.timetuple(datetime.date.today())</span><br><span class="line"></span><br><span class="line">datetime.date.fromtimestamp(seconds) <span class="comment">#返回从1970.1.1到这个秒数对应的年月日的date类</span></span><br><span class="line"> </span><br><span class="line">datetime.datetime.now()<span class="comment">#显示当前日期时间到毫秒</span></span><br><span class="line"><span class="comment">#2022-04-08 17:21:29.960512</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式化输出</span></span><br><span class="line"><span class="built_in">print</span>(gettime.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>))</span><br><span class="line"></span><br><span class="line">.timestamp()</span><br><span class="line">.today()</span><br><span class="line">.year()</span><br><span class="line">.timetuple()</span><br></pre></td></tr></table></figure>
<h2 id="random"><a href="#random" class="headerlink" title="random"></a>random</h2><p>伪随机数，除加密解密算法外可用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> *<span class="comment">#直接使用</span></span><br><span class="line"><span class="keyword">import</span> random <span class="comment">#前缀加random.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1.随机种子 相同种子产生相同随机数</span></span><br><span class="line"><span class="comment">#若未设置随机种子，则以系统当前时间为默认值</span></span><br><span class="line">seed(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.随机整数</span></span><br><span class="line">numbers = [randint(<span class="number">1</span>,<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="comment">#[a, b]之间的随机整数</span></span><br><span class="line"></span><br><span class="line">numbers = [randrange(<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="comment">#[0, a)之间的随机整数 左闭右开</span></span><br><span class="line"></span><br><span class="line">numbers = [randrange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="comment">#[a, b)之间以step为步长的随机整数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3.随机浮点数</span></span><br><span class="line">numbers = [random() <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="comment">#[0.0, 1.0)之间的随机浮点数</span></span><br><span class="line"></span><br><span class="line">numbers = [uniform(<span class="number">2.1</span>, <span class="number">3.5</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="comment">#[a, b]之间的均匀分布浮点数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4.随机化返回元素</span></span><br><span class="line">choice([<span class="string">&#x27;win&#x27;</span>, <span class="string">&#x27;lose&#x27;</span>, <span class="string">&#x27;draw&#x27;</span>])</span><br><span class="line">choice(<span class="string">&quot;python&quot;</span>) <span class="comment">#p/y/t/h/...</span></span><br><span class="line"><span class="comment">#随机返回一个元素</span></span><br><span class="line"></span><br><span class="line">random.sample(s,<span class="number">4</span>)<span class="comment">#从里面取4个，不重复，s是序列</span></span><br><span class="line"></span><br><span class="line">choices([<span class="string">&#x27;win&#x27;</span>, <span class="string">&#x27;lose&#x27;</span>, <span class="string">&#x27;draw&#x27;</span>], k=<span class="number">5</span>)</span><br><span class="line"><span class="comment">#对序列类型进行k次重复采样，可设置权重</span></span><br><span class="line">choices([<span class="string">&#x27;win&#x27;</span>, <span class="string">&#x27;lose&#x27;</span>, <span class="string">&#x27;draw&#x27;</span>], [<span class="number">4</span>,<span class="number">4</span>,<span class="number">2</span>], k=<span class="number">10</span>)</span><br><span class="line"><span class="comment">#设置权重4,4,2</span></span><br><span class="line"></span><br><span class="line">numbers = [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>, <span class="string">&quot;four&quot;</span>]</span><br><span class="line">shuffle(numbers)<span class="comment">#打乱序列</span></span><br><span class="line"></span><br><span class="line">sample([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>], k=<span class="number">3</span>)<span class="comment">#从pop类型中随机选取k个元素，以列表类型返回</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#5.概率分布——以高斯分布为例</span></span><br><span class="line">number = gauss(<span class="number">0</span>, <span class="number">1</span>)<span class="comment">#生产一个符合高斯分布的随机数 gauss(mean, std)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">res = [gauss(<span class="number">0</span>, <span class="number">1</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>)]<span class="comment">#生成多个</span></span><br><span class="line">plt.hist(res, bins=<span class="number">1000</span>)<span class="comment">#bins直方图条形的个数</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">#6.实战：验证码4位字符生成</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(string.digits)</span><br><span class="line"><span class="built_in">print</span>(string.ascii_letters)</span><br><span class="line"></span><br><span class="line">s=string.digits + string.ascii_letters <span class="comment">#0-9+a-z</span></span><br><span class="line">v=random.sample(s,<span class="number">4</span>)<span class="comment">#取4个 </span></span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(v))</span><br></pre></td></tr></table></figure>
<h2 id="pickle"><a href="#pickle" class="headerlink" title="pickle"></a>pickle</h2><p>序列化对象、在磁盘上保存、需要时取出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pickle.dumps(data) <span class="comment">#序列化：把数据转换成16进制的字节符号</span></span><br><span class="line">pickle.loads(data_dump)<span class="comment">#反序列化</span></span><br><span class="line"></span><br><span class="line">f=<span class="built_in">open</span>(<span class="string">&quot;game.pkl&quot;</span>,<span class="string">&quot;wb&quot;</span>)<span class="comment">#pickle文件</span></span><br><span class="line">f.write(data_dump) <span class="comment">#==pickle.dump(data,f)</span></span><br><span class="line"></span><br><span class="line">f=<span class="built_in">open</span>(<span class="string">&quot;game.pkl&quot;</span>,<span class="string">&quot;rb&quot;</span>)<span class="comment">#read</span></span><br><span class="line">pickle.load(f)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">dump 写入文件</span></span><br><span class="line"><span class="string">dumps 生成序列化的字符串</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">load 加载文件</span></span><br><span class="line"><span class="string">loads 把序列化字符串反序列化</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/images/python%E5%A4%A7%E5%85%A8.assets/78a029abb9b04181b5611239dbaedca3.png" alt="在这里插入图片描述"></p>
<h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><p>javascript object notation<br><strong>引号必须是双引号</strong><br>json.dumps()：将Python对象转换为JSON字符串。<br>json.dump()：将Python对象写入文件。<br>json.loads()：将JSON字符串转换为Python对象。<br>json.load()：从文件读取JSON数据并转换为Python对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment">#序列化 python对象-&gt;json</span></span><br><span class="line"><span class="comment"># Python对象</span></span><br><span class="line">data = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">30</span>, <span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 转换为JSON字符串</span></span><br><span class="line">json_str = json.dumps(data)</span><br><span class="line"><span class="built_in">print</span>(json_str)</span><br><span class="line">json_str = json.dumps(data, indent=<span class="number">4</span>)<span class="comment">#增加缩进</span></span><br><span class="line"><span class="built_in">print</span>(json_str)</span><br><span class="line"></span><br><span class="line"><span class="comment">#反序列化 json格式-&gt;python对象</span></span><br><span class="line"><span class="comment"># JSON字符串</span></span><br><span class="line">json_str = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 30, &quot;city&quot;: &quot;New York&quot;&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 转换为Python对象</span></span><br><span class="line">data = json.loads(json_str)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment">#写json到文件</span></span><br><span class="line">data = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">30</span>, <span class="string">&quot;city&quot;</span>: <span class="string">&quot;New York&quot;</span>&#125;</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;data.json&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    json.dump(data, file, indent=<span class="number">4</span>)</span><br><span class="line"><span class="comment">#使用json.dump()将Python对象直接写入JSON文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#读取json文件并转换成python对象</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;data.json&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    data = json.load(file)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="pickle-v-s-json"><a href="#pickle-v-s-json" class="headerlink" title="pickle v.s. json"></a>pickle v.s. json</h2><ol>
<li>pickle只支持python及python的所有数据类型,class-&gt;object,function,datetime</li>
<li>json 所有语言都支持，只支持常规数据类型 str&#x2F;int&#x2F;dict&#x2F;set&#x2F;list&#x2F;tuple,接口常用【常用】</li>
</ol>
<h2 id="hashlib加密"><a href="#hashlib加密" class="headerlink" title="hashlib加密"></a>hashlib加密</h2><p>不同的输入可能散列成相同的输出。<br>sha加密算法</p>
<h2 id="shuti模块"><a href="#shuti模块" class="headerlink" title="shuti模块"></a>shuti模块</h2><p>文件复制打包压缩</p>
<h2 id="re正则模块"><a href="#re正则模块" class="headerlink" title="re正则模块"></a>re正则模块</h2><p>正则表达式可视化 <a target="_blank" rel="noopener" href="https://regexper.com/">https://regexper.com/</a><br>正则表达式 regular expression 简写为RegExp</p>
<table>
<thead>
<tr>
<th>名词字符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>除回车、换行符之外所有字符</td>
</tr>
<tr>
<td>\d</td>
<td>[0-9]数字字符</td>
</tr>
<tr>
<td>\D</td>
<td>[^0-9]非数字字符</td>
</tr>
<tr>
<td>\s</td>
<td>空白符</td>
</tr>
<tr>
<td>\S</td>
<td>非空白符</td>
</tr>
<tr>
<td>\w</td>
<td>[a-zA-Z_0-9]单词字符（字母、数字、下划线）</td>
</tr>
<tr>
<td>\W</td>
<td>非单词字符</td>
</tr>
<tr>
<td>^</td>
<td>匹配开头，多行模式时为每行开头</td>
</tr>
<tr>
<td>$</td>
<td>匹配结尾，多行模式同理</td>
</tr>
<tr>
<td>‘s’</td>
<td>匹配空白字符,\t,\n,\r</td>
</tr>
<tr>
<td>\b</td>
<td>单词边界</td>
</tr>
<tr>
<td>\B</td>
<td>非单词边界</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>量词字符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>?</td>
<td>出现0或1次，最多一次</td>
</tr>
<tr>
<td>+</td>
<td>出现1次或多次，至少一次</td>
</tr>
<tr>
<td>*</td>
<td>出现零次或多次，即任意次</td>
</tr>
<tr>
<td>.</td>
<td>任意字符</td>
</tr>
<tr>
<td>.*</td>
<td>任意个任意字符 可以是0个</td>
</tr>
<tr>
<td>.+</td>
<td>至少是一个任意字符</td>
</tr>
<tr>
<td>{n}</td>
<td>出现n次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>出现n-m次</td>
</tr>
<tr>
<td>{n,}</td>
<td>至少出现n次</td>
</tr>
<tr>
<td>(…)</td>
<td>分组匹配，提取每个组对应内容</td>
</tr>
<tr>
<td>[abc]</td>
<td>匹配指定几个字符</td>
</tr>
</tbody></table>
<p><code>(abc)&#123;2&#125;a(123|45)</code>其中<code>|</code> 是或运算</p>
<p>转义<code>\</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">f=<span class="built_in">open</span>(<span class="string">&quot;filename.txt&quot;</span>)</span><br><span class="line">re.findall(<span class="string">&quot;[0-9]&#123;11&#125;&quot;</span>,f.read())<span class="comment">#把所有匹配到的放到列表中的元素返回</span></span><br><span class="line"></span><br><span class="line">re.<span class="keyword">match</span>()<span class="comment">#从头开始匹配成功才返回，若没有匹配到，则返回None。可以匹配到，但是不在字符串的起始位置，仍旧会返回None。</span></span><br><span class="line"></span><br><span class="line">re.search()<span class="comment">#匹配包含 找到一个就可以</span></span><br><span class="line"></span><br><span class="line">re.split()<span class="comment">#把匹配到的字符当作列表分隔符</span></span><br><span class="line"></span><br><span class="line">re.fullmatch()<span class="comment">#全部匹配才行</span></span><br><span class="line"></span><br><span class="line">re.sub(pattern,repl,string,count,flags)<span class="comment">#匹配字符并替换</span></span><br><span class="line">re.sub(<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;ABC&quot;</span>,<span class="string">&quot;abcdefgabc&quot;</span>)<span class="comment">#&#x27;ABCdefgabc&#x27;</span></span><br><span class="line">re.sub(<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;ABC&quot;</span>,<span class="string">&quot;abcdefgabc&quot;</span>,count=<span class="number">2</span>)<span class="comment">#&#x27;ABCdefgABC&#x27;</span></span><br><span class="line"></span><br><span class="line">(?:...)<span class="comment">#非捕获组，仅用于逻辑分组；</span></span><br><span class="line"><span class="comment">#比如：将文本切割为：每段最多 150 个“任意字符（含换行）”，但必须以 \n 结尾。</span></span><br><span class="line">pattern = <span class="string">r&#x27;(?:[\s\S]&#123;1,149&#125;?\n)&#x27;</span></span><br><span class="line">matches = re.findall(pattern, text)</span><br><span class="line"></span><br><span class="line">(?=...)<span class="comment"># 是零宽断言，表示后面是...，...捕获到的不包含在结果里</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&quot;apple123 banana456&quot;</span></span><br><span class="line">matches = re.findall(<span class="string">r&#x27;\w+(?=\d)&#x27;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(matches)<span class="comment">#[&#x27;apple&#x27;, &#x27;banana&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#re.M多行模式</span></span><br><span class="line"><span class="comment">#作用：使^ 和 $ 会匹配每一行的开头和结尾！</span></span><br><span class="line">text = <span class="string">&quot;apple\nbanana\ncherry&quot;</span></span><br><span class="line">matches = re.findall(<span class="string">r&#x27;^banana&#x27;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(matches) <span class="comment"># []</span></span><br><span class="line">matches = re.findall(<span class="string">r&#x27;^banana&#x27;</span>, text, re.MULTILINE)</span><br><span class="line"><span class="built_in">print</span>(matches) <span class="comment">#[banana] #因为会匹配每一行，而不是整个text的开头是banana</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;(?P&lt;name&gt;...)&#x27;</span><span class="comment">#分组的情况下给一个name作为groupdict()的key</span></span><br><span class="line"><span class="comment">#example:</span></span><br><span class="line">a=re.search(<span class="string">&quot;(?P&lt;province&gt;[0-9]&#123;3&#125;)(?P&lt;city&gt;[0-9]&#123;3&#125;)(?P&lt;birthday&gt;[0-9]&#123;4&#125;)&quot;</span>,data) </span><br><span class="line">a.groups()<span class="comment">#(&#x27;371&#x27;,&#x27;481&#x27;,&#x27;1993&#x27;)</span></span><br><span class="line">a.groupdict()<span class="comment">#&#123;&#x27;province&#x27;:&#x27;371&#x27;,&#x27;481&#x27;,&#x27;1993&#x27;,&#x27;birthday&#x27;:&#x27;1993&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#批量匹配</span></span><br><span class="line">p=re.<span class="built_in">compile</span>(<span class="string">&quot;pattern&quot;</span>)</span><br><span class="line">p.s <span class="comment">#打印所有可用方法 search,split,sub,</span></span><br><span class="line">p.search(<span class="string">&quot;string&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#flags是标识符</span></span><br><span class="line">re.I <span class="comment">#忽略大小写</span></span><br><span class="line">re.M <span class="comment">#多行模式 默认只找第一行</span></span><br><span class="line">re.S <span class="comment">#\n 等特殊字符也可以匹配</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#note: 要匹配一些表达式规则中的字符 前面加\ &#x27;\+\*&#x27; &#x27;\.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;贪婪模式：默认，尽可能多匹配字符</span></span><br><span class="line"><span class="string">非贪婪模式：带?即可</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">content = <span class="string">&quot;&quot;&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Title&lt;/title&gt;&quot;&quot;&quot;</span></span><br><span class="line">p = re.<span class="built_in">compile</span>(<span class="string">&quot;&lt;.*?&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在content里面使用正则表达式查找内容，将找到的内容赋值给变量</span></span><br><span class="line">message = p.findall(content)</span><br><span class="line"><span class="built_in">print</span>(message)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">find ./ -name *.<span class="property">txt</span> <span class="comment">//查找./目录下的任何Txt文件 </span></span><br><span class="line"></span><br><span class="line">\d? <span class="number">0</span>个或<span class="number">1</span>个数字</span><br><span class="line">\d+ <span class="number">1</span>~n个数字</span><br><span class="line">\d&#123;<span class="number">3</span>&#125; <span class="number">3</span>个数字</span><br><span class="line">\d&#123;<span class="number">3</span>,<span class="number">5</span>&#125; <span class="number">3</span>~<span class="number">5</span>个数字</span><br><span class="line">\d*  <span class="number">0</span>~n个数字</span><br><span class="line">\b 单词边界 </span><br><span class="line">\B 非单词边界</span><br><span class="line"></span><br><span class="line">\bis\b 表示句子中的<span class="variable language_">this</span> is a pen;里的单词is会被识别 而不会识别<span class="variable language_">this</span>里的<span class="title function_">is</span></span><br><span class="line"></span><br><span class="line">(abc) abc里是一个分组group 便于提取出来</span><br><span class="line">abc&#123;<span class="number">2</span>&#125; 只是c循环两次</span><br><span class="line">(abc)&#123;<span class="number">2</span>&#125;</span><br><span class="line">分组在引用时分别为$1 $2 $3</span><br><span class="line">忽略某分组 直接在分组内加上?:</span><br><span class="line">(?:by).(ok) =&gt;by被忽略</span><br><span class="line"></span><br><span class="line">&#123;<span class="number">4</span>&#125;量词 数量 表示<span class="number">4</span>个数字</span><br><span class="line"></span><br><span class="line">元字符[] 类是符合某些特性的对象 一个泛指</span><br><span class="line">[abc]把字符a或b或c归为一类</span><br><span class="line"><span class="string">&#x27;a1b2c3d4&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[abc]/g</span>,<span class="string">&#x27;x&#x27;</span>) =&gt;  x1x2x3d4</span><br><span class="line">[\-]匹配\或-</span><br><span class="line"></span><br><span class="line">元字符^ 为反向类 即不属于某类内容 [^abc] 表示不是字符a、b、c的内容</span><br><span class="line">[a-z]表示从a-z的任意字符（闭区间）</span><br><span class="line">还可以连写 [a-zA-Z]</span><br><span class="line"><span class="string">&#x27;2016-09-12&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[0-9-]/g</span>,<span class="string">&#x27;A&#x27;</span>) =&gt; <span class="string">&#x27;AAAAAAAAAA&#x27;</span></span><br><span class="line"><span class="string">&#x27;2016-09-12&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[0-9]/g</span>,<span class="string">&#x27;A&#x27;</span>) =&gt; <span class="string">&#x27;AAAA-AA-AA&#x27;</span></span><br><span class="line"></span><br><span class="line">^ 表示之后是开头</span><br><span class="line">$表示之前的是结尾</span><br><span class="line"></span><br><span class="line">/reg/g <span class="comment">// /g为全局匹配,i忽略大小写，m多行搜索(即只要有换行符就算下一行</span></span><br><span class="line"><span class="comment">//  /gi 全局匹配并且忽略大小写</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//例1 匹配http://头的jpg文件地址</span></span><br><span class="line"><span class="attr">http</span>:\/\/.+\.<span class="property">jpg</span> </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">注意！斜杠和点需要转移！</span></span><br><span class="line"><span class="comment">当我们要求把末尾是.jpg的http://的头去掉，即/http:(\/\/.\.jpg)/</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//例2 日期替换</span></span><br><span class="line">^(<span class="regexp">/d&#123;4&#125;)[/-](\d&#123;2&#125;)[/-](\d&#123;2&#125;)$ </span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/可以使格式类似于2006/</span><span class="number">02</span>/<span class="number">03</span>和<span class="number">2006</span>-<span class="number">02</span>-<span class="number">03</span>这种被提取出来</span><br><span class="line"><span class="comment">//其中每一个组分别为$1 $2 $3 </span></span><br><span class="line"><span class="comment">//replace with $2-$3-$1 可得 02-03-2006</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//js里的正则表达式调用格式</span></span><br><span class="line"><span class="comment">//方法1</span></span><br><span class="line">str.<span class="title function_">replace</span>(reg,<span class="string">&#x27;a&#x27;</span>) </span><br><span class="line"><span class="comment">//reg正则表达式 &#x27;a&#x27;替换成a</span></span><br><span class="line"><span class="comment">//方法2</span></span><br><span class="line"><span class="keyword">var</span> reg =<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;\\bis\\b&#x27;</span>) <span class="comment">//注意这个\要转移</span></span><br><span class="line"><span class="keyword">var</span> reg =<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;\\bis\\b&#x27;</span>,<span class="string">&#x27;g&#x27;</span>) <span class="comment">//全局匹配</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//正则表达式里分为原义文本字符、元字符（即有特殊含义的字符）</span></span><br></pre></td></tr></table></figure>

<h2 id="collections"><a href="#collections" class="headerlink" title="collections"></a>collections</h2><p>容器数据类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>namedtuple——具名元组</span><br><span class="line">collections.namedtuple(typename, field_names, *, rename=<span class="literal">False</span>, defaults=<span class="literal">None</span>, module=<span class="literal">None</span>)<span class="comment">#typename 是元组名字，field_names 是域名</span></span><br><span class="line">Point = collections.namedtuple(<span class="string">&quot;Point&quot;</span>, [<span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>])</span><br><span class="line">p = Point(<span class="number">1</span>, y=<span class="number">2</span>)</span><br><span class="line">p <span class="comment">#Point(x=1, y=2)</span></span><br><span class="line"><span class="built_in">print</span>(p.x)<span class="comment">#调用属性</span></span><br><span class="line"><span class="built_in">print</span>(p.y)</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">1</span>])</span><br><span class="line">x, y = p</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(p, <span class="built_in">tuple</span>))<span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#模拟扑克牌</span></span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">Card = collections.namedtuple(<span class="string">&quot;Card&quot;</span>, [<span class="string">&quot;rank&quot;</span>, <span class="string">&quot;suit&quot;</span>])</span><br><span class="line">ranks = [<span class="built_in">str</span>(n) <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">11</span>)] + <span class="built_in">list</span>(<span class="string">&quot;JQKA&quot;</span>)   </span><br><span class="line">suits = <span class="string">&quot;spades diamonds clubs hearts&quot;</span>.split()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ranks&quot;</span>, ranks)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;suits&quot;</span>, suits)</span><br><span class="line">cards = [Card(rank, suit) <span class="keyword">for</span> rank <span class="keyword">in</span> ranks</span><br><span class="line">                          <span class="keyword">for</span> suit <span class="keyword">in</span> suits]</span><br><span class="line">cards</span><br><span class="line"></span><br><span class="line"><span class="comment"># 洗牌</span></span><br><span class="line">shuffle(cards)</span><br><span class="line">cards</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机抽一张牌</span></span><br><span class="line">choice(cards)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 随机抽多张牌</span></span><br><span class="line">sample(cards, k=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>Counter——计数器工具</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">s = <span class="string">&quot;牛奶奶找刘奶奶买牛奶&quot;</span></span><br><span class="line">colors = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>]</span><br><span class="line">cnt_str = Counter(s)</span><br><span class="line">cnt_color = Counter(colors)</span><br><span class="line"><span class="built_in">print</span>(cnt_str)</span><br><span class="line"><span class="built_in">print</span>(cnt_color)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(Counter(), <span class="built_in">dict</span>))<span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#most_commom(n)提供 n 个频率最高的元素和计数</span></span><br><span class="line">cnt_color.most_common(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#元素展开</span></span><br><span class="line"><span class="built_in">list</span>(cnt_str.elements())<span class="comment">#[&#x27;牛&#x27;, &#x27;牛&#x27;, &#x27;奶&#x27;, &#x27;奶&#x27;, &#x27;奶&#x27;, &#x27;奶&#x27;, &#x27;奶&#x27;, &#x27;找&#x27;, &#x27;刘&#x27;, &#x27;买&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#加减</span></span><br><span class="line">c = Counter(a=<span class="number">3</span>, b=<span class="number">1</span>)</span><br><span class="line">d = Counter(a=<span class="number">1</span>, b=<span class="number">2</span>)</span><br><span class="line">c+d</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="itertools"><a href="#itertools" class="headerlink" title="itertools"></a>itertools</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>排列组合迭代器</span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.product(<span class="string">&#x27;ABC&#x27;</span>, <span class="string">&#x27;01&#x27;</span>):<span class="comment">#笛卡尔积</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, &#x27;0&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, &#x27;1&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;B&#x27;, &#x27;0&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;B&#x27;, &#x27;1&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;C&#x27;, &#x27;0&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;C&#x27;, &#x27;1&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.product(<span class="string">&#x27;ABC&#x27;</span>, repeat=<span class="number">3</span>):<span class="comment">#可以出现重复三次 &#123;A,A,A&#125;是可接受的</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.permutations(<span class="string">&#x27;ABCD&#x27;</span>, <span class="number">3</span>):   <span class="comment"># 3 是排列的长度</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.permutations(<span class="built_in">range</span>(<span class="number">3</span>)):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(0, 1, 2)</span></span><br><span class="line"><span class="string">(0, 2, 1)</span></span><br><span class="line"><span class="string">(1, 0, 2)</span></span><br><span class="line"><span class="string">(1, 2, 0)</span></span><br><span class="line"><span class="string">(2, 0, 1)</span></span><br><span class="line"><span class="string">(2, 1, 0)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.combinations(<span class="string">&#x27;ABCD&#x27;</span>, <span class="number">2</span>):  <span class="comment"># 2是组合的长度</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, &#x27;D&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;B&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;B&#x27;, &#x27;D&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;C&#x27;, &#x27;D&#x27;)</span></span><br><span class="line"><span class="string">组合中&#123;A,B&#125;==&#123;B,A&#125; 与顺序无关，都属于同一种</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.combinations(<span class="built_in">range</span>(<span class="number">4</span>), <span class="number">3</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.combinations_with_replacement(<span class="string">&#x27;ABC&#x27;</span>, <span class="number">2</span>):  <span class="comment"># 2是组合的长度； </span></span><br><span class="line"><span class="comment">#combinations_with_replacement——元素可重复组合</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>拉链<span class="built_in">zip</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">zip</span>(<span class="string">&quot;ABC&quot;</span>, <span class="string">&quot;012&quot;</span>, <span class="string">&quot;xyz&quot;</span>):<span class="comment">#短拉链</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">短拉链：长度不一时，执行到最短的对象处，就停止</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, &#x27;0&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;B&#x27;, &#x27;1&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;C&#x27;, &#x27;2&#x27;, &#x27;z&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">zip</span>(<span class="string">&quot;ABC&quot;</span>, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]):          <span class="comment"># 注意zip是内置的，不需要加itertools</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, 0)</span></span><br><span class="line"><span class="string">(&#x27;B&#x27;, 1)</span></span><br><span class="line"><span class="string">(&#x27;C&#x27;, 2)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.zip_longest(<span class="string">&quot;ABC&quot;</span>, <span class="string">&quot;012345&quot;</span>):<span class="comment">#长拉链</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">长拉链：长度不一时，执行到最长的对象处，就停止，缺省元素用None或指定字符替代</span></span><br><span class="line"><span class="string">(&#x27;A&#x27;, &#x27;0&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;B&#x27;, &#x27;1&#x27;)</span></span><br><span class="line"><span class="string">(&#x27;C&#x27;, &#x27;2&#x27;)</span></span><br><span class="line"><span class="string">(None, &#x27;3&#x27;)</span></span><br><span class="line"><span class="string">(None, &#x27;4&#x27;)</span></span><br><span class="line"><span class="string">(None, &#x27;5&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.zip_longest(<span class="string">&quot;ABC&quot;</span>, <span class="string">&quot;012345&quot;</span>, fillvalue = <span class="string">&quot;?&quot;</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>无穷迭代器</span><br><span class="line">count(start=<span class="number">0</span>, step=<span class="number">1</span>)——计数</span><br><span class="line">创建一个迭代器，它从 start 值开始，返回均匀间隔的值</span><br><span class="line">itertools.count(<span class="number">10</span>)</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line">cycle(iterable)——循环</span><br><span class="line">创建一个迭代器，返回 iterable 中所有元素，无限重复</span><br><span class="line">itertools.cycle(<span class="string">&quot;ABC&quot;</span>)</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line">repeat(<span class="built_in">object</span> [, times])——重复</span><br><span class="line">创建一个迭代器，不断重复 <span class="built_in">object</span> 。除非设定参数 times ，否则将无限重复</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.repeat(<span class="number">10</span>, <span class="number">3</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)<span class="comment">#重复3次10</span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>其他</span><br><span class="line">（<span class="number">1</span>）chain(iterables)——锁链</span><br><span class="line">把一组迭代对象串联起来，形成一个更大的迭代器</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> itertools.chain(<span class="string">&#x27;ABC&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="built_in">enumerate</span>(iterable, start=<span class="number">0</span>)——枚举（Python内置）</span><br><span class="line">产出由两个元素组成的元组，结构是（index, item）,其中index 从start开始，item从iterable中取</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="string">&quot;Python&quot;</span>, start=<span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(1, &#x27;P&#x27;)</span></span><br><span class="line"><span class="string">(2, &#x27;y&#x27;)</span></span><br><span class="line"><span class="string">(3, &#x27;t&#x27;)</span></span><br><span class="line"><span class="string">(4, &#x27;h&#x27;)</span></span><br><span class="line"><span class="string">(5, &#x27;o&#x27;)</span></span><br><span class="line"><span class="string">(6, &#x27;n&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">groupby(iterable, key=<span class="literal">None</span>)——分组</span><br><span class="line">创建一个迭代器，按照key指定的方式，返回 iterable 中连续的键和组</span><br><span class="line">一般来说，要预先对数据进行排序</span><br><span class="line">key为<span class="literal">None</span>默认把连续重复元素分组</span><br><span class="line"><span class="keyword">for</span> key, group <span class="keyword">in</span> itertools.groupby(<span class="string">&#x27;AAAABBBCCDAABBB&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(key, <span class="built_in">list</span>(group))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">A [&#x27;A&#x27;, &#x27;A&#x27;, &#x27;A&#x27;, &#x27;A&#x27;]</span></span><br><span class="line"><span class="string">B [&#x27;B&#x27;, &#x27;B&#x27;, &#x27;B&#x27;]</span></span><br><span class="line"><span class="string">C [&#x27;C&#x27;, &#x27;C&#x27;]</span></span><br><span class="line"><span class="string">D [&#x27;D&#x27;]</span></span><br><span class="line"><span class="string">A [&#x27;A&#x27;, &#x27;A&#x27;]</span></span><br><span class="line"><span class="string">B [&#x27;B&#x27;, &#x27;B&#x27;, &#x27;B&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">animals = [<span class="string">&quot;duck&quot;</span>, <span class="string">&quot;eagle&quot;</span>, <span class="string">&quot;rat&quot;</span>, <span class="string">&quot;giraffe&quot;</span>, <span class="string">&quot;bear&quot;</span>, <span class="string">&quot;bat&quot;</span>, <span class="string">&quot;dolphin&quot;</span>, <span class="string">&quot;shark&quot;</span>, <span class="string">&quot;lion&quot;</span>]</span><br><span class="line">animals.sort(key=<span class="built_in">len</span>)</span><br><span class="line"><span class="built_in">print</span>(animals)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key, group <span class="keyword">in</span> itertools.groupby(animals, key=<span class="built_in">len</span>):</span><br><span class="line">    <span class="built_in">print</span>(key, <span class="built_in">list</span>(group))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">3 [&#x27;rat&#x27;, &#x27;bat&#x27;]</span></span><br><span class="line"><span class="string">4 [&#x27;duck&#x27;, &#x27;bear&#x27;, &#x27;lion&#x27;]</span></span><br><span class="line"><span class="string">5 [&#x27;eagle&#x27;, &#x27;shark&#x27;]</span></span><br><span class="line"><span class="string">7 [&#x27;giraffe&#x27;, &#x27;dolphin&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="堆-队列-优先队列-双向队列-栈"><a href="#堆-队列-优先队列-双向队列-栈" class="headerlink" title="堆 队列 优先队列 双向队列 栈"></a>堆 队列 优先队列 双向队列 栈</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">堆（heapq）</span></span><br><span class="line"><span class="string">heapq.heapify(heap)</span></span><br><span class="line"><span class="string">将一个可迭代对象转换成堆数据结构，括号内不可为空。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">heapq.heappush(heap, element)</span></span><br><span class="line"><span class="string">将元素推入堆中，并保持堆的不变性。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">heapq.heappop(heap)</span></span><br><span class="line"><span class="string">弹出并返回堆中的最小元素。</span></span><br><span class="line"><span class="string">min_element = heapq.heappop(heap)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">heapq.heappushpop(heap, element)</span></span><br><span class="line"><span class="string">将元素推入堆中，然后弹出并返回堆中的最小元素。</span></span><br><span class="line"><span class="string">min_element = heapq.heappushpop(heap, 5)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">heapq.heapreplace(heap, element)</span></span><br><span class="line"><span class="string">弹出并返回堆中的最小元素，然后将新元素推入堆中。</span></span><br><span class="line"><span class="string">min_element = heapq.heapreplace(heap, 6)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">heapq.nlargest(n, iterable, key=None)</span></span><br><span class="line"><span class="string">返回可迭代对象中的前 n 个最大元素。</span></span><br><span class="line"><span class="string">largest_elements = heapq.nlargest(3, iterable)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">heapq.nsmallest(n, iterable, key=None)</span></span><br><span class="line"><span class="string">返回可迭代对象中的前 n 个最小元素。</span></span><br><span class="line"><span class="string">smallest_elements = heapq.nsmallest(3, iterable)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">heapq.merge(iterables, key=None, reverse=False)</span></span><br><span class="line"><span class="string">合并多个已排序的可迭代对象，返回一个新的已排序的迭代器。</span></span><br><span class="line"><span class="string">sorted_result = list(heapq.merge(list1, list2, list3))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="keyword">from</span> heapq <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">队列（Queue）</span></span><br><span class="line"><span class="string">queue.Queue(maxsize=0)</span></span><br><span class="line"><span class="string">maxsize：可选参数，指定队列的最大容量。如果为正整数，表示队列的最大容量，超过此容量时再往队列中放入元素会阻塞。如果为负数或未指定，队列的容量为无限大。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.put(item, block=True, timeout=None)</span></span><br><span class="line"><span class="string">将 item 放入队列。</span></span><br><span class="line"><span class="string">如果 block 为 True，则在队列满时立即返回；否则，在队列满时会阻塞，直到有空间为止。</span></span><br><span class="line"><span class="string">如果指定了 timeout，则在超时前等待 timeout 秒，如果仍无法放入 item，则引发 queue.Full 异常。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.get(block=True, timeout=None)</span></span><br><span class="line"><span class="string">从队列中获取元素并在获取后将其从队列中删除。</span></span><br><span class="line"><span class="string">如果 block 为 True，则在队列非空时立即返回；否则，在队列空时会阻塞，直到有元素为止。</span></span><br><span class="line"><span class="string">如果指定了 timeout，则在超时前等待 timeout 秒，如果仍无法获取元素，则引发 queue.Empty 异常。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.qsize()</span></span><br><span class="line"><span class="string">返回队列的大小，即队列中当前的元素个数。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.empty()</span></span><br><span class="line"><span class="string">如果队列为空，返回 True；否则返回 False。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.full()</span></span><br><span class="line"><span class="string">如果队列已满，返回 True；否则返回 False。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.get_nowait()</span></span><br><span class="line"><span class="string">get 方法的非阻塞版本，在队列为空时立即引发 queue.Empty 异常。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.put_nowait(item)</span></span><br><span class="line"><span class="string">put 方法的非阻塞版本，在队列已满时立即引发 queue.Full 异常。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">queue.clear()</span></span><br><span class="line"><span class="string">清空队列，移除队列中所有的元素。注意，该方法在 Python 3.9 之前的版本中可能不存在。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Python内置库中的queue.PriorityQueue</span></span><br><span class="line"><span class="string">PriorityQueue(iterable)：括号可以为空，即创建了一个空对象。若用可迭代对象初始化必须要 优先级 + 元素 的方式来初始化。</span></span><br><span class="line"><span class="string">put(item)：向优先级队列中插入元素 item，item 是一个元组，第一个元素为优先级。</span></span><br><span class="line"><span class="string">get()：从优先级队列中获取元素，返回值是一个元组 (priority, data)，其中 priority 是优先级，data 是实际的数据。</span></span><br><span class="line"><span class="string">qsize()：返回优先级队列的大小，即队列中当前的元素个数。</span></span><br><span class="line"><span class="string">empty()：如果优先级队列为空，返回 True；否则返回 False。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> PriorityQueue</span><br><span class="line"><span class="comment"># 创建一个空的优先级队列</span></span><br><span class="line">my_priority_queue = PriorityQueue()</span><br><span class="line"><span class="comment"># 通过可迭代对象初始化优先级队列</span></span><br><span class="line">data = [(<span class="number">1</span>, <span class="string">&quot;Task 1&quot;</span>), (<span class="number">3</span>, <span class="string">&quot;Task 3&quot;</span>), (<span class="number">2</span>, <span class="string">&quot;Task 2&quot;</span>)]</span><br><span class="line">my_priority_queue = PriorityQueue(data)</span><br><span class="line"></span><br><span class="line"><span class="comment">#双端队列很不常用，用到再放</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">栈（LifoQueue）</span></span><br><span class="line"><span class="string">LifoQueue()：创建一个空的后进先出队列（栈）。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">put(item, block=True, timeout=None)：将 item 入栈。</span></span><br><span class="line"><span class="string">如果 block 为 True（默认值），则在队列未满时立即返回；如果为 False，则在队列满时阻塞，直到有空间为止。</span></span><br><span class="line"><span class="string">如果指定了 timeout，则在超时前等待 timeout 秒，如果仍无法入栈，则引发 queue.Full 异常。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">get(block=True, timeout=None)：出栈并返回元素。</span></span><br><span class="line"><span class="string">如果 block 为 True（默认值），则在队列非空时立即返回；如果为 False，则在队列空时阻塞，直到有元素为止。</span></span><br><span class="line"><span class="string">如果指定了 timeout，则在超时前等待 timeout 秒，如果仍无法出栈，则引发 queue.Empty 异常。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">qsize()：返回队列的大小，即队列中当前的元素个数。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">empty()：如果队列为空，返回 True；否则返回 False。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">full()：如果队列已满，返回 True；否则返回 False。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> LifoQueue</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><p>面向过程c，其他主流语言都面向对象</p>
<p><img src="/images/python%E5%A4%A7%E5%85%A8.assets/524ed2d669d6412dbd5bf2493e72efaa.png" alt="在这里插入图片描述"></p>
<h2 id="实例方法v-s-类方法"><a href="#实例方法v-s-类方法" class="headerlink" title="实例方法v.s. 类方法"></a>实例方法v.s. 类方法</h2><ul>
<li>静态方法：所有的实例对象共有方法，只能访问静态属性</li>
<li>实例方法常用于与对象状态相关的行为，操作具体实例的数据。比如打印当前玩家的分数</li>
<li>类方法常用于处理与类本身相关的行为，尤其是涉及类属性或创建类实例的情况，比如打印历史最高分</li>
</ul>
<p>既需要访问实例属性、类属性、静态属性，应定义<strong>实例方法</strong>，（因为类只有一个）在实例方法中调用类名.类属性。</p>
<ul>
<li><p>@classmethod：方法def之前加上@classmethod，<strong>类方法</strong>用cls替代原来的self。<br>不能访问实例变量的属性，只能访问类变量的属性，因为self这个参数接收的不是实例本身，而是类本身。<br>cls.类属性<br>cls.类方法<br>打印self，可以看到一个是object，一个是class。</p>
</li>
<li><p>@property<br>@property 是 Python 中的一种装饰器，用于将一个方法转换为属性，使得你可以像访问属性一样调用该方法，而无需显式地调用它作为一个方法（即不需要加括号）。</p>
</li>
<li><p>@staticmethod：不需要访问实例（self）或类本身（cls）。常用于打印帮助信息。</p>
</li>
<li><p>检查属性</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">getattr</span>()</span><br><span class="line"><span class="built_in">hasattr</span>()</span><br><span class="line"><span class="built_in">setattr</span>()</span><br><span class="line"><span class="built_in">delattr</span>()</span><br></pre></td></tr></table></figure>

<h2 id="三大基本特征：封装多态继承"><a href="#三大基本特征：封装多态继承" class="headerlink" title="三大基本特征：封装多态继承"></a>三大基本特征：封装多态继承</h2><ul>
<li>继承：子类是父类的实例，子类继承复用父类属性行为，也具有子类特有属性行为；</li>
<li>多态：一类事物多种形态，一个抽象类有多个子类（多态依赖于继承），不同子类对象调用相同方法但实现不同行为产生不同执行结果，多态增加代码灵活度。<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/bb5ae27ad0154ff98b469027dfd2342f.png" alt="在这里插入图片描述"></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#类的构建</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">node</span>(<span class="title class_ inherited__">object</span>): </span><br><span class="line">  name = <span class="string">&quot;老虎&quot;</span> <span class="comment">#静态属性：实例对象共有属性</span></span><br><span class="line">  <span class="comment"># 访问静态属性:1、通过实例化对象访问t1.name    </span></span><br><span class="line">  <span class="comment">#2.也可通过 类名.属性名 访问静态属性</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, val=<span class="number">0</span></span>): </span><br><span class="line">		<span class="variable language_">self</span>.val = val<span class="comment">#实例属性：每个实例对象独有属性</span></span><br><span class="line">		<span class="variable language_">self</span>.<span class="built_in">next</span> = none </span><br><span class="line">head = node() <span class="comment">#init</span></span><br><span class="line">head.<span class="built_in">next</span> = node(num_list.pop()) <span class="comment">#赋值val</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 静态方法</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">jump</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;Tiger.name&#125;</span>都会跳跃&amp;&amp;&amp;&amp;&amp;&quot;</span>)</span><br><span class="line">    <span class="comment"># 类方法</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="comment"># 类方法中访问静态属性有两种方法，1. 类名.静态属性  2.cls.静态属性</span></span><br><span class="line">        <span class="built_in">print</span>(Tiger.name)</span><br><span class="line">        <span class="built_in">print</span>(cls.name)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我是一个类方法&quot;</span>)</span><br><span class="line"><span class="comment"># 访问静态方法：两种访问 1. 实例化对象.静态方法名  2.类名.静态方法名</span></span><br><span class="line">t1.jump()</span><br><span class="line">Tiger.jump()</span><br><span class="line"><span class="comment"># 类方法使用 : 1. 实例化对象.类方法名 2. 类名.类方法名</span></span><br><span class="line">t1.a()</span><br><span class="line">Tiger.a()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 东北虎</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NeTiger</span>(<span class="title class_ inherited__">Tiger</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,w</span>):</span><br><span class="line">        Tiger.__init__(<span class="variable language_">self</span>, w)</span><br></pre></td></tr></table></figure>
<ul>
<li>以下划线开头的标识符有特殊含义</li>
</ul>
<ol>
<li>保护：不能直接访问的类属性，其无法通过 <code>from...import* </code>的方式导入；以单下划线开头的标识符(如 <code>_width</code>)表示</li>
<li>私有: 以双下划线开头的标识符(如<code>__add</code>)表示</li>
<li>专用标识符: 以双下划线作为开头和结尾的标识符(如 <code>__init__</code>)</li>
</ol>
<table>
<thead>
<tr>
<th>写法</th>
<th>是否真正私有</th>
<th>是否能访问</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>_var</code></td>
<td>否</td>
<td>✅ 可以访问</td>
<td>约定为内部使用</td>
</tr>
<tr>
<td><code>__var</code></td>
<td>部分私有</td>
<td>🚫 不能直接访问</td>
<td>会 name mangling，转为 <code>obj._类名__var</code></td>
</tr>
<tr>
<td><code>__var__</code></td>
<td>❌ 不是私有</td>
<td>✅ 特殊用途</td>
<td>系统保留名，不用于私有变量</td>
</tr>
</tbody></table>
<p>总结：<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/94a43b626c1f4263a076ce702c477086.png" alt="在这里插入图片描述"></p>
<p>两个下划线：系统内置方法<br>一个下划线：保护<br>两个下划线：私有<br>@property将方法转化成属性</p>
<ul>
<li>内置方法&#x2F;属性</li>
<li><ul>
<li><code>__name__</code>是python的一个内置类属性，它天生就存在于一个 python 程序中。<br>直接运行python程序时，<code>__name__</code>的值为<code>“__main__”</code><br>导入.py外部文件运行时，<code>__name__</code>的值为文件名，即模块名</li>
</ul>
</li>
</ul>
<p>只要在测试代码前面加上：<code>if __name__ == &#39;__main__&#39;</code>:<br>那么，编写调试过程直接运行该模块时<code>__name__</code> “的值为<code>__main__</code> “,即测试内容被执行。<br>而同事在导入该模块，<code>__name__ </code>的值为py文件名，测试内容则不会被执行。完美的解决了这个问题。</p>
<ul>
<li><code>__ new__</code>创建对象时自动调用，分配空间+返回对象的引用，传递给<code>__init__</code></li>
<li><code> __init__</code>对象被初始化时自动调用</li>
<li><code>__del__</code>对象被从内存中销毁前被自动调用 del objectname</li>
<li><code>__str__</code>返回对象的描述信息 print(objectname)会显示</li>
</ul>
<p>一、self参数<br>self指的是实例Instance本身，在Python类中规定，函数的第一个参数是实例对象本身，并且约定俗成，把其名字写为self，也就是说，类中的方法的第一个参数一定要是self，而且不能省略。<br>我觉得关于self有三点是很重要的：<br>self指的是<strong>实例本身</strong>，而不是类<br>类的方法中的self不可以省略,pycharm自动提示需要参数self。</p>
<p>二、<code>__ init__</code> 方法：<br>在python中创建类后，通常会创建一个<code> __ init__ ()</code>方法，这个方法会在创建类的实例的时候自动执行。 <code> __ init__ ()</code>方法必须包含一个self参数，而且要是第一个参数。</p>
<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><p>假设二元系统： 人属 &#x3D; {A人种， B人种， C人种。。。。}<br>1、将各人种公共特征提取出来，建立人属的类；<br>2、各人种继承上一级（人属）的公共特征，然后添加自身特殊特征，构建各自人种的类。</p>
<p><strong>子类拥有父类以及父类的父类中封装的所有属性和方法。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">class Car():</span><br><span class="line">    &quot;&quot;&quot;模拟汽车&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    def __init__(self, brand, model, year):</span><br><span class="line">        &quot;&quot;&quot;初始化汽车属性&quot;&quot;&quot;               # 相当于类内部的变量</span><br><span class="line">        self.brand = brand                 # 汽车的品牌</span><br><span class="line">        self.model = model                 # 汽车的型号</span><br><span class="line">        self.year = year                   # 汽车出厂年份</span><br><span class="line">        self.mileage = 0                   # 新车总里程初始化为0</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    def get_main_information(self):        # self不能省</span><br><span class="line">        &quot;&quot;&quot;获取汽车主要信息&quot;&quot;&quot;</span><br><span class="line">        print(&quot;品牌：&#123;&#125;   型号：&#123;&#125;   出厂年份：&#123;&#125;&quot;.format(self.brand, self.model, self.year))</span><br><span class="line">    </span><br><span class="line">    def get_mileage(self):</span><br><span class="line">        &quot;&quot;&quot;获取总里程数&quot;&quot;&quot;</span><br><span class="line">        print(&quot;行车总里程：&#123;&#125;公里&quot;.format(self.mileage)) </span><br><span class="line">    </span><br><span class="line">    def set_mileage(self, distance):</span><br><span class="line">        &quot;&quot;&quot;设置总里程数&quot;&quot;&quot;</span><br><span class="line">        if distance &gt;= 0:</span><br><span class="line">            self.mileage = distance</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;里程数不能为负！&quot;)</span><br><span class="line">    </span><br><span class="line">    def increment_mileage(self, distance):</span><br><span class="line">        &quot;&quot;&quot;总里程数累计&quot;&quot;&quot;</span><br><span class="line">        if distance &gt;= 0:</span><br><span class="line">            self.mileage += distance</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;新增里程数不能为负！&quot;)</span><br><span class="line">            </span><br><span class="line">class Bettery():</span><br><span class="line">    &quot;&quot;&quot;模拟电动汽车的电池&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    def __init__(self, bettery_size = 70):</span><br><span class="line">        self.bettery_size = bettery_size        # 电池容量</span><br><span class="line">        self.electric_quantity = bettery_size   # 电池剩余电量</span><br><span class="line">        self.electric2distance_ratio = 5        # 电量距离换算系数 5公里/kW.h</span><br><span class="line">        self.remainder_range = self.electric_quantity*self.electric2distance_ratio # 剩余可行驶里程</span><br><span class="line"></span><br><span class="line">    def get_electric_quantit(self):</span><br><span class="line">        &quot;&quot;&quot;查看当前电池电量&quot;&quot;&quot;</span><br><span class="line">        print(&quot;当前电池剩余电量：&#123;&#125; kW.h&quot;.format(self.electric_quantity))</span><br><span class="line">        </span><br><span class="line">    def set_electric_quantity(self, electric_quantity):</span><br><span class="line">        &quot;&quot;&quot;设置电池剩余电量，计重新算电量可支撑行驶里程&quot;&quot;&quot;</span><br><span class="line">        if electric_quantity &gt;= 0 and electric_quantity &lt;= self.bettery_size:</span><br><span class="line">            self.electric_quantity = electric_quantity</span><br><span class="line">            self.remainder_range = self.electric_quantity*self.electric2distance_ratio</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;电量未设置在合理范围！&quot;)</span><br><span class="line">    </span><br><span class="line">    def get_remainder_range(self):</span><br><span class="line">        &quot;&quot;&quot;查看剩余可行驶里程&quot;&quot;&quot;</span><br><span class="line">        print(&quot;当前电量还可以继续驾驶 &#123;&#125; 公里&quot;.format(self.remainder_range))</span><br><span class="line">        </span><br><span class="line">class ElectricCar(Car):#自动继承父类的所有方法    </span><br><span class="line">&quot;&quot;&quot;模拟电动汽车&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    def __init__(self, brand, model, year):</span><br><span class="line">        &quot;&quot;&quot;初始化电动汽车属性&quot;&quot;&quot;</span><br><span class="line">        super().__init__(brand, model, year)  # 声明继承父类的属性</span><br><span class="line">		#可以在父类基础上这里继续增加属性</span><br><span class="line">		self.bettery = Bettery(bettery_size)    # 电池</span><br><span class="line">	#可以在父类基础上这里继续增加方法</span><br><span class="line">	def get_main_information(self):# 名字一样即重写父类方法【多态】</span><br></pre></td></tr></table></figure>
<p>派生类调用基类__init__()方法，需要加super().<strong>init</strong>()<br>派生是面向对象编程的基本概念，它赋予了我们基于某个基础类来轻松创建新类的能力。使用派生类的方法，我们可以复用他人的代码。<br>定义一个基于某个现有类的新类的方法如下：<br>def 新类(现有的类):<br>    pass<br>现有的类，有时也称为基类、父类；新类也称为派生类、子类。派生类继承了基类的所有属性和方法。<br>下面的例子中，车辆是基类，汽车和自行车是派生类，它们都继承了车辆的全部成员。</p>
<p>方法重写：子类定义一个和父类同名的方法。需要用到父类方法的时候调用super().父类方法</p>
<p>子类不能直接访问父类私有属性和私有方法，但可通过父类公有方法间接访问。</p>
<p>三、<code>super(Net, self).__init__()</code><br>Python中的<code>super(Net, self).__init__()</code>是指首先找到Net的父类（比如是类NNet），然后把类Net的对象self转换为类NNet的对象，然后“被转换”的类NNet对象调用自己的init函数，其实简单理解就是子类把父类的<code>__init__()</code>放到自己的<code>__init__()</code>当中，这样子类就有了父类的<code>__init__()</code>的那些东西。<br>回过头来下面的代码，Net类继承nn.Module，<code>super(Net, self).__init__()</code>就是对继承自父类nn.Module的属性进行初始化。而且是用nn.Module的初始化方法来初始化继承的属性。</p>
<p>当然，如果初始化的逻辑与父类的不同，不使用父类的方法，自己重新初始化也是可以的。<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/64bdddcd6e754efedfde3206dd3b3a2d.png" alt="在这里插入图片描述"><br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/5987f8deea499e21f78460ac0ae3180d.png" alt="在这里插入图片描述"><br>@指矩阵乘法，这里是<strong>矩阵乘向量</strong>。<br>L.backward()即loss.backword()<br>Param-&#x3D;….*param.grad 少写了，应该是梯度<br>最后一行把梯度清零进入下一循环。</p>
<h2 id="属性的获取机制"><a href="#属性的获取机制" class="headerlink" title="属性的获取机制"></a>属性的获取机制</h2><p>先在对象内部查找，没找到向上级寻找 </p>
<h2 id="UML对象模型图"><a href="#UML对象模型图" class="headerlink" title="UML对象模型图"></a>UML对象模型图</h2><table>
<thead>
<tr>
<th>类名</th>
</tr>
</thead>
<tbody><tr>
<td>属性</td>
</tr>
<tr>
<td>动作</td>
</tr>
</tbody></table>
<ul>
<li>类、类的属性和方法</li>
<li>虚线表示继承关系，实线表示有逻辑关系<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/6c107fc8b83747c9a8cdc8f891ea229f.png" alt="在这里插入图片描述"></li>
</ul>
<h1 id="数据类型6种"><a href="#数据类型6种" class="headerlink" title="数据类型6种"></a>数据类型6种</h1><ul>
<li>不可变数据3种：Number（数字）、String（字符串）、Tuple（元组）；<br>可变数据3种：List（列表）、Dictionary（字典）、Set（集合）。</li>
</ul>
<p>“变”是相对于引用地址来说的，不是不能改变其数据，而是改变数据的时候会不会改变变量的引用地址。</p>
<p>这里与c语言进行对比<br>C语言的基本数据类型为：整型、实数型、字符型<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/4aeb00d79cfd29ee9a749796d258ab96.png" alt="在这里插入图片描述"></p>
<h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><p>包含int float complex复数 bool</p>
<p>低精度与高精度一起运算时，低精度默认向高精度转换 bool -&gt; int -&gt; float -&gt; complex</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">num3 = <span class="built_in">complex</span>(<span class="number">5</span>, <span class="number">3.14</span>)</span><br></pre></td></tr></table></figure>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><ul>
<li><p>紧凑数组实现存储，数据在内存中是连续存放的，效率更高，节省空间</p>
</li>
<li><p>同为序列类型，为什么列表采用引用数组而字符串采用紧凑数组？每个字符大小固定，因此字符串大小固定。</p>
</li>
<li><p>⼦串：必须连续，⼦序列：可不连续</p>
</li>
</ul>
<p>ord()函数主要用来返回对应字符的ascii码，chr()主要用来表示ascii码对应的字符<br>根据ascii码输出字⺟ chr(ascii)<br>ascii码以及⼤⼩写字⺟关系+数字起始：<br>48～57是0～9<br>65～90为26个⼤写英⽂字⺟，a<del>z<br>97～122号为26个⼩写英⽂字⺟,a</del>z<br>⼤写+32&#x3D;⼩写 </p>
<p>i.isspace()检测字符串是否只由空格组成<br>i.isalnum()检测字符串是否由字⺟和数字组成。<br>s.swapcase() ⽅法⽤于对字符串的⼤⼩写字⺟进⾏转换 filename.endswith(’.log’)&#x2F;startswith  以…收尾&#x2F;开头</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#单引号、双引号、三引号跨越多行</span></span><br><span class="line"><span class="comment">#+拼接 *重复 转义\ len(s) </span></span><br><span class="line"><span class="comment">#按ascii比较 &lt; &gt; ==  !=  &lt;= &gt;=</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">对⻬+填充字符 </span></span><br><span class="line"><span class="string">ljust(width[, fillchar])返回⼀个原字符串左对⻬，⽤fillchar（默认空格）填充⾄⻓度width的新字符串。 </span></span><br><span class="line"><span class="string">rjust(width[, fillchar])</span></span><br><span class="line"><span class="string">center 居中对齐</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">Str.join(<span class="built_in">list</span>) <span class="comment">#&quot;list[0]+str+list[1]+str+....&quot;</span></span><br><span class="line">Str.count(x)<span class="comment"># count(str, beg= 0,end=len(string))</span></span><br><span class="line">Str.find(<span class="built_in">str</span>, beg=<span class="number">0</span> end=<span class="built_in">len</span>(string))<span class="comment">#find找⼦串并返回最⼩的索引 beg是begin 找不到返回-1</span></span><br><span class="line">Str.index(<span class="built_in">str</span>, beg=<span class="number">0</span>, end=<span class="built_in">len</span>(string)) <span class="comment">#跟find()区别：如果str不在字符串中会报异常</span></span><br><span class="line"><span class="built_in">str</span>.replace(old, new [, <span class="built_in">max</span>]) <span class="comment">#替换不超过max次</span></span><br><span class="line">lower()/upper()/capitalize()首字符大写(同title()方法)</span><br><span class="line">s[<span class="number">0</span>].isupper()</span><br><span class="line"><span class="comment"># isalnum() 如果字符串至少有一个字符并且所有字符都是字母或数字则返 回 True,否则返回 False</span></span><br><span class="line"><span class="comment"># isalpha() 如果字符串至少有一个字符并且所有字符都是字母则返回 True, 否则返回 False</span></span><br><span class="line"><span class="comment"># isdigit() 如果字符串只包含数字则返回 True 否则返回 False</span></span><br><span class="line"><span class="comment"># islower() 如果字符串中包含至少一个区分大小写的字符，并且所有(区分大小写的)字符都是小写，则返回 True，否则返回 False</span></span><br><span class="line"><span class="comment"># isspace() 如果字符串中只包含空格，则返回 True，否则返回 False.</span></span><br><span class="line"><span class="comment"># istitle()方法检测字符串中所有的单词拼写首字母是否为大写，且其他字母为小写。</span></span><br><span class="line"><span class="comment"># min(str) 返回字符串 str 中最小的字母。同理max</span></span><br><span class="line"><span class="comment"># startswith(str, beg=0,end=len(string)) 检查字符串是否是以 obj 开头，是则返回 True，否则返回 False。如果beg 和 end 指定值，则在指定范围内检查。同理endswith结尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#format格式化方式</span></span><br><span class="line"><span class="comment">#%老格式化方式 </span></span><br><span class="line">name = <span class="string">&quot;Alice&quot;</span></span><br><span class="line">age = <span class="number">25</span></span><br><span class="line">formatted_string = <span class="string">&quot;Name: %s, Age: %d&quot;</span> % (name, age)</span><br><span class="line"><span class="built_in">print</span>(formatted_string)</span><br><span class="line"><span class="comment">#f格式化方式最常见</span></span><br><span class="line">name = <span class="string">&quot;Alice&quot;</span></span><br><span class="line">age = <span class="number">25</span></span><br><span class="line">formatted_string = <span class="string">f&quot;Name: <span class="subst">&#123;name&#125;</span>, Age: <span class="subst">&#123;age&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(formatted_string)</span><br><span class="line"></span><br><span class="line"><span class="comment">#partition分成前中后三段</span></span><br><span class="line">text.partition(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">s.split(<span class="built_in">str</span>=<span class="string">&quot;&quot;</span>, num)<span class="comment">#若num指定则仅截取 num 个子字符串</span></span><br></pre></td></tr></table></figure>

<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><ul>
<li>每个值可是任意类型（包括嵌套）</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">&quot;string&quot;</span></span><br><span class="line">l=[]</span><br><span class="line"><span class="comment">#.append把外面包上一层[]再放入</span></span><br><span class="line"><span class="comment">#+直接添加到末尾</span></span><br><span class="line"><span class="comment">#.extend拆开一一放入 如[&#x27;s&#x27;,&#x27;t&#x27;,....&#x27;g&#x27;]</span></span><br><span class="line"></span><br><span class="line">[<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;website&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#应用：判断是否在列表中</span></span><br><span class="line">Abc[-<span class="number">1</span>] <span class="keyword">in</span> [‘c’,’C’]  <span class="comment">#返回true/false</span></span><br><span class="line">a, b = b, a <span class="comment">#交换</span></span><br><span class="line">s.reverse()</span><br><span class="line">l.sort([func]) <span class="comment">#排序 数据类型要保持一致才能比较</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#合并列表：直接使⽤&quot;+&quot;号合并列表 </span></span><br><span class="line"><span class="comment">#注意a.append(b)将b看成list⼀个元素和a合并成⼀个新的list [1, 2, 3, [&#x27;www&#x27;, &#x27;jb51.net&#x27;]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:<span class="comment">#循环查找 </span></span><br><span class="line">	<span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line"></span><br><span class="line"><span class="comment">#注意list的查找索引是list.index(x) x为值，返回其下标，若不存在抛出异常</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span>.join(x) <span class="comment">#⽤于将序列中的元素以指定的字符连接生成一个新的字符串</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>.insert(index, obj)<span class="comment">#第一个参数为插入位置下标</span></span><br><span class="line"></span><br><span class="line">v2.extend(v1) <span class="comment">#[v2,v1]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> v[-<span class="number">1</span>]</span><br><span class="line">v.remove(x)<span class="comment">#移除列表中某个值的第一个匹配项</span></span><br><span class="line">l.pop(index)<span class="comment">#移除列表index位置元素(默认最后一个元素)并返回该元素值</span></span><br><span class="line"></span><br><span class="line">v.count(x)</span><br><span class="line">v.index(x)<span class="comment">#首次出现的下标，找不到报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#列表生成式</span></span><br><span class="line">a=[i*i <span class="keyword">for</span> i <span class="keyword">in</span> a]</span><br><span class="line"></span><br><span class="line"><span class="comment">#多层嵌套=数组</span></span><br><span class="line">R=[[<span class="number">0</span> <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(z)] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(x)]</span><br><span class="line">r[i][k] += a[i][j] * b[j][k]<span class="comment">#矩阵乘法</span></span><br></pre></td></tr></table></figure>



<h2 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h2><ul>
<li><p><code>(&#39;python&#39;,&#39;website&#39;)</code>元组如果只有一个值则后面需要加一个逗号，否则不是元组<code>(1,)</code></p>
</li>
<li><p>元组和列表区别：大多一样；元组不能改变故可hash，列表可以改变故不可hash</p>
</li>
<li><p>底层：元组真不能改吗？可变元素可以改变。因为元组只是存这类元素内存地址，内存地址不可变，但该内存地址对应另一块所以可变。</p>
</li>
</ul>
<h2 id="Set-无序-唯一"><a href="#Set-无序-唯一" class="headerlink" title="Set-无序&amp;唯一"></a>Set-无序&amp;唯一</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125; <span class="comment">#花括号创建</span></span><br><span class="line"><span class="built_in">set</span>()<span class="comment">#创建，删除重复数据</span></span><br><span class="line">交集 &amp;</span><br><span class="line">并集 |</span><br><span class="line">差集 - </span><br><span class="line">补集 ^</span><br><span class="line"><span class="comment">#添加1项</span></span><br><span class="line">s.add(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line"><span class="comment">#添加多项</span></span><br><span class="line">s.update([<span class="number">10.37</span>, <span class="number">67</span>])</span><br><span class="line">s.update(list1)</span><br><span class="line"><span class="comment">#remove删除1项</span></span><br><span class="line">s1.remove(<span class="number">5</span>)</span><br><span class="line"><span class="comment">#set的长度len(s)</span></span><br></pre></td></tr></table></figure>

<h2 id="Dict"><a href="#Dict" class="headerlink" title="Dict"></a>Dict</h2><p>键唯一，值任意类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>=&#123;key:value&#125;<span class="comment">#&#123;&#x27;name&#x27;:&#x27;python&#x27;,&#x27;number&#x27;:1&#125;</span></span><br><span class="line"><span class="keyword">del</span> tinydict[<span class="string">&#x27;name&#x27;</span>] <span class="comment"># 删除键是&#x27;name&#x27;的条⽬</span></span><br><span class="line">tinydict.clear() <span class="comment"># 清空字典所有条⽬</span></span><br><span class="line"><span class="built_in">dict</span>(<span class="built_in">zip</span>(list1,list2))<span class="comment">#打包</span></span><br><span class="line">cmp(dict1, dict2)<span class="comment">#⽐较</span></span><br><span class="line"><span class="built_in">dict</span>.keys()<span class="comment">#如果要使用下标强转为list才行</span></span><br><span class="line"><span class="built_in">dict</span>.values()</span><br><span class="line"><span class="built_in">dict</span>.update(dict2)<span class="comment">#把字典dict2的键值对更新到dict⾥，键有重复则后覆盖前</span></span><br><span class="line">v=<span class="built_in">dict</span>.pop(key)<span class="comment">#不存在时报错</span></span><br><span class="line">item=popitem()<span class="comment">#返回并删除字典中的最后⼀对</span></span><br><span class="line">d.get(key, default=<span class="literal">None</span>)<span class="comment">#返回指定键的值，如果不存在返回默认值/None</span></span><br><span class="line"></span><br><span class="line">key,value/item <span class="keyword">in</span> d.items()<span class="comment">#返回键值对</span></span><br><span class="line"><span class="comment">#两层for循环 in/not in替代标记数组</span></span><br><span class="line"><span class="built_in">dict</span>.fromkeys(<span class="built_in">list</span>)<span class="comment">#创建以list为键的值为None的字典</span></span><br><span class="line"></span><br><span class="line">d.copy()</span><br></pre></td></tr></table></figure>

<ul>
<li>快速查找：优先用dict查找，时间效率高</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">ls_1 = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1000000</span>))</span><br><span class="line">ls_2 = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">500</span>))+[-<span class="number">10</span>]*<span class="number">500</span></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> ls_2:</span><br><span class="line">    <span class="keyword">if</span> n <span class="keyword">in</span> ls_1:</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">end = time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;查找&#123;&#125;个元素，在ls_1列表中的有&#123;&#125;个，共用时&#123;&#125;秒&quot;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(ls_2), count,<span class="built_in">round</span>((end-start),<span class="number">2</span>)))</span><br><span class="line"><span class="comment">#查找1000个元素，在ls_1列表中的有500个，共用时6.19秒</span></span><br><span class="line">**************************</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">d = &#123;i:i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>)&#125;</span><br><span class="line">ls_2 = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">500</span>))+[-<span class="number">10</span>]*<span class="number">500</span></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> ls_2:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        d[n]</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">end = time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;查找&#123;&#125;个元素，在ls_1列表中的有&#123;&#125;个，共用时&#123;&#125;秒&quot;</span>.<span class="built_in">format</span>(<span class="built_in">len</span>(ls_2), count,<span class="built_in">round</span>(end-start)))</span><br><span class="line"><span class="comment">#查找1000个元素，在ls_2列表中的有500个，共用时0秒</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这是为什么？看一下字典的底层实现<br>字典通过<strong>稀疏数组</strong>来实现值的<strong>存储与访问</strong><br>存储：</p>
<ol>
<li>创建一个散列表（稀疏数组 N &gt;&gt; n）</li>
<li>通过hash()计算键的散列值</li>
<li>增加键值对的操作，首先会计算键的散列值hash(key)</li>
<li>根据计算的散列值确定其在散列表中的位置，极个别时候，散列值会发生冲突，则内部有相应的解决冲突的办法</li>
</ol>
<p>访问：<br>第一步：计算要访问的键的散列值<br>第二步：根据计算的散列值，通过一定的规则，确定其在散列表中的位置<br>第三步：读取该位置上存储的值<br> 如果存在，则返回该值  ，如果不存在，则报错KeyError</p>
<p>（1）字典数据类型，通过空间换时间，实现了快速的数据查找，也就注定了字典的空间利用效率低下<br>（2）因为散列值对应位置的顺序与键在字典中显示的顺序可能不同，因此表现出来字典是无序的<br>回顾一下 N &gt;&gt; n。如果N &#x3D; n，会产生很多位置冲突</p>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><ul>
<li><code>str()</code></li>
<li>批量类型转换</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">int_list = [<span class="built_in">int</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> str_list]</span><br><span class="line"></span><br><span class="line">int_list = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, str_list))</span><br><span class="line"><span class="comment">#map()内置函数返回一个迭代器（iterator）对象，而非直接返回列表。</span></span><br></pre></td></tr></table></figure>
<h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><p>.sort() 与sorted()区别：前者改变原元素顺序，后者对副本排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = <span class="built_in">sorted</span>(iterable, key=none, reverse=false) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(chars,key=<span class="keyword">lambda</span> x:<span class="built_in">len</span>(x)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#连带⼀起排序 </span></span><br><span class="line">test_data_1=<span class="built_in">sorted</span>(dict_data.items(),key=<span class="keyword">lambda</span> x:x[<span class="number">0</span>]) <span class="comment">#lambda </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#先按照成绩降序排序，相同成绩的按照名字升序排序： </span></span><br><span class="line">d1 = [&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;alice&#x27;</span>, <span class="string">&#x27;score&#x27;</span>:<span class="number">38</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;bob&#x27;</span>, <span class="string">&#x27;score&#x27;</span>:<span class="number">18</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;darl&#x27;</span>, <span class="string">&#x27;score&#x27;</span>:<span class="number">28</span>&#125;, &#123;<span class="string">&#x27;name&#x27;</span>: </span><br><span class="line">l = <span class="built_in">sorted</span>(d1, key=<span class="keyword">lambda</span> x:(-x[<span class="string">&#x27;score&#x27;</span>], x[<span class="string">&#x27;name&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#指定第⼆个元素排序 </span></span><br><span class="line">random = [(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>)] </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">takesecond</span>(<span class="params">elem</span>): <span class="comment"># 获取列表的第⼆个元素 </span></span><br><span class="line">	<span class="keyword">return</span> elem[<span class="number">1</span>] </span><br><span class="line">random.sort(key=takesecond)</span><br></pre></td></tr></table></figure>
<h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p>单行#<br>多行 三引号’’’</p>
<h1 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h1><p>命名注意不可以数字开头且不可与保留字重名</p>
<h1 id="切片-左闭右开"><a href="#切片-左闭右开" class="headerlink" title="切片-左闭右开"></a>切片-左闭右开</h1><p>适用于序列类型，如列表&#x2F;字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s[<span class="number">0</span>]</span><br><span class="line">s[-<span class="number">1</span>]<span class="comment">#最后一个元素</span></span><br><span class="line">s[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">l[<span class="number">1</span>:] <span class="comment">#去掉列表中第一个元素（下标为0）</span></span><br><span class="line">l[:-<span class="number">1</span>] <span class="comment">#除最后一个取全部</span></span><br><span class="line">[::-<span class="number">1</span>] <span class="comment">#反转</span></span><br><span class="line">l[-<span class="number">5</span>:-<span class="number">1</span>]<span class="comment">#倒着切片 还是[左边:右边]</span></span><br><span class="line"><span class="comment">#负数下标：右往左从-1开始，最后一个元素下标是 -len()</span></span><br></pre></td></tr></table></figure>
<h1 id="区分API是原地还是创建copy"><a href="#区分API是原地还是创建copy" class="headerlink" title="区分API是原地还是创建copy"></a>区分API是原地还是创建copy</h1><ul>
<li>三大判据（按可靠性排序）</li>
</ul>
<ol>
<li><strong>返回值</strong><ul>
<li>返回 <code>None</code> → <strong>几乎一定是原地修改</strong></li>
<li>返回新对象 → <strong>一定是新副本</strong></li>
</ul>
</li>
<li><strong>方法名&#x2F;操作符</strong><ul>
<li>动词型（<code>append / extend / sort / update / add</code>）→ 多半原地</li>
<li>表达式&#x2F;函数型（<code>+ / sorted / map / replace</code>）→ 新对象</li>
</ul>
</li>
<li><strong>官方文档是否写 <code>in-place</code> &#x2F; <code>returns a new</code></strong><ul>
<li>NumPy 尤其重要（有 <code>out=</code>、<code>copy=</code> 关键字）</li>
</ul>
</li>
</ol>
<h1 id="条件-循环"><a href="#条件-循环" class="headerlink" title="条件&#x2F;循环"></a>条件&#x2F;循环</h1><p>必须缩进</p>
<p><code>==</code>：宽松相等，<code>===</code>：严格相等</p>
<p>三元表达式 <code>a if condition else b</code></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入您的成绩：&quot;</span>))</span><br><span class="line"><span class="keyword">if</span> s &gt;= <span class="number">90</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;秀儿&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> s &gt;= <span class="number">80</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;良好&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> s &gt;= <span class="number">60</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;及格&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不及格&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> names:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>,step):<span class="comment">#左闭右开</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;本次循环取出的值为：<span class="subst">&#123;i&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="I-O-类型-3种"><a href="#I-O-类型-3种" class="headerlink" title="I&#x2F;O 类型 3种"></a>I&#x2F;O 类型 3种</h1><p>标准输入输出：程序与键盘显示器等标准设备之间的数据交换<br>文件 I&#x2F;O：程序与文件之间的数据交换<br>网络 I&#x2F;O：程序与网络之间的数据交换</p>
<p>标准输入：sys.stdin	<br>标准输出：sys.stdout	<br>标准错误输出：sys.stderr</p>
<h2 id="输入相关"><a href="#输入相关" class="headerlink" title="输入相关"></a>输入相关</h2><ul>
<li><p><code>input()</code>函数：值统一转换为字符串类型。</p>
<p><code>变量=input(&quot;提示信息字符串&quot;)</code></p>
</li>
<li><p>如何输入带空格的字符串或空格串？<br>line &#x3D; sys.stdin.readline()<br>当然这个也会把换行符输入进去<br>想去掉的话 使用line &#x3D; sys.stdin.readline().strip(‘\n’)</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">a, b, c = <span class="built_in">input</span>().split()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># sys.argv 是一个列表，包含命令行参数</span></span><br><span class="line"><span class="comment"># sys.argv[0] 是脚本名称，即 &quot;main.py&quot;</span></span><br><span class="line"><span class="comment"># sys.argv[1] 是第一个参数</span></span><br><span class="line"><span class="comment"># sys.argv[2] 是第二个参数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">3</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;用法: python main.py 参数1 参数2&quot;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">param1 = sys.argv[<span class="number">1</span>]</span><br><span class="line">param2 = sys.argv[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;参数1:&quot;</span>, param1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;参数2:&quot;</span>, param2)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="输出相关"><a href="#输出相关" class="headerlink" title="输出相关"></a>输出相关</h2><ul>
<li>格式化输出</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;双引号可以包裹并输出单引号&#x27;&quot;</span>）</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">跨行输出</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;跨行输出\n也可以用转义字符\n&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(name + <span class="string">&#x27;的夫人是&#x27;</span> + wife)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="string">&#x27;hi&#x27;</span>))<span class="comment"># 输出：&lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">666</span>))<span class="comment"># 输出：&lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">3.14</span>))<span class="comment"># 输出：class &#x27;float&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#end参数更改末尾字符,sep参数指定连接符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello&quot;</span>, end=<span class="string">&quot;&quot;</span>,sep=<span class="string">&quot;|&quot;</span>)</span><br><span class="line">      </span><br><span class="line"><span class="comment">#不能字符串和整数直接连接，需要类型转换</span></span><br><span class="line">num = <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;加&#x27;</span> + <span class="built_in">str</span>(num) + <span class="string">&#x27;油&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a.lstrip())<span class="comment">##去除左边的空格 </span></span><br><span class="line"><span class="built_in">print</span>(a.rstrip())<span class="comment">##去除右边的空格</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.stdout.write(<span class="string">&quot;Hello, world!\n&quot;</span>)</span><br><span class="line">      </span><br><span class="line"><span class="comment">#%方式 老代码常用</span></span><br><span class="line"><span class="comment"># &quot;%&quot;表示格式化输出，&quot;%&quot;后的内容为格式定义</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%f&quot;</span> % d)<span class="comment">#输出浮点数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%9.2f&quot;</span> % d)<span class="comment">#9输出长度，2小数位数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%+9.2f&quot;</span> % d)<span class="comment">#&quot;+&quot;带正负号</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%-9.4f&quot;</span> % d) <span class="comment">#&quot;-&quot;左对齐（默认右对齐）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%+-9.3f&quot;</span> % d) <span class="comment"># &quot;+-&quot;表示输出的数带正负号且左对齐。   </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%d&quot;</span> % i) <span class="comment"># 十进制整数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%o&quot;</span> % i) <span class="comment"># 八进制整数 </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%x&quot;</span> % i) <span class="comment"># 十六进制整数   </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;%s&quot;</span> % s) <span class="comment"># 输出字符串。   </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;输出1浮点数：%f，1整数：%d，1字符串：%s&quot;</span> % (d,i,s)) </span><br><span class="line">      </span><br><span class="line"><span class="comment">#f-string方式 最推荐</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;name=<span class="subst">&#123;name&#125;</span>, age=<span class="subst">&#123;age&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;pi:<span class="number">.2</span>f&#125;</span>&quot;</span>)<span class="comment"># pi是变量，2位小数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="string">&#x27;abc&#x27;</span>:&gt;<span class="number">10</span>&#125;</span>&quot;</span>)   <span class="comment"># 右对齐，宽度10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="string">&#x27;abc&#x27;</span>:&lt;<span class="number">10</span>&#125;</span>&quot;</span>)   <span class="comment"># 左对齐</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="string">&#x27;abc&#x27;</span>:^<span class="number">10</span>&#125;</span>&quot;</span>)   <span class="comment"># 居中</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="number">42</span>:05d&#125;</span>&quot;</span>)      <span class="comment"># 00042 填充0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;x=&#125;</span>, <span class="subst">&#123;y=&#125;</span>&quot;</span>)<span class="comment"># x=10, y=20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;n:b&#125;</span>&quot;</span>)   <span class="comment"># 二进制 1010</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;n:x&#125;</span>&quot;</span>)   <span class="comment"># 16进制 a</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;ratio:<span class="number">.2</span>%&#125;</span>&quot;</span>)   <span class="comment"># 12.34%</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">//整除  **幂</span></span><br><span class="line"><span class="string">round( x [, n] )⽅法返回浮点数x的四舍五⼊值。n -- 数值表达式，表示从⼩数点位数。 </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> math </span><br><span class="line">math.ceil(n) </span><br><span class="line">math.floor(n)</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span>(x, base=<span class="number">10</span>) <span class="comment">#默认转为十进制</span></span><br><span class="line"><span class="built_in">int</span>(<span class="string">&#x27;55&#x27;</span>) <span class="comment">#字符串转换为⼗进制整型数 </span></span><br><span class="line"><span class="built_in">int</span>(<span class="number">0b11</span>) <span class="comment">#⼆进制转换为⼗进制 </span></span><br><span class="line"><span class="built_in">int</span>(<span class="number">0o11</span>) <span class="comment">#⼋进制转换为⼗进制 </span></span><br><span class="line"><span class="built_in">int</span>(<span class="number">0x11</span>) <span class="comment">#⼗六进制转换为⼗进制</span></span><br><span class="line"><span class="built_in">int</span>(x, <span class="number">0</span>)<span class="comment">#适⽤带0x标示各种进制数转⼗进制， </span></span><br><span class="line"><span class="comment">#不带0x各进制数要在后⾯的base写明这是⼏进制</span></span><br><span class="line">x = <span class="built_in">int</span>(<span class="string">&quot;deadbeef&quot;</span>, <span class="number">16</span>)<span class="comment">#16进制转⼗进制 </span></span><br><span class="line"><span class="built_in">bin</span>(x) </span><br><span class="line"><span class="built_in">oct</span>(x) </span><br><span class="line"><span class="built_in">hex</span>(x)  </span><br><span class="line"><span class="comment">#传⼊参数可以是2/8/16进制，输出字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#保留⼏位⼩数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">format</span>(<span class="number">1.23456</span>, <span class="string">&#x27;.2f&#x27;</span>)) </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;%.2f&#x27;</span> % <span class="number">1.23456</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">#gcd最大公约数</span></span><br><span class="line">gcd:b == <span class="number">0</span>?a:gcd(b, a % b)</span><br><span class="line"></span><br><span class="line">*&amp;a <span class="comment">#取a所在地址的值，即变量a的值</span></span><br><span class="line">*p p++<span class="comment">#p按其所指向数据类型直接长度进行增减 </span></span><br></pre></td></tr></table></figure>

<h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><p>按位或（|）运算符：对两个整数的每个二进制位进行或运算。<br>按位与（&amp;）运算符：对两个整数的每个二进制位进行与运算。<br>按位异或（^）运算符：对两个整数的每个二进制位进行异或运算，相同为0，不同为1。<br>按位取反（~）运算符：对整数的每个二进制位进行取反操作。<br>左移（&lt;&lt;）运算符：将整数的二进制位向左移动指定的位数。<br>右移（&gt;&gt;）运算符：将整数的二进制位向右移动指定的位数。</p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b, c=<span class="number">2</span>,*args</span>):<span class="comment">#顺序：必填参数、默认参数、可变参数</span></span><br><span class="line">    s = a + b + c</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;a的值为：<span class="subst">&#123;a&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;b的值为：<span class="subst">&#123;b&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;c的值为：<span class="subst">&#123;c&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;s的值为：<span class="subst">&#123;s&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> s <span class="comment">#没有返回值则得到None</span></span><br><span class="line">  <span class="comment">#多个返回值的情况就逗号隔开组成元组</span></span><br><span class="line">add(<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#嵌套函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;in foo&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;in bar&quot;</span>)</span><br><span class="line">    bar()</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>

<ul>
<li>引用</li>
</ul>
<p>python不分传递参数是否是引用还是临时变量，一律都是引用。所以很容易出现的错误是将某个变量传递给另一个变量，但这个变量改变后另一个变量也跟着变。如 <code>l.append(key) key=[1,2]</code> l值永远等于key，key 变化了 l也跟着变化,即l&#x3D;[key]</p>
<p>让传递参数不随之改变：深拷贝（浅拷贝不行的，依然会跟着改变）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 原始变量</span></span><br><span class="line">original = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 深复制</span></span><br><span class="line">deep_copy = copy.deepcopy(original)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改原变量</span></span><br><span class="line">original[<span class="number">2</span>][<span class="number">0</span>] = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印原变量和深复制的变量，可以看到原变量的改变没有影响到深复制的变量</span></span><br><span class="line"><span class="built_in">print</span>(original)  <span class="comment"># 输出: [1, 2, [5, 4]]</span></span><br><span class="line"><span class="built_in">print</span>(deep_copy)  <span class="comment"># 输出: [1, 2, [3, 4]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 浅复制</span></span><br><span class="line">shallow_copy = copy.copy(original)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改原变量</span></span><br><span class="line">original[<span class="number">2</span>][<span class="number">0</span>] = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印原变量和浅复制的变量，可以看到原变量的改变也影响到了浅复制的变量</span></span><br><span class="line"><span class="built_in">print</span>(original)  <span class="comment"># 输出: [1, 2, [5, 4]]</span></span><br><span class="line"><span class="built_in">print</span>(shallow_copy)  <span class="comment"># 输出: [1, 2, [5, 4]]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="number">3</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mytest4</span>(<span class="params">b</span>):</span><br><span class="line">   <span class="keyword">global</span> a <span class="comment">#全局变量</span></span><br><span class="line">   a=b+<span class="number">1</span></span><br><span class="line">mytest4(b=a)</span><br><span class="line"><span class="built_in">print</span>(a) <span class="comment">#4 </span></span><br></pre></td></tr></table></figure>

<h2 id="可变参数-args-kwargs"><a href="#可变参数-args-kwargs" class="headerlink" title="可变参数*args,**kwargs"></a>可变参数*args,**kwargs</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*args <span class="comment">#组合成元组 args即arguments</span></span><br><span class="line">**kwargs <span class="comment">#组合成字典</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args,**kwargs</span>)</span><br><span class="line">func(*l,**dic)<span class="comment">#调用这个函数也是</span></span><br><span class="line"><span class="comment">#函数体中，*args解包，args不解包按元组用</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_avg</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="keyword">if</span> args:</span><br><span class="line">        avg = <span class="built_in">sum</span>(args) / <span class="built_in">len</span>(args)  <span class="comment"># 计算平均值</span></span><br><span class="line">        title = kwargs.get(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;Average&#x27;</span>)  <span class="comment"># 从 kwargs 中获取标题，默认为 &quot;Average&quot;</span></span><br><span class="line">        precision = kwargs.get(<span class="string">&#x27;precision&#x27;</span>, <span class="number">2</span>)  <span class="comment"># 从 kwargs 中获取精度，默认为 2</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;title&#125;</span>: <span class="subst">&#123;avg:.&#123;precision&#125;</span>f&#125;&quot;</span>)  <span class="comment"># 格式化输出</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;No numbers provided.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算多个位置参数的平均值</span></span><br><span class="line">print_avg(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment"># 输出: Average: 3.00</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加标题和精度</span></span><br><span class="line">print_avg(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, title=<span class="string">&quot;Mean Value&quot;</span>, precision=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 输出: Mean Value: 3.000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 传递空参数</span></span><br><span class="line">print_avg()</span><br><span class="line"><span class="comment"># 输出: No numbers provided.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理较大数据集</span></span><br><span class="line">numbers = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br><span class="line">print_avg(*numbers, title=<span class="string">&quot;Dataset Average&quot;</span>)</span><br><span class="line"><span class="comment"># 输出: Dataset Average: 30.00</span></span><br></pre></td></tr></table></figure>

<h2 id="匿名函数-lambda"><a href="#匿名函数-lambda" class="headerlink" title="匿名函数 lambda"></a>匿名函数 lambda</h2><p><code>lambda arguments: expression</code>：arguments: 函数参数，可多个，用逗号分隔。<br>expression: Lambda 函数的返回值，必须是一个表达式，不能包含复杂的语句（例如循环、赋值等）。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">add_lambda = <span class="keyword">lambda</span> x, y: x + y</span><br><span class="line"><span class="built_in">print</span>(add_lambda(<span class="number">2</span>, <span class="number">3</span>))  <span class="comment"># 输出: 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#无参函数</span></span><br><span class="line">say_hello = <span class="keyword">lambda</span>: <span class="string">&quot;Hello, World!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(say_hello())  <span class="comment"># 输出: Hello, World!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#默认参数</span></span><br><span class="line">increment = <span class="keyword">lambda</span> x, step=<span class="number">1</span>: x + step</span><br><span class="line"><span class="built_in">print</span>(increment(<span class="number">5</span>))         <span class="comment"># 输出: 6 (默认 step=1)</span></span><br><span class="line"><span class="built_in">print</span>(increment(<span class="number">5</span>, step=<span class="number">2</span>)) <span class="comment"># 输出: 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#map,filter,sorted应用</span></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">squared = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x ** <span class="number">2</span>, numbers))</span><br><span class="line"><span class="built_in">print</span>(squared)  <span class="comment"># 输出: [1, 4, 9, 16]</span></span><br><span class="line"></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">even_numbers = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x % <span class="number">2</span> == <span class="number">0</span>, numbers))</span><br><span class="line"><span class="built_in">print</span>(even_numbers)  <span class="comment"># 输出: [2, 4]</span></span><br><span class="line"></span><br><span class="line">data = [(<span class="number">1</span>, <span class="string">&quot;apple&quot;</span>), (<span class="number">2</span>, <span class="string">&quot;banana&quot;</span>), (<span class="number">3</span>, <span class="string">&quot;cherry&quot;</span>)]</span><br><span class="line">sorted_data = <span class="built_in">sorted</span>(data, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(sorted_data)  <span class="comment"># 输出: [(1, &#x27;apple&#x27;), (2, &#x27;banana&#x27;), (3, &#x27;cherry&#x27;)]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#列表中直接调用</span></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">results = [(<span class="keyword">lambda</span> x: x ** <span class="number">2</span>)(n) <span class="keyword">for</span> n <span class="keyword">in</span> numbers]</span><br><span class="line"><span class="built_in">print</span>(results)  <span class="comment"># 输出: [1, 4, 9, 16]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(n)：对 Lambda 函数的调用，n 是当前列表元素，作为参数传递给 Lambda 函数。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">results = []</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">    <span class="comment"># 调用 Lambda 函数，并传入 n 作为参数</span></span><br><span class="line">    results.append((<span class="keyword">lambda</span> x: x ** <span class="number">2</span>)(n))</span><br><span class="line">    </span><br><span class="line"><span class="comment">#lambda条件表达式</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">lambda arguments: value_if_true if condition else value_if_false</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sum</span>(<span class="params">nums: <span class="built_in">list</span></span>):</span><br><span class="line">    n=<span class="built_in">sum</span>(nums)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x,y: -y*n <span class="keyword">if</span> <span class="built_in">len</span>(nums)%<span class="number">2</span> <span class="keyword">else</span> n*x</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    nums=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">    x,y=<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">    temp_function = get_sum(nums)<span class="comment">#把返回值即lambda函数赋值给变量</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;temp_function&#x27;</span>,<span class="built_in">type</span>(temp_function))<span class="comment">#class=function</span></span><br><span class="line">    <span class="built_in">print</span>(temp_function(x, y))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><ul>
<li>异常会中断执行</li>
</ul>
<p>除0运算——ZeroDivisionError<br>找不到可读文件——FileNotFoundError<br>值错误——ValueError 类型转换时类型正确但值不恰当 比如int(“ok”)<br>索引错误——IndexError 下标超界<br>类型错误——TypeError<br>其他常见的异常类型：NameError 使用未被定义变量、KeyError 访问字典里不存在的键、EOFError没有更多数据但仍读取、AttributeError没有这个属性</p>
<ul>
<li>异常处理：异常捕获，就近原则</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#基本框架</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	监控的代码</span><br><span class="line"><span class="keyword">except</span> exception_type <span class="keyword">as</span> xx:</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">	 <span class="comment"># 万能异常/其他异常，不能获得错误类型，但获得错误信息</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="comment">#没有异常会执行的代码</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">	<span class="comment">#无论是否发生异常都会走到这里</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    i = <span class="number">4</span> / <span class="number">0</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">except后不写Exception也是捕获任意类型异常（简写）</span></span><br><span class="line"><span class="string">简写时在获取异常的详细信息时不能使用as，</span></span><br><span class="line"><span class="string">要利用内置traceback模块获取内容</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我可以处理任意类型的异常&quot;</span>)</span><br><span class="line">    <span class="comment"># 获取本次异常的报错信息</span></span><br><span class="line">    <span class="built_in">print</span>(traceback.format_exc())</span><br><span class="line"><span class="built_in">print</span>(e.__traceback__.tb_frame.f_globals[<span class="string">&quot;__file__&quot;</span>])</span><br><span class="line">	<span class="comment">#发生异常所在文件</span></span><br><span class="line"><span class="built_in">print</span>(e.__traceback__.tb_lineno)<span class="comment">#发生异常所在行数</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>自定义异常<br><img src="/images/python%E5%A4%A7%E5%85%A8.assets/6bda5acd7aa04320a291ee7012ba5802.png" alt="在这里插入图片描述"></p>
</li>
<li><p>raise抛出异常</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义异常类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCustomError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 引发自定义异常 raise exception(&quot;错误描述信息&quot;)</span></span><br><span class="line"><span class="keyword">raise</span> MyCustomError(<span class="string">&quot;This is a custom error&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">function</span>(<span class="params">pwd</span>):</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">len</span>(pwd)&gt;=<span class="number">8</span>):<span class="keyword">return</span> pwd</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		ex=Exception(<span class="string">&quot;密码长度不够&quot;</span>)</span><br><span class="line">		<span class="keyword">raise</span> ex</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	<span class="built_in">print</span>(function(<span class="string">&quot;string&quot;</span>))</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> result:</span><br><span class="line">	<span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<h1 id="web框架"><a href="#web框架" class="headerlink" title="web框架"></a>web框架</h1><p>Django耦合度高，难替换内置功能<br>Flask 轻量级，易扩展使用<br>网页开发流程：系统功能结构图（前后台）-&gt;系统业务流程图-&gt;数据表关系</p>

            </div>
        </div>
    </article>

    
    
<nav class="article-nav">
  
  
    <a href="/2025/07/28/Bootsrap/" id="article-nav-older" class="article-nav-link-wrap next">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Bootsrap</div>
    </a>
  
</nav>

    

    
</div>
    </div>
    <footer class="site-footer">
        <div class="global-width">
            <ul class="site-widget">
                
                <li class="widget widget-tag">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/basics/" rel="tag">basics</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/frontend/" rel="tag">frontend</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/projects/" rel="tag">projects</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tags/" rel="tag">tags</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/" rel="tag">test</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

                </li>
                
                <li class="widget widget-category">
                    
                </li>
                
                <li class="widget widget-recent_posts">
                    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-body">
      <ul>
        
          <li>
            <a href="/2026/02/09/python%E5%A4%A7%E5%85%A8/">python大全</a>
          </li>
        
          <li>
            <a href="/2025/07/28/Bootsrap/">Bootsrap</a>
          </li>
        
          <li>
            <a href="/2025/07/20/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91JS%E5%A4%A7%E5%85%A8/">JS一本通</a>
          </li>
        
          <li>
            <a href="/2025/07/09/%E3%80%90%E5%89%8D%E7%AB%AF%E3%80%91htmlcss%E5%A4%A7%E5%85%A8/">HTML_CSS_Bootstrap_Emmet</a>
          </li>
        
          <li>
            <a href="/2025/05/28/%E6%8F%92%E4%BB%B6test/">测试目录插件的文章</a>
          </li>
        
      </ul>
    </div>
  </div>

                </li>
                
            </ul>
        </div>
        <div class="site-info">
            <address>
                &copy; 2014 <a href="https://70v-yoyo.github.io">Yoyo&#39;s blog</a> All Right Reserved. <br/>
                Powered by <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a>. Theme by <a target="_blank" rel="noopener" href="http://zzoman.com">ZZOMAN</a>
                <p><a target="_blank" href="https://github.com/70v-Yoyo">My github</a></p>
            </address>
        </div>
    </footer> 
    
    
    <script src="/libs/jquery-1.11.3.min.js" type="text/javascript"></script>
    
    <script src="/libs/fancybox/jquery.fancybox.js" type="text/javascript"></script>
    
    <script src="/js/site_init.js" type="text/javascript"></script>
     
    <noscript>
        <style>
            article {
                position: absolute;
                width: 0;
                height: 0;
                overflow: hidden;
                opacity: 0;
            }

        </style>
        <h1>JS已被禁用</h1>
    </noscript>
<!-- hexo injector body_end start -->
    <script>
      (function() {
        function moveElementIfSmallScreen() {
          const toc = document.getElementById('fixed-toc-container');
          const article = document.querySelector("article");
          const toggleBtn = document.getElementById('toggle_btn');
          if (!toc || !article) return;
          if (window.innerWidth < 1024 && article.firstElementChild !== toc) {
            console.log('small screen!!')
            
            article.insertBefore(toc, article.firstChild);//移动节点，而非复制
            
            toggleBtn.style.display='none';
            // 替换样式：取消 fixed，设置适合正文的样式
            toc.style.position = 'relative';
            toc.style.top = '';
            toc.style.left = '';
            toc.style.width = '100%';
            toc.style.maxHeight = 'none';
            toc.style.overflowY = 'visible';
            toc.style.overflowX = 'visible';
            toc.style.padding = '1em';
            toc.style.borderLeft = 'none';
            toc.style.borderBottom = '1px solid #ddd';
            toc.style.background = '#f9f9f9';
            toc.style.opacity = '1';
            toc.style.zIndex = '9999';
            toc.style.boxShadow = 'none';
            toc.style.margin = '1rem';
            toc.style.paddingTop= '2rem';
          }
        }
        window.addEventListener("DOMContentLoaded", moveElementIfSmallScreen);
        window.addEventListener("resize", moveElementIfSmallScreen);
      })();
    </script>
  <!-- hexo injector body_end end -->
    <div id="fixed-toc-container" style="
      position: fixed;
      top: 0vh;
      left: 0px;
      width: 15rem;
      max-height: 80vh;
      overflow-y: auto;
      overflow-x: auto;
      padding: 10px;
      border-left: 2px solid #ccc;
      font-size: 14px;
      line-height: 1.5;
      background: #fff;
      opacity:0.8;
      z-index: 9999;
      box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.05),  /* 第一层：近处柔和 */
        0 8px 16px rgba(0, 0, 0, 0.08); /* 第二层：远处扩散 */
    ">
      <strong>Contents</strong>
      <div id="toggle_btn" style="
      position:absolute;
      right:1rem;
      display:inline-block;
      width:2rem;
      text-align:center;
      border:1px solid #ccc;
      "><</div>
      <ul id="fixed-toc-list" style="list-style: none; padding-left: 10px;"></ul>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const nav = document.querySelector('nav');
        if (nav) {
          const navBottom = nav.getBoundingClientRect().bottom;//浏览器JS API
          console.log('nav bottom:', navBottom);
          // 设置toc元素 top = nav bottom
          const toc = document.querySelector('#fixed-toc-container');
          if (toc) {
            toc.style.top = navBottom + 'px';
            toc.style.maxHeight=window.innerHeight - navBottom.getBoundingClientRect().bottom;
          }
        }
      });

      const myDiv = document.getElementById('toggle_btn');
      var tocList=document.getElementById("fixed-toc-list");
      var tocContainer=document.getElementById("fixed-toc-container");
      function handleClickBtn() {
        console.log('Div 被点击了！');
        if(myDiv.textContent==='<'){
          myDiv.textContent ='>'
          tocList.style.display='none'
          tocContainer.style.width='11rem'
        }else{
          myDiv.textContent ='<'
          tocList.style.display='block'
          tocContainer.style.width='15rem'
        }
          
      }


      myDiv.addEventListener('click', handleClickBtn);// 绑定点击事件


      (function() {
      const Patternstr = "/*\\d{4}/\\d{2}/\\d{2}/.*"; //本身是字符串插入，所以对符号要转义
      //"^//*"->"/"
      //"/.*"->".*"
      //JS引擎中""转义
      //正则表达式引擎也是""转义
      const dataPattern = new RegExp(Patternstr);
      const path = window.location.pathname;
      console.log(dataPattern.toString(),path,dataPattern.test(path));//控制台在渲染时省略了反斜杠的可视表示。
      if (!dataPattern.test(path)&&(path==='/'||path==='index.html')) {
        console.log('no toc')
        let toc = document.getElementById('fixed-toc-container');
        if (toc) toc.style.display = 'none';
        return;
      }
        var content = document.querySelector('body');
        console.log('content',content)
        //var tocList = document.getElementById('fixed-toc-list');
        if (!content || !tocList) {
          document.getElementById('fixed-toc-container').style.display = 'none';
          return;
        }
        var headings = content.querySelectorAll('h1, h2, h3, h4');
        console.log('headings',headings)
        if(headings){
          const h1Element=headings[0];
          const rect = h1Element.getBoundingClientRect();
          if(rect.left<150){
           tocContainer.style.right='0px';
           tocContainer.style.left = 'auto'; // 移除内联的 left 样式
            //不是设置right:0 就替换left:0 需要移除
            console.log('to right')
          }
          console.log(rect.left,'150')
        }
        
        if (headings.length === 0) {
          document.getElementById('fixed-toc-container').style.display = 'none';
          return;
        }
        headings.forEach(function(heading, i) {
          if (!heading.id) {
            heading.id = 'heading-' + i;
          }
        });
        headings.forEach(function(heading) {
          var level = parseInt(heading.tagName.substring(1));
          var li = document.createElement('li');
          li.style.marginLeft = (level - 1) * 15 + 'px';
          var a = document.createElement('a');
          a.href = '#' + heading.id;
          a.textContent = heading.textContent;
          a.style.color = '#555';
          a.style.textDecoration = 'none';
          a.onmouseover = function() { a.style.textDecoration = 'underline'; };
          a.onmouseout = function() { a.style.textDecoration = 'none'; };
          li.appendChild(a);
          tocList.appendChild(li);
        });
      })();
    </script>
  </body>
</html>
